this.ej=this.ej||{},this.ej.maps=function(e,t,i,a,o){"use strict";function n(e,t){return null!==e&&void 0!==e?-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10):null}function l(e){var t=e.element.clientWidth,i=e.element.clientHeight,a=n(e.element.style.width,t),o=n(e.element.style.height,t);"0px"===e.width||"0%"===e.width||"0%"===e.height||"0px"===e.height?e.availableSize=new $e(0,0):e.availableSize=new $e(n(e.width,t)||t||a||600,n(e.height,i)||i||o||(e.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}function r(e){e.renderer=new i.SvgRenderer(e.element.id),l(e),e.svgObject=e.renderer.createSvg({id:e.element.id+"_svg",width:e.availableSize.width,height:e.availableSize.height}),"0px"!==e.width&&"0%"!==e.width&&"0%"!==e.height&&"0px"!==e.height||(e.svgObject.setAttribute("height","0"),e.svgObject.setAttribute("width","0"))}function s(e,t,i){var a=i.getBoundingClientRect(),o=i.ownerDocument.defaultView.pageXOffset,n=i.ownerDocument.defaultView.pageYOffset,l=i.ownerDocument.documentElement.clientTop,r=i.ownerDocument.documentElement.clientLeft,s=a.left+o-r,d=a.top+n-l;return new ct(e-s,t-d)}function d(e){return e*(Math.PI/180)}function p(e){return e*(180/Math.PI)}function h(e,i,a,o,n){var l,r,s,h,c,f,b=new $e(n.mapAreaRect.width,n.mapAreaRect.height),x=n.baseMapBounds.longitude,S=n.baseMapBounds.latitude,O=d(e),_=d(i),M=n.projectionType,L=n.isTileMap?256*Math.pow(2,1):t.isNullOrUndefined(a)?Math.min(b.width,b.height):Math.min(b.width,b.height)*a;if("Normal"===o.geometryType)l=t.isNullOrUndefined(a)?i:Math.abs((i-x.min)*a),r=t.isNullOrUndefined(a)?e:Math.abs((S.max-e)*a);else if("Geographic"===o.geometryType){switch(M){case"Mercator":var C=new et(L/2,L/2);l=C.x+i*(L/360);var P=v(Math.sin(d(e)),-.9999,.9999);r=C.y+.5*Math.log((1+P)/(1-P))*(-L/(2*Math.PI));break;case"Winkel3":c=((s=g(_,O)).x+_/(Math.PI/2))/2,h=(s.y+O)/2;break;case"Miller":c=_,h=1.25*Math.log(Math.tan(Math.PI/4+.4*O));break;case"Eckert3":c=2/(f=Math.sqrt(Math.PI*(4+Math.PI)))*_*(1+Math.sqrt(1-4*O*O/(Math.PI*Math.PI))),h=4/f*O;break;case"AitOff":c=(s=g(_,O)).x,h=s.y;break;case"Eckert5":c=_*(1+Math.cos(O))/Math.sqrt(2+Math.PI),h=2*O/Math.sqrt(2+Math.PI);break;case"Equirectangular":c=_,h=O;break;case"Eckert6":f=(1+Math.PI/2)*Math.sin(O);for(var w=1/0,I=0;I<10&&Math.abs(w)>1e-6;I++)O-=w=(O+Math.sin(O)-f)/(1+Math.cos(O));f=Math.sqrt(2+Math.PI),c=_*(1+Math.cos(O))/f,h=2*O/f}l="Mercator"===M?l:y(m(n,p(c)),3),r="Mercator"===M?r:-y(u(n,p(h)),3)}return new et(l,r)}function c(e,t,i,a){var o=256*Math.pow(2,t),n=(e.x+180)/360,l=Math.sin(e.y*Math.PI/180),r=.5-Math.log((1+l)/(1-l))/(4*Math.PI),s=e.x,d=e.y;return a&&(s=n*o+.5+i.x,d=r*o+.5+i.y),{x:s,y:d}}function m(e,i){var a=e.baseMapBounds.longitude,o=t.isNullOrUndefined(e.baseSize)?e.mapAreaRect.width:e.mapAreaRect.width+Math.abs(e.baseSize.width-e.mapAreaRect.width)/2;return Math.round(o*(i-a.min)/(a.max-a.min)*100)/100}function u(e,t){var i=e.baseMapBounds.latitude;return Math.round(e.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}function g(e,t){var i=Math.cos(t),a=f(b(i*Math.cos(e/=2)));return new et(2*i*Math.sin(e)*a,Math.sin(t)*a)}function y(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}function f(e){return e/Math.sin(e)}function b(e){return Math.acos(e)}function v(e,i,a){return t.isNullOrUndefined(i)||(e=Math.max(e,i)),t.isNullOrUndefined(a)||(e=Math.min(e,a)),e}function x(e,i,a,o){t.createElement("a",{attrs:{download:e+"."+i.toLocaleLowerCase(),href:a}}).dispatchEvent(new MouseEvent(o?"click":"move",{view:window,bubbles:!1,cancelable:!0}))}function S(e,i){var a=document.getElementById("mapsmeasuretext");return null===a&&(a=t.createElement("text",{id:"mapsmeasuretext"}),document.body.appendChild(a)),a.innerHTML=e,a.style.position="absolute","number"==typeof i.size?a.style.fontSize=i.size+"px":a.style.fontSize=i.size,a.style.fontWeight=i.fontWeight,a.style.fontStyle=i.fontStyle,a.style.fontFamily=i.fontFamily,a.style.visibility="hidden",a.style.top="-100",a.style.left="0",a.style.whiteSpace="nowrap",a.style.lineHeight="normal",new $e(a.clientWidth,a.clientHeight)}function O(e,t,a,o,n){void 0===n&&(n=!1);var l,r,s={id:e.id,x:e.x,y:e.y,fill:a,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:t.opacity,"dominant-baseline":e.baseLine},d="string"==typeof e.text?e.text:n?e.text[e.text.length-1]:e.text[0],p=new i.SvgRenderer(""),h=p.createText(s,d);if(h.style["user-select"]="none",h.style["-moz-user-select"]="none",h.style["-webkit-touch-callout"]="none",h.style["-webkit-user-select"]="none",h.style["-khtml-user-select"]="none",h.style["-ms-user-select"]="none",h.style["-o-user-select"]="none","string"!=typeof e.text&&e.text.length>1)for(var c=1,m=e.text.length;c<m;c++)r=S(e.text[c],t).height,l=p.createTSpan({x:e.x,id:e.id,y:e.y+(n?-c*r:c*r)},n?e.text[e.text.length-(c+1)]:e.text[c]),h.appendChild(l);return o.appendChild(h),h}function _(e,i,a,o,n){for(var l=t.createElement("div",{id:i,styles:"position: absolute;pointer-events: auto;"}),r=e.length;r>0;)l.appendChild(e[0]),r--;for(var s=l.innerHTML,d=Object.keys(a),p=0;p<d.length;p++)"object"==typeof a[d[p]]?s=L(s,"",a,n):"latitude"!==d[p].toLowerCase()&&"longitude"!==d[p].toLowerCase()&&(s=s.replace(new RegExp("{{:"+d[p]+"}}","g"),a[d[p].toString()]));return l.innerHTML=s,l}function M(e,t){return t.format&&!isNaN(Number(e))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(e)):e}function L(e,t,i,a){for(var o=""===e?t:e,n=""===e?o.split("${"):o.split("{{:"),l=0;l<n.length;l++)if(n[l].indexOf("}}")>-1&&n[l].indexOf(".")>-1||n[l].indexOf("}")>-1&&n[l].search(".")>-1)for(var r=""===e?n[l].split("}"):n[l].split("}}"),s=0;s<r.length;s++)if(r[s].indexOf(".")>-1){var d=w(i,r[s]).toString();o=""===e?o.split("${"+r[s]+"}").join(M(d,a)):o.replace(new RegExp("{{:"+r[s]+"}}","g"),d)}return o}function C(e,i,a,o,n){for(var l=(t.isNullOrUndefined(e.childElementCount)?e[0]:e).outerHTML,r=Object.keys(a),s=0;s<r.length;s++)l=l.replace(new RegExp("{{:"+r[s]+"}}","g"),a[r[s].toString()]);return t.createElement("div",{id:i,innerHTML:l,styles:"position: absolute"})}function P(e,i,a,o,n,l,r){var s,d,p,h,c,m,u=n.size,g=n.borderColor,y=parseFloat(n.borderWidth),f=n.fill,b=n.dashArray,v={color:g,width:y},x=n.opacity;if(c=new ot(o,f,y,g,x,b,""),"Circle"===e){var S=(u.width+u.height)/4;h=new rt(o,f,v,x,a.x,a.y,S,b),s=r.renderer.drawCircle(h)}else"Rectangle"===e?(d=a.x-u.width/2,p=a.y-u.height/2,m=new lt(o,f,v,x,new mt(d,p,u.width,u.height),null,null,"",b),s=r.renderer.drawRectangle(m)):"Image"===e?(d=a.x-u.width/2,p=a.y-u.height,t.merge(c,{href:i,height:u.height,width:u.width,x:d,y:p}),s=r.renderer.drawImage(c)):s=G(r,e,c,u,a,l);return s}function w(e,i){if(!t.isNullOrUndefined(e)&&!t.isNullOrUndefined(i)){var a=i.replace(/\[/g,".").replace(/\]/g,"").split(".");if(1===a.length)e=e[a[0]];else for(var o=0;o<a.length&&!t.isNullOrUndefined(e);o++)e=e[a[o]]}return e}function I(e,i){var a=t.isNullOrUndefined(e.colorValuePath)?i[e.colorValuePath]:e.colorValuePath.indexOf(".")>-1?w(i,e.colorValuePath).toString():i[e.colorValuePath];return e.fill=t.isNullOrUndefined(e.colorValuePath)||t.isNullOrUndefined(a)?e.fill:e.colorValuePath.indexOf(".")>-1?w(i,e.colorValuePath).toString():i[e.colorValuePath],e}function T(e,i){if(t.isNullOrUndefined(e.shapeValuePath)||t.isNullOrUndefined(i[e.shapeValuePath])){var a=t.isNullOrUndefined(e.shapeValuePath)?e.shape:e.shapeValuePath.indexOf(".")>-1?w(i,e.shapeValuePath).toString():e.shape;e.shape=a;var o=t.isNullOrUndefined(e.imageUrlValuePath)?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?w(i,e.imageUrlValuePath).toString():e.imageUrl;e.imageUrl=o}else{var n=e.shapeValuePath.indexOf(".")>-1?w(i,e.shapeValuePath).toString():i[e.shapeValuePath];e.shape=n,"Image"==i[e.shapeValuePath]&&(e.imageUrl=t.isNullOrUndefined(e.imageUrlValuePath)||t.isNullOrUndefined(i[e.imageUrlValuePath])?e.imageUrl:e.imageUrlValuePath.indexOf(".")>-1?w(i,e.imageUrlValuePath).toString():i[e.imageUrlValuePath])}return e}function k(e,i,a,o,n,l,r,s){var d,p,h,c,m,u,g,y=[],f=[],b=0,v=0,x=e.markerClusterSettings.labelStyle,S=0,_=[],M=e.markerClusterSettings,L=a.renderer.createGroup({id:a.element.id+"_LayerIndex_"+o+"_markerCluster"}),C={cancel:!1,name:ti,fill:M.fill,height:M.height,width:M.width,imageUrl:M.imageUrl,shape:M.shape,data:void 0,maps:a,cluster:M,border:M.border};if(t.isBlazor()){C.data,C.maps,C.cluster;var w=Ke(C,["data","maps","cluster"]);C=w}a.trigger("markerClusterRendering",C,function(M){for(var w=0;w<i.childElementCount;w++)if(_=[],"hidden"!==i.childNodes[w].style.visibility){if(g=i.childNodes[w],d=g.getBoundingClientRect(),_.push(w),!t.isNullOrUndefined(d)){for(var I=w+1;I<i.childElementCount;I++)"hidden"!==i.childNodes[I].style.visibility&&(g=i.childNodes[I],p=g.getBoundingClientRect(),t.isNullOrUndefined(p)||d.left>p.right||d.right<p.left||d.top>p.bottom||d.bottom<p.top||(y.push(p),i.childNodes[I].style.visibility="hidden",_.push(I)));if(b=d.left+d.width/2,v=d.top+d.height,y.length>0){_=_.filter(function(e,t,i){return i.indexOf(e)===t});var T=a.element.getBoundingClientRect();b-=T.left,v-=T.top;var k=a.isTileMap?new Object:he(a,e,!1),N=a.isTileMap?{x:0,y:0}:0!==a.translatePoint.x?a.translatePoint:k.location,E=parseInt(i.childNodes[w].id.split("_dataIndex_")[1].split("_")[0],10),z=parseInt(i.childNodes[w].id.split("_MarkerIndex_")[1].split("_")[0],10);i.childNodes[w].style.visibility="hidden";var j=e.markerClusterSettings;C.cancel?((u={size:new $e(j.width,j.height),fill:j.fill,borderColor:j.border.color,borderWidth:j.border.width,opacity:j.opacity,dashArray:j.dashArray}).fill=j.fill,u.size.width=j.width,u.size.height=j.height,u.imageUrl=j.imageUrl,u.shape=j.shape,u.borderColor=j.border.color,u.borderWidth=j.border.width):((u={size:new $e(j.width,j.height),fill:j.fill,borderColor:j.border.color,borderWidth:j.border.width,opacity:j.opacity,dashArray:j.dashArray}).fill=C.fill,u.size.width=C.width,u.size.height=C.height,u.imageUrl=C.imageUrl,u.shape=C.shape,u.borderColor=C.border.color,u.borderWidth=C.border.width),b=a.isTileMap?b:i.id.indexOf("_Markers_Group")>-1?b:(b+N.x)*a.mapScaleValue,v=a.isTileMap?v:i.id.indexOf("_Markers_Group")>-1?v:(v+N.y)*a.mapScaleValue;var A=a.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+z+"_dataIndex_"+E+"_cluster_"+S,B=a.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+z+"_dataIndex_"+E+"_cluster_"+S+"_datalabel_"+S;S++;var F="Image"===u.shape?u.size.height/2:0,R=P(u.shape,u.imageUrl,{x:0,y:F},A,u,n,a);R.setAttribute("transform","translate( "+b+" "+v+" )"),"Balloon"===C.shape?R.children[0].innerHTML=_.toString():R.innerHTML=_.toString(),h=new at(B,0,3.75,"middle",(y.length+1).toString(),"",""),(c=O(h,x,x.color,n)).setAttribute("transform","translate( "+b+" "+v+" )"),L.appendChild(c),L.appendChild(R)}}y=[]}l.appendChild(L),a.svgObject.appendChild(l),a.element.appendChild(a.svgObject);for(var U=0;U<L.childElementCount;U++)if("hidden"!==L.childNodes[U].style.visibility&&(g=L.childNodes[U],d=g.getBoundingClientRect(),!(t.isNullOrUndefined(d)||g.id.indexOf("_datalabel_")>-1))){for(var Z=U+1;Z<L.childElementCount;Z++)"hidden"!==L.childNodes[Z].style.visibility&&(m=L.childNodes[Z],p=m.getBoundingClientRect(),t.isNullOrUndefined(p)||m.id.indexOf("_datalabel_")>-1||d.left>p.right||d.right<p.left||d.top>p.bottom||d.bottom<p.top||(f.push(m),f.push(L.childNodes[Z-1]),L.childNodes[Z].style.visibility="hidden",L.childNodes[Z-1].style.visibility="hidden",_.push(Z)));if(f.length>0){g=L.childNodes[U];for(var D=0;D<f.length;D++)"g"===g.tagName?g.childNodes[0].textContent=g.childNodes[0].textContent+","+f[D].textContent:g.textContent=g.textContent+","+f[D].textContent,L.childNodes[U-1].textContent=(+L.childNodes[U-1].textContent+ +f[D+1].textContent).toString(),D++}f=[]}for(;0<L.childNodes.length;)n.insertBefore(L.childNodes[0],n.firstChild);r?l.appendChild(n):(ue(a.element.id+"_Secondary_Element").appendChild(n),l.appendChild(n)),document.getElementById(a.element.id+"_LayerIndex_0_markerCluster").remove(),s&&document.getElementById(a.element.id+"_Layer_Collections").appendChild(l)})}function N(e,t,i){var a=e[0].layerIndex,o=e[0].targetClusterIndex,n=e[0].markerIndex,l=e[0].dataIndex,r=t.element.id+"_LayerIndex_"+a+"_MarkerIndex_"+n,s=r+"_dataIndex_"+l+"_cluster_"+o,d=fe(s),p=fe(s+"_datalabel_"+o);d.setAttribute("visibility","visible"),p.setAttribute("visibility","visible");for(var h=e[0].data.length,c=0;c<h;c++)fe(r+"_dataIndex_"+e[0].data[c].index).style.visibility="hidden";de(t.element.id+"_LayerIndex_"+a+"_MarkerIndex_"+n+"_markerClusterConnectorLine")}function E(e,t,i,a){var o=e[0].layerIndex,n=e[0].markerIndex,l=e[0].targetClusterIndex,r=e[0].dataIndex,s=a?fe:i.querySelector.bind(i),d=a?"":"#",p=t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n,h=p+"_dataIndex_"+r+"_cluster_"+l,c=s(d+""+h),m=s(d+""+h+"_datalabel_"+l);c.setAttribute("visibility","hidden"),m.setAttribute("visibility","hidden");var u=t.layers[o].markerSettings[n],g=s(d+""+p+"_dataIndex_"+r),y=u.height,f=u.width,b=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],v=+c.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),x=f+5,S=6.28*x,O=0,_=Math.round(S/f);O+=_;for(var M=e[0].data.length,L=Math.round(y/S*100),C=(L=M<_?100/M:L)/100*360,P=M<_?45:0,w=1,I="M "+b+" "+v+" ",T="",k=0;k<M;k++){if(O===k||Math.round(P)>=360){for(P=0,S=6.28*(x=(f+5)*++w),_=Math.round(S/y),L=Math.round(y/S*100);L*_<100;)_++;C=L/100*360,O+=_}var N=b+x*Math.sin(2*Math.PI*P/360),E=v+x*Math.cos(2*Math.PI*P/360);T+=I+"L "+N+" "+E+" ",(g=s(d+""+p+"_dataIndex_"+e[0].data[k].index)).setAttribute("transform","translate( "+N+" "+E+")"),g.style.visibility="visible",P+=C}var z,j=t.layers[o].markerClusterSettings.connectorLineSettings;z={d:T,id:t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n+"_dataIndex_"+r+"_markerClusterConnectorLine",stroke:j.color,opacity:j.opacity,"stroke-width":j.width},i=a?s(t.element.id+"_Markers_Group"):i;var A=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+o+"_MarkerIndex_"+n+"_markerClusterConnectorLine"});A.appendChild(t.renderer.drawPath(z)),i.insertBefore(A,i.querySelector("#"+p+"_dataIndex_0"))}function z(e,t,i,a,o,n,l,r,s,d,p){var h={size:new $e(e.width,e.height),fill:e.fill,borderColor:e.border.color,borderWidth:e.border.width,opacity:t.opacity,dashArray:t.dashArray},c=P(e.shape,e.imageUrl,{x:0,y:0},l,h,p,d),m=(d.isTileMap?o.x:(o.x+n.x)*s)+r.x,u=(d.isTileMap?o.y:(o.y+n.y)*s)+r.y;c.setAttribute("transform","translate( "+m+" "+u+" )"),A(d.selectedMarkerElementId,d.markerSelectionClass,c,"MarkerselectionMapStyle"),p.appendChild(c);var g=i.length-1===a?"marker":null,y=new et(m,u);return t.animationDuration>0&&Pe(c,t.animationDelay,t.animationDuration,y,d,g),p}function j(e,t,i,a,o,n,l,r,s,d){if((t=ye(e.template))&&(d.isBlazor?{}:t(a,null,null,d.element.id+"_MarkerTemplate"+o,!1).length)){for(var p=_(t(a,null,null,d.element.id+"_MarkerTemplate"+o,!1),i,a,o,d),h=0;h<p.children.length;h++)p.children[h].style.pointerEvents="none";if(p.style.left=(d.isTileMap?l.x:Math.abs(d.baseMapRectBounds.min.x-l.x)*r)+s.x+"px",p.style.top=(d.isTileMap?l.y:Math.abs(d.baseMapRectBounds.min.y-l.y)*r)+s.y+"px",n.appendChild(p),"GoogleStaticMap"===d.layers[d.baseLayerIndex].layerType){var c=ue(d.element.id+"_StaticGoogleMap").getBoundingClientRect(),m=p.getBoundingClientRect();(c.x>m.x||c.x+640<m.x+m.width)&&(c.y>m.y||c.y+c.height<m.y+m.height)&&(p.style.display="none")}}return n}function A(e,i,a,o){if(e)for(var n=0;n<e.length;n++)a.getAttribute("id")===e[n]&&((t.isNullOrUndefined(fe(i.id))||0===n)&&(document.body.appendChild(i),a.id.indexOf("_MarkerIndex_")>-1&&a.childElementCount>0&&a.children[0].setAttribute("class",o)),a.setAttribute("class",o))}function B(e,i,a,o,n,l,r){if(!fe(e)){var s=void 0;s=t.createElement("style",{id:e,innerHTML:"."+i+"{fill:"+a+";opacity:"+o+";stroke-width:"+l+";stroke:"+n+";}"}),r.shapeSelectionClass=s,document.body.appendChild(s)}}function F(e,t){return t&&t.appendChild(e),e}function R(e,t,i){return F(e.renderer.drawCircle(t),i)}function U(e,t,i){return F(e.renderer.drawRectangle(t),i)}function Z(e,t,i){return F(e.renderer.drawPath(t),i)}function D(e,t,i){return F(e.renderer.drawPolygon(t),i)}function V(e,t,i){return F(e.renderer.drawPolyline(t),i)}function H(e,t,i){return F(e.renderer.drawLine(t),i)}function G(e,t,i,a,o,n){var l;switch(t){case"Balloon":l=K(e,i,a,o,n);break;case"Cross":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" M "+(o.x-a.width/2)+" "+o.y+" L "+(o.x+a.width/2)+" "+o.y;break;case"Diamond":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+o.y+" L "+o.x+" "+(o.y+a.height/2)+" L "+(o.x-a.width/2)+" "+o.y+" Z";break;case"Star":i.d="M "+(o.x+a.width/3)+" "+(o.y-a.height/2)+" L "+(o.x-a.width/2)+" "+(o.y+a.height/6)+" L "+(o.x+a.width/2)+" "+(o.y+a.height/6)+" L "+(o.x-a.width/3)+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" L "+(o.x+a.width/3)+" "+(o.y-a.height/2)+" Z";break;case"Triangle":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+(o.y+a.height/2)+" L "+(o.x-a.width/2)+" "+(o.y+a.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(o.x-a.width/2)+" "+o.y+" L "+(o.x+a.width/2)+" "+o.y;break;case"VerticalLine":i.d="M "+o.x+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2);break;case"InvertedTriangle":i.d="M "+(o.x-a.width/2)+" "+(o.y-a.height/2)+" L "+(o.x+a.width/2)+" "+(o.y-a.height/2)+" L "+o.x+" "+(o.y+a.height/2)+" Z";break;case"Pentagon":for(var r=void 0,s=void 0,d=0;d<5;d++)r=a.width/2*Math.cos(Math.PI/180*(72*d)),s=a.height/2*Math.sin(Math.PI/180*(72*d)),i.d+=(0==d?"M ":"L ")+(o.x+r)+" "+(o.y+s);i.d+=" Z"}return"Cross"!==t&&"HorizontalLine"!==t&&"VerticalLine"!==t||(i.stroke="transparent"===i.stroke?i.fill:i.stroke),"Balloon"===t?l:e.renderer.drawPath(i)}function W(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+(a.x+i.width/2)+" "+a.y+" L "+a.x+" "+(a.y+i.height/2)+" L "+(a.x-i.width/2)+" "+a.y+" Z",F(e.renderer.drawPath(t),o)}function q(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+(a.x+i.width/2)+" "+(a.y+i.height/2)+" L "+(a.x-i.width/2)+" "+(a.y+i.height/2)+" Z",F(e.renderer.drawPath(t),o)}function X(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2)+" M "+(a.x-i.width/2)+" "+a.y+" L "+(a.x+i.width/2)+" "+a.y,F(e.renderer.drawPath(t),o)}function Y(e,t,i,a,o){return t.d=" M "+(a.x-i.width/2)+" "+a.y+" L "+(a.x+i.width/2)+" "+a.y,F(e.renderer.drawPath(t),o)}function J(e,t,i,a,o){return t.d="M "+a.x+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2),F(e.renderer.drawPath(t),o)}function Q(e,t,i,a,o){return t.d="M "+(a.x+i.width/3)+" "+(a.y-i.height/2)+" L "+(a.x-i.width/2)+" "+(a.y+i.height/6)+" L "+(a.x+i.width/2)+" "+(a.y+i.height/6)+" L "+(a.x-i.width/3)+" "+(a.y-i.height/2)+" L "+a.x+" "+(a.y+i.height/2)+" L "+(a.x+i.width/3)+" "+(a.y-i.height/2)+" Z",F(e.renderer.drawPath(t),o)}function K(e,t,i,a,o){var n=i.width,l=i.height;a.x-=n/2,a.y-=l,t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var r=e.renderer.drawPath(t),s=i.width/30,d=i.height/30;r.setAttribute("transform","translate("+a.x+", "+a.y+") scale("+s+", "+d+")");var p=e.renderer.createGroup({id:t.id});return F(r,p),F(p,o)}function $(e,t,i,a){for(var o=e.renderer.createPattern(t,"pattern"),n=0,l=i;n<l.length;n++)F(l[n],o);return F(o,a)}function ee(e,t){for(var i,a=[],o=0,n=e;o<n.length;o++){var l=n[o];i={};for(var r=0,s=t;r<s.length;r++){var d=s[r];l[d]&&(i[d]=l[d])}a.push(i)}return a}function te(e,i,a,o,n){if(!t.isNullOrUndefined(i))for(var l=0;l<e.length;l++){var r=a.indexOf(".")>-1?w(e[l],a):e[l][a],s=ie(r,o,i);if((!t.isNullOrUndefined(r)&&isNaN(i[s])?r.toLowerCase():r)===(!t.isNullOrUndefined(i[s])&&isNaN(i[s])?i[s].toLowerCase():i[s]))return l}return null}function ie(e,i,a){if(!t.isNullOrUndefined(e)&&!t.isNullOrUndefined(a)&&!t.isNullOrUndefined(i))for(var o="[object Array]"===Object.prototype.toString.call(i)?i:[i],n=0;n<o.length;n++)if((t.isNullOrUndefined(e)?e:e.toLowerCase())===(!t.isNullOrUndefined(a[o[n]])&&isNaN(a[o[n]])?a[o[n]].toLowerCase():a[o[n]]))return o[n];return null}function ae(e,t,i){for(var a=[],o=0;o<e.length;o++){var n=e[o];t<=n.y&&i>=n.y&&a.push(n)}return a}function oe(e,t,i,a,o){var n=(t-e)/100*(100/(o-a)*(i-a))+e;return o===a&&(n=(t-e)/100+e),n}function ne(e,t){if(!e.length)return null;for(var i,a,o,n,l=e.length,r=0,s=0,d=0,p=0;p<=l-1;p++)i=e[p].x,a="Mercator"===t?e[p].y:-e[p].y,p===l-1?(o=e[0].x,n="Mercator"===t?e[0].y:-e[0].y):(o=e[p+1].x,n="Mercator"===t?e[p+1].y:-e[p+1].y),r+=Math.abs(i*n-o*a),s+=Math.abs((i+o)*(i*n-o*a)),d+=Math.abs((a+n)*(i*n-o*a));s*=1/(4*(r*=.5)),d*=1/(4*r);for(var h={x:0,y:0},c={x:0,y:0},m={x:0,y:0},u={x:0,y:0},g={x:0,y:0},y={x:0,y:0},f={x:0,y:0},b={x:0,y:0},v=0,p=0;p<=l-1;p++){var x=e[p];x.y="Mercator"===t?x.y:-x.y,x.y>d?x.x<s&&s-x.x<s-g.x?g={x:x.x,y:x.y}:x.x>s&&(0===y.x||x.x-s<y.x-s)&&(y={x:x.x,y:x.y}):x.x<s&&s-x.x<s-f.x?f={x:x.x,y:x.y}:x.x>s&&(0===b.x||x.x-s<b.x-s)&&(b={x:x.x,y:x.y}),v=y.y-b.y+(y.y-b.y)/4,x.x>s?x.y<d&&d-x.y<d-h.y?h={x:x.x,y:x.y}:x.y>d&&(0===c.y||x.y-d<c.y-d)&&(c={x:x.x,y:x.y}):x.y<d&&d-x.y<d-m.y?m={x:x.x,y:x.y}:x.y>d&&(0===u.y||x.y-d<u.y-d)&&(u={x:x.x,y:x.y})}return{x:s,y:d,rightMin:h,rightMax:c,leftMin:m,leftMax:u,points:e,topMax:b,topMin:f,bottomMax:y,bottomMin:g,height:v}}function le(e){var i=!1;return"[object Array]"===Object.prototype.toString.call(e)&&Array.prototype.forEach.call(e,function(e,a){t.isNullOrUndefined(e.geometry)||"Path"!==e.geometry.type||(i=!0)}),i}function re(e,t,i){var a=t,o=S(t,i).width;if(o>e)for(var n=t.length-1;n>=0;--n)if(a=t.substring(0,n)+"...",(o=S(a,i).width)<=e||a.length<4)return a.length<4&&(a=" "),a;return a}function se(e,t,i,a){var o,n;switch(t){case"Near":o=e.x;break;case"Center":o="title"===a?e.width/2-i.width/2:e.x+e.width/2-i.width/2;break;case"Far":o="title"===a?e.width-e.y-i.width:e.x+e.width-i.width}return n="title"===a?e.y+i.height/2:e.y+e.height/2+i.height/2,new et(o,n)}function de(e){var i=document.getElementById(e);return i?t.remove(i):null}function pe(e,t){var i=h(e.minLatOfGivenLocation,e.minLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),a=h(e.maxLatOfGivenLocation,e.maxLongOfGivenLocation,e.mapLayerPanel.calculateFactor(t),t,e),o=(i.x+a.x)/2,n=(i.y+a.y)/2;return new et(o,n)}function he(e,i,a){var o,n=e.zoomSettings.zoomFactor,l=e.centerPosition,r=l.latitude,s=l.longitude,d=!t.isNullOrUndefined(e.centerLatOfGivenLocation)&&!t.isNullOrUndefined(e.centerLongOfGivenLocation)&&e.zoomNotApplied;t.isNullOrUndefined(e.mapScaleValue)&&(e.mapScaleValue=n),e.zoomSettings.shouldZoomInitially&&e.zoomSettings.enable&&(e.mapScaleValue=o=n=(e.zoomSettings.shouldZoomInitially||e.enablePersistence)&&1==e.scale?e.scale:t.isNullOrUndefined(e.markerZoomFactor)?1:e.markerZoomFactor,e.mapScaleValue===e.markerZoomFactor||e.enablePersistence||(e.mapScaleValue=n=e.markerZoomFactor),t.isNullOrUndefined(e.markerCenterLatitude)||t.isNullOrUndefined(e.markerCenterLongitude)||(r=e.markerCenterLatitude,s=e.markerCenterLongitude)),d&&(e.mapScaleValue=o=n=e.scaleOfGivenLocation);var p=e.baseMapRectBounds.min,c=e.baseMapRectBounds.max,m=a?1:e.mapScaleValue;t.isNullOrUndefined(e.currentShapeDataLength)&&(e.currentShapeDataLength=t.isNullOrUndefined(i.shapeData.features)?i.shapeData.geometries.length:i.shapeData.features.length);var u,g,y=e.totalRect&&e.legendSettings.visible?e.totalRect:e.mapAreaRect,f=e.availableSize,b=Math.abs(c.x-p.x),v=Math.abs(p.y-c.y),x=a?1:1===e.markerZoomFactor?e.mapScaleValue:n;if(l=e.zoomSettings.shouldZoomInitially&&e.markerZoomedState&&!e.zoomPersistence?e.markerZoomCenterPoint:e.centerPosition,!t.isNullOrUndefined(s)&&!t.isNullOrUndefined(r)||d){var S=((b+Math.abs(e.mapAreaRect.width-b))/2+e.mapAreaRect.x)/x,O=((v+Math.abs(e.mapAreaRect.height-v))/2+e.mapAreaRect.y)/x,_=d?pe(e,i):h(r,s,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType?(u=-_.x+S,g=-_.y+O,o=m):(1!==Math.floor(e.scale)&&e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(u=-_.x+S,g=-_.y+O):e.zoomSettings.shouldZoomInitially||e.zoomNotApplied?(u=-_.x+S,g=-_.y+O,o=m):(u=e.zoomTranslatePoint.x,g=e.zoomTranslatePoint.y),o=e.mapScaleValue)}else if(t.isNullOrUndefined(e.previousProjection)||e.previousProjection!==e.projectionType){b*=o=parseFloat(Math.min(y.width/b,y.height/v).toFixed(2)),v*=o;var M=0!==p.x&&"layers"===e.translateType?f.width-y.width:0;u=y.x+(-p.x+(y.width/2-b/2))-M,g=y.y+(-p.y+(y.height/2-v/2)),e.previousTranslate=new et(u,g)}else if(e.zoomSettings.shouldZoomInitially||1!==e.markerZoomFactor||1!==e.mapScaleValue)if(o=e.mapScaleValue<1?e.mapScaleValue+1:e.mapScaleValue,e.mapScaleValue=e.zoomSettings.enable&&1!==e.mapScaleValue?e.mapScaleValue:1,e.currentShapeDataLength!==(t.isNullOrUndefined(i.shapeData.features)?i.shapeData.geometries.length:i.shapeData.features.length)&&"SubLayer"!==i.type){var L=parseFloat(Math.min(y.height/v,y.width/b).toFixed(2));v*=L,b*=L,g=y.y+(-p.y+(y.height/2-v/2)),o=L,u=y.x+(-p.x+(y.width/2-b/2))}else if(e.availableSize.height!==e.heightBeforeRefresh||e.widthBeforeRefresh!==e.availableSize.width){var C=parseFloat(Math.min(y.width/b,y.height/v).toFixed(2)),P=b;P*=C;var w=v;w*=C;var I=y.x+(-p.x+(y.width/2-P/2)),T=y.y+(-p.y+(y.height/2-w/2)),k=(e.translatePoint.x-e.previousTranslate.x)/e.widthBeforeRefresh,N=(e.translatePoint.y-e.previousTranslate.y)/e.heightBeforeRefresh;u=I+k*e.availableSize.width,g=T+N*e.availableSize.height,e.previousTranslate=new et(I,T),e.zoomTranslatePoint.x=u,e.zoomTranslatePoint.y=g}else t.isNullOrUndefined(e.previousProjection)||1!==e.mapScaleValue||e.zoomModule.isDragZoom?(u=e.zoomTranslatePoint.x,g=e.zoomTranslatePoint.y,o=e.scale):(b*=o=parseFloat(Math.min(y.width/b,y.height/v).toFixed(2)),u=y.x+(-p.x+(y.width/2-b/2)),v*=o,g=y.y+(-p.y+(y.height/2-v/2)));else v*=o=parseFloat(Math.min(y.width/b,y.height/v).toFixed(2)),b*=o,g=y.y+(-p.y+(y.height/2-v/2)),u=y.x+(-p.x+(y.width/2-b/2));return t.isNullOrUndefined(e.translatePoint)||(u=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:u,g=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:g),o=e.enablePersistence?e.mapScaleValue>=1?e.mapScaleValue:1:o,e.widthBeforeRefresh=e.availableSize.width,e.heightBeforeRefresh=e.availableSize.height,{scale:o,location:new et(u,g)}}function ce(e,i,a){var o,n=e.zoomSettings.zoomFactor,l=e.centerPosition,r=l.latitude,s=l.longitude,d=!t.isNullOrUndefined(e.centerLongOfGivenLocation)&&!t.isNullOrUndefined(e.centerLatOfGivenLocation)&&e.zoomNotApplied;t.isNullOrUndefined(e.previousCenterLatitude)&&t.isNullOrUndefined(e.previousCenterLongitude)?(e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.previousCenterLatitude!==e.centerPosition.latitude&&e.previousCenterLongitude!==e.centerPosition.longitude?(e.centerPositionChanged=!0,e.previousCenterLatitude=e.centerPosition.latitude,e.previousCenterLongitude=e.centerPosition.longitude):e.centerPositionChanged=!1,(t.isNullOrUndefined(e.mapScaleValue)||n>e.mapScaleValue)&&(e.isReset&&1===e.mapScaleValue?e.mapScaleValue=e.mapScaleValue:e.mapScaleValue=n),e.mapScaleValue=1!==e.zoomSettings.zoomFactor&&e.zoomSettings.zoomFactor===e.mapScaleValue?e.zoomSettings.zoomFactor:e.zoomSettings.zoomFactor===e.mapScaleValue||e.centerPositionChanged?e.zoomSettings.zoomFactor:e.mapScaleValue,e.zoomSettings.shouldZoomInitially&&(e.mapScaleValue=n=o=(e.enablePersistence||e.zoomSettings.shouldZoomInitially)&&1==e.scale?e.scale:t.isNullOrUndefined(e.markerZoomFactor)?e.mapScaleValue:e.markerZoomFactor,n=e.mapScaleValue,t.isNullOrUndefined(e.markerCenterLatitude)||t.isNullOrUndefined(e.markerCenterLongitude)||(r=e.markerCenterLatitude,s=e.markerCenterLongitude)),d&&(e.mapScaleValue=o=n=e.scaleOfGivenLocation);var p,c,m=a?1:e.mapScaleValue,u=e.mapAreaRect,g=e.baseMapRectBounds.min,y=e.baseMapRectBounds.max,f=a?1:e.mapScaleValue,b=Math.abs(y.x-g.x),v=Math.abs(g.y-y.y);if(!t.isNullOrUndefined(s)&&!t.isNullOrUndefined(r)||d){var x=(v+Math.abs(e.mapAreaRect.height-v))/2/f,S=(b+Math.abs(e.mapAreaRect.width-b))/2/f,O=d?pe(e,i):h(r,s,e.mapLayerPanel.calculateFactor(i),i,e);t.isNullOrUndefined(e.zoomTranslatePoint)&&t.isNullOrUndefined(e.previousProjection)||e.zoomNotApplied?(p=-O.x+S+e.mapAreaRect.x/m,c=-O.y+x+e.mapAreaRect.y/m):e.previousProjection!==e.projectionType?(p=-O.x+S,c=-O.y+x):(p=e.zoomTranslatePoint.x,c=e.zoomTranslatePoint.y,n=m),t.isNullOrUndefined(e.translatePoint)||(c=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:c,p=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:p),o=0!==n?n:1}else{var _=0===e.zoomSettings.zoomFactor?1:e.zoomSettings.zoomFactor;o=_=_>10?10:_;var M=0===e.mapScaleValue?1:e.mapScaleValue>10?10:e.mapScaleValue,S=u.x+(-g.x+(u.width/2-b/2)),x=u.y+(-g.y+(u.height/2-v/2));if(!t.isNullOrUndefined(e.zoomTranslatePoint)||!t.isNullOrUndefined(e.previousProjection))if(e.previousProjection!==e.projectionType){var L=[],C={x:S,y:x};L.push(C);for(var P=1;P<10;P++)C={x:L[P-1].x-(u.width/P-u.width/(P+1))/2,y:L[P-1].y-(u.height/P-u.height/(P+1))/2},L.push(C);S=L[_-1].x,x=L[_-1].y}else S=e.zoomTranslatePoint.x,x=e.zoomTranslatePoint.y,_!==M&&(o=M);t.isNullOrUndefined(e.translatePoint)||(p=e.enablePersistence&&0!=e.translatePoint.x&&!e.zoomNotApplied?e.translatePoint.x:S,c=e.enablePersistence&&0!=e.translatePoint.y&&!e.zoomNotApplied?e.translatePoint.y:x)}return o=e.enablePersistence?0==e.mapScaleValue?1:e.mapScaleValue:o,{scale:a?1:o,location:new et(p,c)}}function me(e){e.tileZoomScale=e.tileZoomLevel=Math.floor(e.availableSize.height/512)+1;var t="GoogleStaticMap"!==e.layers[e.baseLayerIndex].layerType?20:0,i=256*Math.pow(2,e.tileZoomLevel);e.tileTranslatePoint.x=e.availableSize.width/2-i/2,e.tileTranslatePoint.y=e.availableSize.height/2-i/2+t,e.previousTileWidth=e.availableSize.width,e.previousTileHeight=e.availableSize.height}function ue(e){return document.getElementById(e)}function ge(e,t){return e.formatFunction=e.intl.getNumberFormat({format:e.format,useGrouping:e.useGroupingSeparator}),e.formatFunction(t)}function ye(e){var i=null;try{document.querySelectorAll(e).length&&(i=t.compile(document.querySelector(e).innerHTML.trim()))}catch(a){i=t.compile(e)}return i}function fe(e){return document.getElementById(e)}function be(e,t){var i,a=parseInt(e.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),n=t.layersCollection[a],l=n.layerData[o].property;return n.dataSource&&(i=n.dataSource[te(n.dataSource,l,n.shapeDataPath,n.shapePropertyPath,n)]),{shapeData:l,data:i}}function ve(e,t,i,a){var o=be(e,i),n=t.enableMultiSelect?{cancel:!1,name:a,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:o.shapeData,data:o.data,target:e,maps:i,shapeDataCollection:i.shapeSelectionItem}:{cancel:!1,name:a,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:o.shapeData,data:o.data,target:e,maps:i};if(i.isBlazor){n.maps,n.shapeData;n=Ke(n,["maps","shapeData"])}return i.trigger(a,n),n}function xe(e){return document.getElementsByClassName(e)}function Se(e,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+e)),i}function Oe(e,t,i,a){for(var o,n=a.layers[e].shapeData.features,l=0;l<n.length;l++)if(n[l].properties.name===t){o=a.element.id+"_LayerIndex_"+e+"_shapeIndex_"+l+"_dataIndex_undefined";break}return fe(o)}function _e(e,i,a){return t.createElement("style",{id:e,innerHTML:"."+i+"{fill:"+a.fill+";opacity:"+a.opacity.toString()+";stroke-width:"+a.border.width.toString()+";stroke:"+a.border.color+";}"})}function Me(e,t,i){fe(e).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function Le(e,t,i,a,o){var n={color:e.border.color,width:e.border.width/t.scale},l={opacity:e.opacity,fill:e.fill,border:n,name:ri,target:i.id,cancel:!1,shapeData:a,data:o,maps:t};t.trigger("itemSelection",l,function(e){t.shapeSelectionItem.push(l.shapeData),fe("ShapeselectionMap")?Me("ShapeselectionMap","ShapeselectionMapStyle",l):document.body.appendChild(_e("ShapeselectionMap","ShapeselectionMapStyle",l))})}function Ce(e){e.removeAttribute("class")}function Pe(e,i,a,o,n,l,r){void 0===r&&(r=0);var s=o.x,d=o.y,p=0,h=e.getAttribute("transform")||"";new t.Animation({}).animate(e,{duration:a,delay:i,progress:function(t){t.timeStamp>t.delay&&(p=(t.timeStamp-t.delay)/t.duration,e.setAttribute("transform","translate( "+(s-r*p)+" "+(d-r*p)+" ) scale("+p+")"))},end:function(t){if(e.setAttribute("transform",h),l){var i={cancel:!1,name:li,element:l,maps:n.isBlazor?null:n};n.trigger(li,i)}}})}function we(e){de(e)}function Ie(e,i,a,o,n,l,r,d,p){var h=s(a,o,d);t.isNullOrUndefined(h)||(a=h.x,o=h.y);for(var c=document.getElementById(r),m=S(e,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,u=e.split(" "),g=u[0].length,y=1;y<u.length;y++)g<u[y].length&&(g=u[y].length);c||(c=t.createElement("div",{id:r,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'})),a<n-m?a=a:a>n-m&&a<n-8*g?m=n-a:a>=n-8*g&&(a>m?a-=m:(m=a,a=0));var f=i.split("px");Te(c,e,a,o,f,m,n,d),c.clientHeight+2*parseInt(f[0],10)>l&&(m=a,a=0),Te(c,e,a,o,f,m,n,d),p&&setTimeout(we,5e3,r)}function Te(e,t,i,a,o,n,l,r){e.innerHTML=t,e.style.top=-1!==e.id.indexOf("_Legend")?(parseInt(o[0],10)+a).toString()+"px":(2*parseInt(o[0],10)).toString()+"px",e.style.left=i.toString()+"px",e.style.width=n.toString()+"px",e.style.maxWidth=l.toString()+"px",e.style.wordWrap="break-word",r.appendChild(e)}function ke(e,i,a,o,n){var l=fe(e),r="top:"+a.toString()+"px;left:"+o.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+n+";border-radius:2px;";l?(l.setAttribute("innerHTML","&nbsp;"+i+"&nbsp;"),l.setAttribute("styles",r)):(l=t.createElement("div",{id:e,innerHTML:"&nbsp;"+i+"&nbsp;",styles:r}),document.body.appendChild(l))}function Ne(e,t,a,o,n){var l=new i.SvgRenderer(""),r=Ee(e,a,t,n,o);return l["draw"+r.functionName](r.renderOption)}function Ee(e,i,a,o,n){var l,r="Path",s=i.width,d=i.height,p=e.x,h=e.y,c=e.x+-s/2,m=e.y+-d/2;switch(a){case"Circle":case"Bubble":r="Ellipse",t.merge(o,{rx:s/2,ry:d/2,cx:p,cy:h});break;case"VerticalLine":l="M "+p+" "+(h+d/2)+" L "+p+" "+(h+-d/2),t.merge(o,{d:l});break;case"Diamond":l="M "+c+" "+h+" L "+p+" "+(h+-d/2)+" L "+(p+s/2)+" "+h+" L "+p+" "+(h+d/2)+" L "+c+" "+h+" z",t.merge(o,{d:l});break;case"Rectangle":l="M "+c+" "+(h+-d/2)+" L "+(p+s/2)+" "+(h+-d/2)+" L "+(p+s/2)+" "+(h+d/2)+" L "+c+" "+(h+d/2)+" L "+c+" "+(h+-d/2)+" z",t.merge(o,{d:l});break;case"Triangle":l="M "+c+" "+(h+d/2)+" L "+p+" "+(h+-d/2)+" L "+(p+s/2)+" "+(h+d/2)+" L "+c+" "+(h+d/2)+" z",t.merge(o,{d:l});break;case"InvertedTriangle":l="M "+(p+s/2)+" "+(h-d/2)+" L "+p+" "+(h+d/2)+" L "+(p-s/2)+" "+(h-d/2)+" L "+(p+s/2)+" "+(h-d/2)+" z",t.merge(o,{d:l});break;case"Pentagon":for(var u=void 0,g=void 0,y=0;y<=5;y++)u=s/2*Math.cos(Math.PI/180*(72*y)),g=s/2*Math.sin(Math.PI/180*(72*y)),l=0===y?"M "+(p+u)+" "+(h+g)+" ":l.concat("L "+(p+u)+" "+(h+g)+" ");l=l.concat("Z"),t.merge(o,{d:l});break;case"Star":l="M "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" L "+(e.x-i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x+i.width/2)+" "+(e.y+i.height/6)+" L "+(e.x-i.width/3)+" "+(e.y-i.height/2)+" L "+e.x+" "+(e.y+i.height/2)+" L "+(e.x+i.width/3)+" "+(e.y-i.height/2)+" Z",t.merge(o,{d:l});break;case"Cross":l="M "+c+" "+h+" L "+(p+s/2)+" "+h+" M "+p+" "+(h+d/2)+" L "+p+" "+(h+-d/2),t.merge(o,{d:l});break;case"Image":r="Image",t.merge(o,{href:n,height:d,width:s,x:c,y:m})}return{renderOption:o,functionName:r}}function ze(e,t){var i,a;return t.appendChild(e),i=e.offsetWidth,a=e.offsetHeight,t.removeChild(e),new $e(i,a)}function je(e,t,i,a){for(var o,n=0;n<e.childElementCount;n++)if((o=e.childNodes[n]).id.indexOf("_NavigationGroup")>-1)Ae(o,t,i,a);else{var l=a.layersCollection[t].shapeSettings.border.width;o.setAttribute("stroke-width",(l/i).toString())}}function Ae(e,t,i,a){for(var o,n=0;n<e.childElementCount;n++)if("path"===(o=e.childNodes[n]).tagName){var l=a.layersCollection[t].navigationLineSettings[parseFloat(o.id.split("_NavigationIndex_")[1].split("_")[0])].width;o.setAttribute("stroke-width",(l/i).toString())}}function Be(e){for(var t=[],i=e.touches,a=0;a<i.length;a++)t.push({pageX:i[a].pageX,pageY:i[a].pageY});return t}function Fe(e,t){var i=Re(e[0],e[1]);return Re(t[0],t[1])/i}function Re(e,t){var i=e.pageX-t.pageX,a=e.pageY-t.pageY;return Math.sqrt(i*i+a*a)}function Ue(e,t){var i=t.element.getBoundingClientRect(),a=i.top+document.defaultView.pageXOffset,o=i.left+document.defaultView.pageYOffset;return Array.prototype.slice.call(e).map(function(e){return{x:e.pageX-o,y:e.pageY-a}})}function Ze(e){return{x:e.map(function(e){return e.x}).reduce(De)/e.length,y:e.map(function(e){return e.y}).reduce(De)/e.length}}function De(e,t){return e+t}function Ve(e,t,i,a,o,n,l){var r=0,s=l.previousPoint,d=l.previousScale,p=o-d,h=new ct(0,0),c=1;if(o===d)return void e.setAttribute("transform","scale( "+o+" ) translate( "+a.x+" "+a.y+" )");var m=function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)}(s,a),u=function(e,t){return null===t?e.x:e.y-t*e.x}(s,m),g=a.x-s.x,y=a.y-s.y;He(e,t,i,function(e){e.timeStamp>e.delay&&(r=(e.timeStamp-e.delay)/e.duration,c=d+r*p,h.x=s.x+r*g/(c/o),h.y=null==m?s.y+r*y:m*h.x+u,e.element.setAttribute("transform","scale( "+c+" ) translate( "+h.x+" "+h.y+" )"),l.translatePoint=h,l.scale=c,l.zoomModule.processTemplate(a.x,a.y,c,l))},function(){l.translatePoint=a,l.scale=o,e.setAttribute("transform","scale( "+o+" ) translate( "+a.x+" "+a.y+" )"),l.zoomModule.processTemplate(a.x,a.y,o,l)})}function He(e,t,i,a,o){var n,l=this,r=null,s=function(t){r||(r=t);var d=t-r;d<i?(a.call(l,{element:e,delay:0,timeStamp:d,duration:i}),window.requestAnimationFrame(s)):(window.cancelAnimationFrame(n),o.call(l,{element:e}),e.setAttribute("style","visibility:visible"))};n=window.requestAnimationFrame(s)}function Ge(e,t,i,a){var o=0,n=e.getAttribute("transform").split(" ");2===n.length&&(n[2]=n[1].split(")")[0],n[1]=n[0].split("(")[1]);var l=new ct(parseInt(n[1],10),parseInt(n[2],10)),r=a.x-l.x,s=a.y-l.y,d=new ct(0,0);He(e,t,i,function(e){e.timeStamp>e.delay&&(o=(e.timeStamp-e.delay)/e.duration,d.x=l.x+o*r,d.y=l.y+o*s,e.element.setAttribute("transform","translate( "+d.x+" "+d.y+" )"))},function(){e.setAttribute("transform","translate( "+a.x+" "+a.y+" )")})}function We(e,i){var a=t.isNullOrUndefined(i.shouldZoomPreviousFactor)?null:i.shouldZoomPreviousFactor,o=t.isNullOrUndefined(i.shouldZoomCurrentFactor)?null:i.shouldZoomCurrentFactor;t.isNullOrUndefined(o)?!t.isNullOrUndefined(a)&&t.isNullOrUndefined(o)&&i.shouldZoomPreviousFactor!==e?i.shouldZoomCurrentFactor=e:i.shouldZoomPreviousFactor=e:(i.shouldZoomCurrentFactor=null,i.shouldZoomPreviousFactor=null)}function qe(e,t,i,a,o,n,l){var r,s,d,p,c,m,u,g=Math.sin(t*Math.PI/180),y=Math.log((1+g)/(1-g))/2,f=Math.max(Math.min(y,Math.PI),-Math.PI)/2,b=Math.sin(e*Math.PI/180),v=Math.log((1+b)/(1-b))/2,x=Math.max(Math.min(v,Math.PI),-Math.PI)/2;if(l.zoomNotApplied&&!l.isTileMap){var S=Math.abs((l.baseMapBounds.latitude.max-l.baseMapBounds.latitude.min)/(t-e)),O=Math.abs((l.baseMapBounds.longitude.max-l.baseMapBounds.longitude.min)/(a-i));p=Math.min(S,O);h(e,i,1,l.layersCollection[0],l),h(t,a,1,l.layersCollection[0],l)}r=(f-x)/Math.PI;var _=a-i;s=(_<0?_+360:_)/360;return c=Math.log(n/256/r)/Math.LN2,m=Math.log(o/256/s)/Math.LN2,u=l.zoomNotApplied&&!l.isTileMap?p:Math.min(c,m),d=Math.min(u,10),d=l.isTileMap||!l.zoomNotApplied?Math.floor(d):d,l.isTileMap||We(d,l),d}function Xe(e){var i,a=t.isNullOrUndefined(e.result)?e.actual:e.result;return t.isNullOrUndefined(a.length)?t.isNullOrUndefined(a.Items)||(i=a.Items):i=a,i}function Ye(e){var t,i;switch(e.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(e.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}var Je,Qe=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),Ke=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},$e=function(){function e(e,t){this.width=e,this.height=t}return e}(),et=function(){function e(e,t){this.x=e,this.y=t}return e}(),tt=function(){function e(e,t){this.min=e,this.max=t}return e}(),it=function(){function e(e,t){this.latitude=new tt(e.min,e.max),this.longitude=new tt(t.min,t.max)}return e}(),at=function(){function e(e,t,i,a,o,n,l){void 0===n&&(n=""),this.transform="",this.baseLine="auto",this.id=e,this.text=o,this.transform=n,this.anchor=a,this.x=t,this.y=i,this.baseLine=l}return e}(),ot=function(){function e(e,t,i,a,o,n,l){this.id=e,this.opacity=o,this.fill=t,this.stroke=a,this["stroke-width"]=i,this["stroke-dasharray"]=n,this.d=l}return e}(),nt=function(){function e(e,t,i){this.r=e,this.g=t,this.b=i}return e}(),lt=function(e){function t(t,i,a,o,n,l,r,s,d){var p=e.call(this,t,i,a.width,a.color,o,d)||this;return p.y=n.y,p.x=n.x,p.height=n.height,p.width=n.width,p.rx=l||0,p.ry=r||0,p.transform=s||"",p["stroke-dasharray"]=d,p}return Qe(t,e),t}(ot),rt=function(e){function t(t,i,a,o,n,l,r,s){var d=e.call(this,t,i,a.width,a.color,o)||this;return d.cy=l,d.cx=n,d.r=r,d["stroke-dasharray"]=s,d}return Qe(t,e),t}(ot),st=function(e){function t(t,i,a,o,n,l,r){void 0===l&&(l=1),void 0===r&&(r="");var s=e.call(this,t,a,o,n,l,r)||this;return s.points=i,s}return Qe(t,e),t}(ot),dt=function(e){function t(t,i,a,o,n,l,r){return void 0===l&&(l=1),void 0===r&&(r=""),e.call(this,t,i,a,o,n,l,r)||this}return Qe(t,e),t}(st),pt=function(e){function t(t,i,a,o,n,l,r){void 0===l&&(l=1),void 0===r&&(r="");var s=e.call(this,t,a,o,n,l,r)||this;return s.x1=i.x1,s.y1=i.y1,s.x2=i.x2,s.y2=i.y2,s}return Qe(t,e),t}(ot),ht=function(){function e(e,t,i,a){this.x1=e,this.y1=t,this.x2=i,this.y2=a}return e}(),ct=function(){function e(e,t){this.x=e,this.y=t}return e}(),mt=function(){function e(e,t,i,a){this.x=e,this.y=t,this.width=i,this.height=a}return e}(),ut=function(){function e(e,t,i,a,o,n,l,r,s){void 0===n&&(n="userSpaceOnUse"),void 0===l&&(l="userSpaceOnUse"),void 0===r&&(r=""),void 0===s&&(s=""),this.id=e,this.x=t,this.y=i,this.width=a,this.height=o,this.patternUnits=n,this.patternContentUnits=l,this.patternTransform=r,this.href=s}return e}(),gt=function(){function e(e,t,i,a,o){this.dataOptions=e,this.type=t||"GET",this.async=i||!0,this.contentType=a,this.sendData=o}return e}();!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(Je||(Je={}));var yt;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(yt||(yt={}));var ft;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(ft||(ft={}));var bt;!function(e){e.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"},e.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(bt||(bt={}));var vt;!function(e){e.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"},e.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"},e.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"},e.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"},e.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}(vt||(vt={}));var xt=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),St=function(e,t,i,a){var o,n=arguments.length,l=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(l=(n<3?o(l):n>3?o(t,i,l):o(t,i))||l);return n>3&&l&&Object.defineProperty(t,i,l),l},Ot=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("")],i.prototype,"content",void 0),St([t.Property("0px")],i.prototype,"x",void 0),St([t.Property("0px")],i.prototype,"y",void 0),St([t.Property("None")],i.prototype,"verticalAlignment",void 0),St([t.Property("None")],i.prototype,"horizontalAlignment",void 0),St([t.Property("-1")],i.prototype,"zIndex",void 0),i}(t.ChildProperty),_t=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("Start")],i.prototype,"position",void 0),St([t.Property("false")],i.prototype,"showArrow",void 0),St([t.Property(2)],i.prototype,"size",void 0),St([t.Property("black")],i.prototype,"color",void 0),St([t.Property(0)],i.prototype,"offSet",void 0),i}(t.ChildProperty),Mt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("12px")],i.prototype,"size",void 0),St([t.Property(null)],i.prototype,"color",void 0),St([t.Property("Roboto, Noto, Sans-serif")],i.prototype,"fontFamily",void 0),St([t.Property("Medium")],i.prototype,"fontWeight",void 0),St([t.Property("Medium")],i.prototype,"fontStyle",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),Lt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("")],i.prototype,"color",void 0),St([t.Property(0)],i.prototype,"width",void 0),i}(t.ChildProperty),Ct=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"latitude",void 0),St([t.Property(null)],i.prototype,"longitude",void 0),i}(t.ChildProperty),Pt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Property("")],i.prototype,"template",void 0),St([t.Property("")],i.prototype,"fill",void 0),St([t.Complex({color:"transparent",width:1},Lt)],i.prototype,"border",void 0),St([t.Complex(Je.tooltipLabelFont,Mt)],i.prototype,"textStyle",void 0),St([t.Property(null)],i.prototype,"format",void 0),St([t.Property(null)],i.prototype,"valuePath",void 0),i}(t.ChildProperty),wt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(10)],i.prototype,"left",void 0),St([t.Property(10)],i.prototype,"right",void 0),St([t.Property(10)],i.prototype,"top",void 0),St([t.Property(10)],i.prototype,"bottom",void 0),i}(t.ChildProperty),It=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("#000000")],i.prototype,"color",void 0),St([t.Property(1)],i.prototype,"width",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),i}(t.ChildProperty),Tt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"allowClustering",void 0),St([t.Complex({color:"transparent",width:1},Lt)],i.prototype,"border",void 0),St([t.Property("#D2691E")],i.prototype,"fill",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property("Rectangle")],i.prototype,"shape",void 0),St([t.Property(12)],i.prototype,"width",void 0),St([t.Property(12)],i.prototype,"height",void 0),St([t.Property(new et(0,0))],i.prototype,"offset",void 0),St([t.Property("")],i.prototype,"imageUrl",void 0),St([t.Property("")],i.prototype,"dashArray",void 0),St([t.Complex({},Mt)],i.prototype,"labelStyle",void 0),St([t.Property(!1)],i.prototype,"allowClusterExpand",void 0),St([t.Complex({},It)],i.prototype,"connectorLineSettings",void 0),i}(t.ChildProperty),kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xt(t,e),t}(t.ChildProperty),Nt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"from",void 0),St([t.Property(null)],i.prototype,"to",void 0),St([t.Property(null)],i.prototype,"value",void 0),St([t.Property(null)],i.prototype,"color",void 0),St([t.Property(null)],i.prototype,"minOpacity",void 0),St([t.Property(null)],i.prototype,"maxOpacity",void 0),St([t.Property(null)],i.prototype,"label",void 0),St([t.Property(!0)],i.prototype,"showLegend",void 0),i}(t.ChildProperty),Et=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"latitude",void 0),St([t.Property(null)],i.prototype,"longitude",void 0),i}(t.ChildProperty),zt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"shapePath",void 0),St([t.Property(null)],i.prototype,"shapeValue",void 0),i}(t.ChildProperty),jt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"enable",void 0),St([t.Property(null)],i.prototype,"fill",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property(!1)],i.prototype,"enableMultiSelect",void 0),St([t.Complex({color:"transparent",width:0},Lt)],i.prototype,"border",void 0),i}(t.ChildProperty),At=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"fill",void 0),St([t.Property(!1)],i.prototype,"enable",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Complex({color:"transparent",width:0},Lt)],i.prototype,"border",void 0),i}(t.ChildProperty),Bt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Property(1)],i.prototype,"width",void 0),St([t.Property(null)],i.prototype,"longitude",void 0),St([t.Property(null)],i.prototype,"latitude",void 0),St([t.Property("")],i.prototype,"dashArray",void 0),St([t.Property("black")],i.prototype,"color",void 0),St([t.Property(0)],i.prototype,"angle",void 0),St([t.Complex({showArrow:!1,position:"Start",size:5,color:"black"},_t)],i.prototype,"arrowSettings",void 0),St([t.Complex({},jt)],i.prototype,"selectionSettings",void 0),St([t.Complex({},At)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),Ft=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Complex({},Lt)],i.prototype,"border",void 0),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Property([])],i.prototype,"dataSource",void 0),St([t.Property()],i.prototype,"query",void 0),St([t.Property(1e3)],i.prototype,"animationDuration",void 0),St([t.Property(0)],i.prototype,"animationDelay",void 0),St([t.Property("")],i.prototype,"fill",void 0),St([t.Property(10)],i.prototype,"minRadius",void 0),St([t.Property(20)],i.prototype,"maxRadius",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property(null)],i.prototype,"valuePath",void 0),St([t.Property("Circle")],i.prototype,"bubbleType",void 0),St([t.Property(null)],i.prototype,"colorValuePath",void 0),St([t.Collection([],Nt)],i.prototype,"colorMapping",void 0),St([t.Complex({},Pt)],i.prototype,"tooltipSettings",void 0),St([t.Complex({},jt)],i.prototype,"selectionSettings",void 0),St([t.Complex({},At)],i.prototype,"highlightSettings",void 0),i}(t.ChildProperty),Rt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("")],i.prototype,"text",void 0),St([t.Property("")],i.prototype,"description",void 0),i}(t.ChildProperty),Ut=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Complex({size:Je.mapsSubTitleFont.size},Mt)],i.prototype,"textStyle",void 0),St([t.Property("Center")],i.prototype,"alignment",void 0),i}(Rt),Zt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Complex({size:Je.mapsTitleFont.size},Mt)],i.prototype,"textStyle",void 0),St([t.Property("Center")],i.prototype,"alignment",void 0),St([t.Complex({},Ut)],i.prototype,"subtitleSettings",void 0),i}(Rt),Dt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"enable",void 0),St([t.Property(!0)],i.prototype,"enablePanning",void 0),St([t.Property(!0)],i.prototype,"enableSelectionZooming",void 0),St([t.Property("Horizontal")],i.prototype,"toolBarOrientation",void 0),St([t.Property(null)],i.prototype,"color",void 0),St([t.Property("#e61576")],i.prototype,"highlightColor",void 0),St([t.Property("#e61576")],i.prototype,"selectionColor",void 0),St([t.Property("Far")],i.prototype,"horizontalAlignment",void 0),St([t.Property("Near")],i.prototype,"verticalAlignment",void 0),St([t.Property(["ZoomIn","ZoomOut","Reset"])],i.prototype,"toolbars",void 0),St([t.Property(!0)],i.prototype,"mouseWheelZoom",void 0),St([t.Property(!1)],i.prototype,"doubleClickZoom",void 0),St([t.Property(!1)],i.prototype,"pinchZooming",void 0),St([t.Property(!1)],i.prototype,"zoomOnClick",void 0),St([t.Property(1)],i.prototype,"zoomFactor",void 0),St([t.Property(10)],i.prototype,"maxZoom",void 0),St([t.Property(1)],i.prototype,"minZoom",void 0),St([t.Property(!1)],i.prototype,"shouldZoomInitially",void 0),St([t.Property(!0)],i.prototype,"resetToInitial",void 0),i}(t.ChildProperty),Vt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"enable",void 0),St([t.Property(!0)],i.prototype,"applyShapeSettings",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property("")],i.prototype,"fill",void 0),St([t.Complex({color:"",width:0},Lt)],i.prototype,"border",void 0),i}(t.ChildProperty),Ht=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"toggleVisibility",void 0),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Property("transparent")],i.prototype,"background",void 0),St([t.Property("Layers")],i.prototype,"type",void 0),St([t.Property(!1)],i.prototype,"invertedPointer",void 0),St([t.Property("After")],i.prototype,"labelPosition",void 0),St([t.Property("None")],i.prototype,"labelDisplayMode",void 0),St([t.Property("Circle")],i.prototype,"shape",void 0),St([t.Property("")],i.prototype,"width",void 0),St([t.Property("")],i.prototype,"height",void 0),St([t.Complex({},Mt)],i.prototype,"textStyle",void 0),St([t.Property(15)],i.prototype,"shapeWidth",void 0),St([t.Property(15)],i.prototype,"shapeHeight",void 0),St([t.Property(10)],i.prototype,"shapePadding",void 0),St([t.Complex({color:"#000000",width:0},Lt)],i.prototype,"border",void 0),St([t.Complex({color:"#000000",width:0},Lt)],i.prototype,"shapeBorder",void 0),St([t.Complex({},Rt)],i.prototype,"title",void 0),St([t.Complex({},Mt)],i.prototype,"titleStyle",void 0),St([t.Property("Bottom")],i.prototype,"position",void 0),St([t.Property("Center")],i.prototype,"alignment",void 0),St([t.Property("None")],i.prototype,"orientation",void 0),St([t.Property({x:0,y:0})],i.prototype,"location",void 0),St([t.Property(null)],i.prototype,"fill",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property("Default")],i.prototype,"mode",void 0),St([t.Property(null)],i.prototype,"showLegendPath",void 0),St([t.Property(null)],i.prototype,"valuePath",void 0),St([t.Property(!1)],i.prototype,"removeDuplicateLegend",void 0),St([t.Complex({},Vt)],i.prototype,"toggleLegendSettings",void 0),i}(t.ChildProperty),Gt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Complex({width:0,color:"transparent"},Lt)],i.prototype,"border",void 0),St([t.Property("black")],i.prototype,"fill",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property(5)],i.prototype,"rx",void 0),St([t.Property(5)],i.prototype,"ry",void 0),St([t.Complex({},Mt)],i.prototype,"textStyle",void 0),St([t.Property("")],i.prototype,"labelPath",void 0),St([t.Property("None")],i.prototype,"smartLabelMode",void 0),St([t.Property("None")],i.prototype,"intersectionAction",void 0),St([t.Property("")],i.prototype,"template",void 0),i}(t.ChildProperty),Wt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property("#A6A6A6")],i.prototype,"fill",void 0),St([t.Property([])],i.prototype,"palette",void 0),St([t.Property(5)],i.prototype,"circleRadius",void 0),St([t.Complex({width:0,color:"#000000"},Lt)],i.prototype,"border",void 0),St([t.Property("")],i.prototype,"dashArray",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property(null)],i.prototype,"colorValuePath",void 0),St([t.Property(null)],i.prototype,"valuePath",void 0),St([t.Collection([],Nt)],i.prototype,"colorMapping",void 0),St([t.Property(!1)],i.prototype,"autofill",void 0),i}(t.ChildProperty),qt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Complex({color:"transparent",width:1},Lt)],i.prototype,"border",void 0),St([t.Property(null)],i.prototype,"dashArray",void 0),St([t.Property(!1)],i.prototype,"visible",void 0),St([t.Property("#FF471A")],i.prototype,"fill",void 0),St([t.Property(10)],i.prototype,"height",void 0),St([t.Property(10)],i.prototype,"width",void 0),St([t.Property(1)],i.prototype,"opacity",void 0),St([t.Property(null)],i.prototype,"colorValuePath",void 0),St([t.Property(null)],i.prototype,"shapeValuePath",void 0),St([t.Property(null)],i.prototype,"imageUrlValuePath",void 0),St([t.Property("Balloon")],i.prototype,"shape",void 0),St([t.Property("")],i.prototype,"legendText",void 0),St([t.Property(new et(0,0))],i.prototype,"offset",void 0),St([t.Property("")],i.prototype,"imageUrl",void 0),St([t.Property(null)],i.prototype,"template",void 0),St([t.Property([])],i.prototype,"dataSource",void 0),St([t.Property()],i.prototype,"query",void 0),St([t.Complex({},Pt)],i.prototype,"tooltipSettings",void 0),St([t.Property(1e3)],i.prototype,"animationDuration",void 0),St([t.Property(0)],i.prototype,"animationDelay",void 0),St([t.Complex({},jt)],i.prototype,"selectionSettings",void 0),St([t.Complex({},At)],i.prototype,"highlightSettings",void 0),St([t.Property(null)],i.prototype,"latitudeValuePath",void 0),St([t.Property(null)],i.prototype,"longitudeValuePath",void 0),St([t.Collection([],Et)],i.prototype,"initialMarkerSelection",void 0),i}(t.ChildProperty),Xt=function(e){function t(t,i,a,o){return e.call(this,t,i,a,o)||this}return xt(t,e),t}(qt),Yt=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return xt(i,e),St([t.Property(null)],i.prototype,"shapeData",void 0),St([t.Property()],i.prototype,"query",void 0),St([t.Complex({},Wt)],i.prototype,"shapeSettings",void 0),St([t.Property([])],i.prototype,"dataSource",void 0),St([t.Property("Layer")],i.prototype,"type",void 0),St([t.Property("Geographic")],i.prototype,"geometryType",void 0),St([t.Property("Aerial")],i.prototype,"bingMapType",void 0),St([t.Property("RoadMap")],i.prototype,"staticMapType",void 0),St([t.Property("")],i.prototype,"key",void 0),St([t.Property("Geometry")],i.prototype,"layerType",void 0),St([t.Property("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],i.prototype,"urlTemplate",void 0),St([t.Property(!0)],i.prototype,"visible",void 0),St([t.Property("name")],i.prototype,"shapeDataPath",void 0),St([t.Property("name")],i.prototype,"shapePropertyPath",void 0),St([t.Property(0)],i.prototype,"animationDuration",void 0),St([t.Collection([],Xt)],i.prototype,"markerSettings",void 0),St([t.Complex({},Tt)],i.prototype,"markerClusterSettings",void 0),St([t.Complex({},Gt)],i.prototype,"dataLabelSettings",void 0),St([t.Collection([],Ft)],i.prototype,"bubbleSettings",void 0),St([t.Collection([],Bt)],i.prototype,"navigationLineSettings",void 0),St([t.Complex({},Pt)],i.prototype,"tooltipSettings",void 0),St([t.Complex({},jt)],i.prototype,"selectionSettings",void 0),St([t.Complex({},At)],i.prototype,"highlightSettings",void 0),St([t.Complex({},Vt)],i.prototype,"toggleLegendSettings",void 0),St([t.Collection([],zt)],i.prototype,"initialShapeSelection",void 0),i}(t.ChildProperty),Jt=function(){function e(e,t,i,a,o,n,l){void 0===i&&(i=256),void 0===a&&(a=256),void 0===o&&(o=0),void 0===n&&(n=0),void 0===l&&(l=null),this.x=e,this.y=t,this.top=o,this.left=n,this.height=i,this.width=a,this.src=l}return e}(),Qt=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return xt(i,e),St([t.Property(null)],i.prototype,"background",void 0),St([t.Complex({color:"transparent",width:1},Lt)],i.prototype,"border",void 0),i}(t.ChildProperty),Kt=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},$t=function(){function e(e){this.maps=e,this.trackElements=[],this.sameMarkerData=[]}return e.prototype.markerRender=function(e,i,a,o){var n=this,l=0,r=0,s=0;this.maps.translateType="marker";var d=this.maps.layersCollection[i];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"});var p=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+i+"_Markers_Template_Group",className:this.maps.element.id+"_template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+this.maps.mapAreaRect.y+"px;left:"+this.maps.mapAreaRect.x+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});d.markerSettings.map(function(m,u){var g=m.dataSource;Array.prototype.forEach.call(g,function(y,f){n.maps.markerNullCount=u>0&&0===f?0:n.maps.markerNullCount;var b={cancel:!1,name:ei,fill:m.fill,height:m.height,width:m.width,imageUrl:m.imageUrl,shape:m.shape,template:m.template,data:y,maps:n.maps,marker:m,border:m.border,colorValuePath:m.colorValuePath,shapeValuePath:m.shapeValuePath,imageUrlValuePath:m.imageUrlValuePath};if(b=I(b,y),b=T(b,y),n.maps.isBlazor){b.maps,b.marker;var v=Kt(b,["maps","marker"]);b=v,m.longitudeValuePath=t.isNullOrUndefined(m.longitudeValuePath)?t.isNullOrUndefined(y.Longitude)?t.isNullOrUndefined(y.longitude)?null:"longitude":"Longitude":m.longitudeValuePath,m.latitudeValuePath=t.isNullOrUndefined(m.latitudeValuePath)?t.isNullOrUndefined(y.Latitude)?t.isNullOrUndefined(y.latitude)?null:"latitude":"Latitude":m.latitudeValuePath}n.maps.trigger("markerRendering",b,function(v){m.colorValuePath!==b.colorValuePath&&(b=I(b,y)),m.shapeValuePath!==b.shapeValuePath&&(b=T(b,y));var x=t.isNullOrUndefined(m.longitudeValuePath)?t.isNullOrUndefined(y.longitude)?t.isNullOrUndefined(y.Longitude)?0:parseFloat(y.Longitude):parseFloat(y.longitude):Number(w(y,m.longitudeValuePath)),S=t.isNullOrUndefined(m.latitudeValuePath)?t.isNullOrUndefined(y.latitude)?t.isNullOrUndefined(y.Latitude)?0:parseFloat(y.Latitude):parseFloat(y.latitude):Number(w(y,m.latitudeValuePath));if(n.maps.isBlazor){for(var O={},_=[],M=0,L=0;L<Object.keys(y).length;L++)"latitude"!==Object.keys(y)[L].toLowerCase()&&"longitude"!==Object.keys(y)[L].toLowerCase()&&"name"!==Object.keys(y)[L].toLowerCase()&&"blazortemplateid"!==Object.keys(y)[L].toLowerCase()&&"text"!==Object.keys(y)[L].toLowerCase()&&(_[M]=y[Object.keys(y)[L].toLowerCase()],O.text=_,M++);y.text=O.text}var C=m.offset;if(!b.cancel&&m.visible&&!t.isNullOrUndefined(x)&&!t.isNullOrUndefined(S)){var P=n.maps.element.id+"_LayerIndex_"+i+"_MarkerIndex_"+u+"_dataIndex_"+f,N=n.maps.isTileMap?c(new ct(x,S),a,n.maps.tileTranslatePoint,!0):h(S,x,a,d,n.maps),E=0!==d.animationDuration||t.isNullOrUndefined(n.maps.zoomModule),A=n.maps.isTileMap?"SubLayer"===d.type&&t.isNullOrUndefined(n.maps.zoomModule)?N=c(new ct(x,S),n.maps.tileZoomLevel,n.maps.tileTranslatePoint,!0):new Object:!t.isNullOrUndefined(n.maps.zoomModule)&&n.maps.zoomSettings.zoomFactor>1?ce(n.maps,d,E):he(n.maps,d,E),B="AddMarker"===o?n.maps.scale:A.scale,F="AddMarker"===o?n.maps.translatePoint:A.location;!b.template||isNaN(N.x)||isNaN(N.y)?b.template||isNaN(N.x)||isNaN(N.y)||(l++,z(b,m,g,f,N,F,P,C,B,n.maps,n.markerSVGObject)):(s++,j(b,void 0,P,y,u,p,N,B,C,n.maps))}r+=isNaN(S)||isNaN(x)?1:0,s+=b.cancel?1:0,l+=b.cancel?1:0,n.maps.markerNullCount=t.isNullOrUndefined(x)||t.isNullOrUndefined(S)?n.maps.markerNullCount+1:n.maps.markerNullCount;var R=g.length-n.maps.markerNullCount;n.markerSVGObject.childElementCount===R-s-r&&"Template"!==o&&(e.appendChild(n.markerSVGObject),d.markerClusterSettings.allowClustering&&(n.maps.svgObject.appendChild(n.markerSVGObject),n.maps.element.appendChild(n.maps.svgObject),k(d,n.markerSVGObject,n.maps,i,n.markerSVGObject,e,!0,!1))),p.childElementCount===g.length-l-r&&ue(n.maps.element.id+"_Secondary_Element")&&(ue(n.maps.element.id+"_Secondary_Element").appendChild(p),d.markerClusterSettings.allowClustering&&k(d,p,n.maps,i,n.markerSVGObject,e,!1,!1))})})})},e.prototype.calculateIndividualLayerMarkerZoomLevel=function(e,t,i){var a,o,n,l,r=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),s=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min);return a=Math.floor(Math.log(t/r)),a=a>i?i:a,o=Math.floor(Math.log(e/s)),o=o>i?i:o,n=Math.min(a,o),l=Math.min(n,i-1),this.maps.isTileMap||We(l,this.maps),l},e.prototype.calculateZoomCenterPositionAndFactor=function(e){if(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule){var i,a,o,n,l=void 0,r=void 0,s=void 0,d=this.maps.mapAreaRect.width,p=this.maps.mapAreaRect.height;if(this.maps.markerZoomedState=this.maps.markerZoomedState?this.maps.markerZoomedState:t.isNullOrUndefined(this.maps.markerZoomFactor)?!this.maps.markerZoomedState:this.maps.markerZoomFactor>1?this.maps.markerZoomedState:!this.maps.markerZoomedState,this.maps.defaultState=this.maps.markerZoomedState?!this.maps.markerZoomedState:this.maps.defaultState,Array.prototype.forEach.call(e,function(e,l){0!==e.markerSettings.length&&Array.prototype.forEach.call(e.markerSettings,function(e,l){var r=e.dataSource;Array.prototype.forEach.call(r,function(e,l){var r=t.isNullOrUndefined(e.latitude)?t.isNullOrUndefined(e.Latitude)?null:parseFloat(e.Latitude):parseFloat(e.latitude),s=t.isNullOrUndefined(e.longitude)?t.isNullOrUndefined(e.Longitude)?null:parseFloat(e.Longitude):parseFloat(e.longitude);i=t.isNullOrUndefined(i)&&0===l?s:i,a=t.isNullOrUndefined(a)&&0===l?r:a,o=t.isNullOrUndefined(o)&&0===l?r:o,n=t.isNullOrUndefined(n)&&0===l?s:n,i>s&&(i=s),o>r&&(o=r),n<s&&(n=s),a<r&&(a=r)})})}),!(t.isNullOrUndefined(o)||t.isNullOrUndefined(i)||t.isNullOrUndefined(n)||t.isNullOrUndefined(a))){r=(o+a)/2,s=(i+n)/2,this.maps.markerCenterLatitude=r,this.maps.markerCenterLongitude=s,(t.isNullOrUndefined(this.maps.markerZoomCenterPoint)||this.maps.markerZoomedState)&&(this.maps.markerZoomCenterPoint={latitude:r,longitude:s});var h=void 0;this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(l=qe(o,a,i,n,d,p,this.maps),this.maps.isTileMap?h=t.isNullOrUndefined(this.maps.markerZoomFactor)?l:t.isNullOrUndefined(this.maps.mapScaleValue)?l:this.maps.mapScaleValue>1&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:l:(h=t.isNullOrUndefined(this.maps.mapScaleValue)?l:1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==l&&t.isNullOrUndefined(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:l)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(h=l)):(l=this.calculateIndividualLayerMarkerZoomLevel(d,p,10),h=t.isNullOrUndefined(this.maps.mapScaleValue)?l:this.maps.mapScaleValue!==l?this.maps.mapScaleValue:l),this.maps.markerZoomFactor=h}}else this.maps.markerZoomedState=!1,this.maps.markerZoomFactor>1&&(this.maps.markerCenterLatitude=null,this.maps.markerCenterLongitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?1:this.maps.mapScaleValue,1===this.maps.mapScaleValue&&1===this.maps.markerZoomFactor&&(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))},e.prototype.markerClick=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var a=this.getMarker(i);if(!t.isNullOrUndefined(a)){var o={cancel:!1,name:ii,data:a.data,maps:this.maps,marker:a.marker,target:i,x:e.clientX,y:e.clientY,latitude:a.data.latitude||a.data.Latitude,longitude:a.data.longitude||a.data.Longitude,value:a.data.name};if(this.maps.isBlazor){o.maps,o.marker;o=Kt(o,["maps","marker"])}this.maps.trigger(ii,o)}}},e.prototype.markerClusterClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var a=this.getMarker(i);if(!t.isNullOrUndefined(a)){a.clusterCollection.length>0&&this.maps.markerClusterExpand&&(fe(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&de(this.maps.element.id+"_mapsTooltip"),this.sameMarkerData.length>0&&!this.maps.markerClusterExpandCheck?(this.maps.markerClusterExpandCheck=!0,N(this.sameMarkerData,this.maps,this.markerSVGObject)):(this.sameMarkerData=a.clusterCollection,this.maps.markerClusterExpandCheck=!1,E(this.sameMarkerData,this.maps,this.markerSVGObject,!0)));var o={cancel:!1,name:ai,data:a,maps:this.maps,target:i,x:e.clientX,y:e.clientY,latitude:a.data.latitude||a.data.Latitude,longitude:a.data.longitude||a.data.Longitude,markerClusterCollection:a.markCollection};if(this.maps.isBlazor){o.maps,o.latitude,o.longitude;o=Kt(o,["maps","latitude","longitude"])}this.maps.trigger(ai,o)}}},e.prototype.getMarker=function(e){var t,i,a=e.split("_LayerIndex_"),o=parseInt(a[1].split("_")[0],10),n=this.maps.layers[o],l=[],r=[];if(this.maps.markerClusterExpand=n.markerClusterSettings.allowClusterExpand,e.indexOf("_MarkerIndex_")>-1){var s=parseInt(a[1].split("_MarkerIndex_")[1].split("_")[0],10),d=parseInt(a[1].split("_dataIndex_")[1].split("_")[0],10);if(i=n.markerSettings[s],!isNaN(s)){t=i.dataSource[d];var p=[];if(!i.template&&e.indexOf("_cluster_")>-1&&this.maps.layers[o].markerClusterSettings.allowClusterExpand&&Array.prototype.forEach.call(i.dataSource,function(e,i){e.latitude===t.latitude&&e.longitude===t.longitude&&p.push({data:t,index:i})}),e.indexOf("_cluster_")>-1){var h=document.getElementById(e.indexOf("_datalabel_")>-1?e.split("_datalabel_")[0]:e).innerHTML.split(",").map(Number);p=[];for(var c=0,m=h;c<m.length;c++){var u=m[c];p.push({data:i.dataSource[u],index:u}),this.maps.isBlazor&&(i.dataSource[u].text=""),l.push(i.dataSource[u])}!1,r.push({data:p,layerIndex:o,markerIndex:s,dataIndex:d,targetClusterIndex:+(e.split("_cluster_")[1].indexOf("_datalabel_")>-1?e.split("_cluster_")[1].split("_datalabel_")[0]:e.split("_cluster_")[1]),isClusterSame:!1})}return{marker:i,data:t,clusterCollection:r,markCollection:l}}}return null},e.prototype.markerMove=function(e){var i=e.target.id;if(!(-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0)){var a=this.getMarker(i);if(!t.isNullOrUndefined(a)){var o={cancel:!1,name:oi,data:a.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){o.maps;o=Kt(o,["maps"])}this.maps.trigger(oi,o)}}},e.prototype.markerClusterMouseMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")){var a=this.getMarker(i);if(this.maps.markerClusterExpand&&e.target.setAttribute("style","cursor: pointer"),!t.isNullOrUndefined(a)){var o={cancel:!1,name:ni,data:a.data,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){o.maps;o=Kt(o,["maps"])}this.maps.trigger(ni,o)}}},e.prototype.getModuleName=function(){return"Marker"},e.prototype.destroy=function(e){},e}(),ei="markerRendering",ti="markerClusterRendering",ii="markerClick",ai="markerClusterClick",oi="markerMouseMove",ni="markerClusterMouseMove",li="animationComplete",ri="itemSelection",si=function(){function e(e){this.maps=e}return e.prototype.getBingMap=function(e,t,i,a,o,n){for(var l,r="",s=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));s>0;s--){var d=0,p=1<<s-1;0!=(e.x&p)&&d++,0!=(e.y&p)&&(d+=2),r=r+""+d}return l=n[Math.min(parseInt(r.substr(r.length-1,1),10),n.length)],o=o.replace("{quadkey}",r).replace("{subdomain}",l),o+="&mkt="+a+"&ur=IN&Key="+t},e}(),di=function(){function e(e){this.maps=e}return e.prototype.getShapeColorMapping=function(e,i,a){var o=e.colorValuePath?e.colorValuePath:e.valuePath,n=t.isNullOrUndefined(o)?i[o]:o.indexOf(".")>-1?w(i,o):i[o],l=Number(n),r=this.getColorByValue(e.colorMapping,l,n);return t.isNullOrUndefined(r)?a:r},e.prototype.getColorByValue=function(e,i,a){if(isNaN(i)&&t.isNullOrUndefined(a))return null;for(var o,n="",l=0,r=e;l<r.length;l++){var s=r[l];(!t.isNullOrUndefined(s.from)&&!t.isNullOrUndefined(s.to)&&i>=s.from&&i<=s.to||s.value===a)&&(n="[object Array]"===Object.prototype.toString.call(s.color)?t.isNullOrUndefined(s.value)?this.getColor(s,i):s.color[0]:s.color),(i>=s.from&&i<=s.to||s.value===a)&&!t.isNullOrUndefined(s.minOpacity)&&!t.isNullOrUndefined(s.maxOpacity)&&n&&(o=this.deSaturationColor(s,n,i,a)),(""===n||t.isNullOrUndefined(n))&&t.isNullOrUndefined(s.from)&&t.isNullOrUndefined(s.to)&&t.isNullOrUndefined(s.minOpacity)&&t.isNullOrUndefined(s.maxOpacity)&&t.isNullOrUndefined(s.value)&&(n="[object Array]"===Object.prototype.toString.call(s.color)?s.color[0]:s.color)}return{fill:n||(e.length?null:a),opacity:o}},e.prototype.deSaturationColor=function(e,t,i,a){var o=1;return(i>=e.from&&i<=e.to||e.value===a)&&(o=(isNaN(i)?e.from/(e.to-e.from):(i-e.from)/(e.to-e.from))*(e.maxOpacity-e.minOpacity)+e.minOpacity),o},e.prototype.rgbToHex=function(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},e.prototype.getColor=function(e,t){var i,a="";return Number(t)===e.from?a=e.color[0]:Number(t)===e.to?a=e.color[e.color.length-1]:(i=this.getGradientColor(Number(t),e),a=this.rgbToHex(i.r,i.g,i.b)),a},e.prototype.getGradientColor=function(e,t){var i=t.from,a=t.to,o=0,n=a-i;o=(e-i)/n;var l,r;if(t.color.length<=2)l="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),r="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{l="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),r="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var s=n/(t.color.length-1),d=t.color.length-1,p=[],h={},c=1;c<d;c++)h={b:i+c*s,color:t.color[c]},p.push(h);for(var m=0;m<p.length;m++)i<=e&&e<=p[m].b&&0===m?(r="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),o=e<p[m].b?1-Math.abs((e-p[m].b)/s):(e-p[m].b)/s):p[m].b<=e&&e<=a&&m===p.length-1&&(l="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),o=e<p[m].b?1-Math.abs((e-p[m].b)/s):(e-p[m].b)/s),m!==p.length-1&&m<p.length&&p[m].b<=e&&e<=p[m+1].b&&(l="#"===p[m].color.charAt(0)?p[m].color:this._colorNameToHex(p[m].color),r="#"===p[m+1].color.charAt(0)?p[m+1].color:this._colorNameToHex(p[m+1].color),o=Math.abs(e-p[m+1].b)/s)}return this.getPercentageColor(o,l,r)},e.prototype.getPercentageColor=function(e,t,i){var a=i.split("#")[1],o=t.split("#")[1],n=this.getPercentage(e,parseInt(o.substr(0,2),16),parseInt(a.substr(0,2),16)),l=this.getPercentage(e,parseInt(o.substr(2,2),16),parseInt(a.substr(2,2),16)),r=this.getPercentage(e,parseInt(o.substr(4,2),16),parseInt(a.substr(4,2),16));return new nt(n,l,r)},e.prototype.getPercentage=function(e,t,i){var a=i-t;return Math.round(t+a*e)},e.prototype._colorNameToHex=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(e)?e:void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:e},e}(),pi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},hi=function(){function e(e){this.isMapCoordinates=!0,this.horizontalPan=!1,this.horizontalPanXCount=0,this.mapObject=e,this.ajaxModule=new t.Ajax,this.ajaxResponse=[]}return e.prototype.measureLayerPanel=function(){var e=this,i=this.mapObject.layersCollection,a=this.mapObject.mapAreaRect,o=ue(this.mapObject.element.id+"_Secondary_Element");if(this.mapObject.isTileMap&&o){this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:a.width,height:a.height});var n=t.createElement("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent",styles:"position: absolute; height: "+a.height+"px; width: "+a.width+"px;"});n.appendChild(this.tileSvgObject),o.appendChild(n)}if(this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType){this.clipRectElement=this.mapObject.renderer.drawClipPath(new lt(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:(a.width-640)/2,y:0,width:640,height:a.height}))}else this.clipRectElement=this.mapObject.renderer.drawClipPath(new lt(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:a.x,y:this.mapObject.isTileMap?0:a.y,width:a.width,height:a.height<0?0:a.height}));this.layerGroup.appendChild(this.clipRectElement),this.mapObject.baseMapBounds=null,this.mapObject.baseMapRectBounds=null,this.mapObject.baseSize=null,Array.prototype.forEach.call(i,function(t,i){e.currentLayer=t,e.processLayers(t,i)})},e.prototype.renderTileLayer=function(e,i,a,o){e.currentFactor=e.calculateFactor(i),e.mapObject.defaultState=!(1!==e.mapObject.zoomSettings.zoomFactor&&!t.isNullOrUndefined(e.mapObject.tileZoomLevel)&&1!==e.mapObject.tileZoomLevel),t.isNullOrUndefined(e.mapObject.previousCenterLatitude)&&t.isNullOrUndefined(e.mapObject.previousCenterLongitude)?(e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.previousCenterLatitude!==e.mapObject.centerPosition.latitude&&e.mapObject.previousCenterLongitude!==e.mapObject.centerPosition.longitude?(e.mapObject.centerPositionChanged=!0,e.mapObject.previousCenterLatitude=e.mapObject.centerPosition.latitude,e.mapObject.previousCenterLongitude=e.mapObject.centerPosition.longitude):e.mapObject.centerPositionChanged=!1;var n=new et(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude),l=n;this.mapObject.isTileMap&&e.mapObject.markerModule&&e.mapObject.zoomSettings.enable&&(e.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection),t.isNullOrUndefined(this.mapObject.markerCenterLatitude)||t.isNullOrUndefined(this.mapObject.markerCenterLongitude)||(l=new et(e.mapObject.markerCenterLongitude,e.mapObject.markerCenterLatitude))),n=!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.centerPosition.longitude&&e.mapObject.centerPosition.latitude&&!e.mapObject.zoomPersistence&&e.mapObject.defaultState?new et(e.mapObject.centerPosition.longitude,e.mapObject.centerPosition.latitude):e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.markerZoomedState&&!e.mapObject.zoomPersistence&&!t.isNullOrUndefined(e.mapObject.markerZoomCenterPoint)?new et(e.mapObject.markerZoomCenterPoint.longitude,e.mapObject.markerZoomCenterPoint.latitude):{x:null,y:null};var r=e.mapObject.zoomSettings.shouldZoomInitially?t.isNullOrUndefined(e.mapObject.markerZoomFactor)?1:e.mapObject.markerZoomFactor:e.mapObject.zoomSettings.zoomFactor;if(r=e.mapObject.enablePersistence?t.isNullOrUndefined(e.mapObject.mapScaleValue)?t.isNullOrUndefined(e.mapObject.markerZoomFactor)?e.mapObject.zoomSettings.zoomFactor:e.mapObject.markerZoomFactor:e.mapObject.mapScaleValue:r,r=e.mapObject.zoomSettings.enable?r:e.mapObject.zoomSettings.zoomFactor,t.isNullOrUndefined(e.mapObject.tileZoomLevel)?(e.mapObject.tileZoomLevel=r,e.mapObject.previousZoomFactor=r):this.mapObject.isReset&&1===e.mapObject.tileZoomLevel&&!e.mapObject.zoomSettings.shouldZoomInitially?e.mapObject.tileZoomLevel=e.mapObject.tileZoomLevel:(1!==e.mapObject.zoomSettings.zoomFactor||e.mapObject.zoomSettings.shouldZoomInitially)&&(e.mapObject.tileZoomLevel=e.mapObject.defaultState&&e.mapObject.zoomSettings.enable?e.mapObject.tileZoomLevel:e.mapObject.zoomSettings.shouldZoomInitially||e.mapObject.centerPositionChanged?r:e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor?e.mapObject.zoomSettings.zoomFactor:e.mapObject.tileZoomLevel,!t.isNullOrUndefined(e.mapObject.tileTranslatePoint)&&(e.mapObject.markerZoomFactor!==e.mapObject.mapScaleValue||t.isNullOrUndefined(e.mapObject.markerZoomFactor)&&t.isNullOrUndefined(e.mapObject.mapScaleValue))&&(e.mapObject.zoomSettings.zoomFactor<=1||e.mapObject.previousZoomFactor!==e.mapObject.zoomSettings.zoomFactor)&&(e.mapObject.tileTranslatePoint.x=0,e.mapObject.tileTranslatePoint.y=0)),r<=1&&!t.isNullOrUndefined(e.mapObject.height)&&!e.mapObject.zoomSettings.shouldZoomInitially&&e.mapObject.tileZoomLevel===e.mapObject.tileZoomScale&&this.mapObject.initialCheck&&me(this.mapObject),t.isNullOrUndefined(e.mapObject.centerLatOfGivenLocation)||t.isNullOrUndefined(e.mapObject.centerLongOfGivenLocation)||!e.mapObject.zoomNotApplied||(l.y=e.mapObject.centerLatOfGivenLocation,l.x=e.mapObject.centerLongOfGivenLocation,e.mapObject.tileZoomLevel=e.mapObject.mapScaleValue=e.mapObject.scaleOfGivenLocation),e.mapObject.tileTranslatePoint=e.panTileMap(e.mapObject.availableSize.width,e.mapObject.availableSize.height,l),this.mapObject.zoomSettings.resetToInitial&&this.mapObject.initialCheck&&!t.isNullOrUndefined(e.mapObject.height)&&this.mapObject.availableSize.height>512){this.mapObject.applyZoomReset=!0,this.mapObject.initialZoomLevel=Math.floor(this.mapObject.availableSize.height/512)+1;var s="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?20:0,d=256*Math.pow(2,this.mapObject.initialZoomLevel);this.mapObject.initialTileTranslate.x=this.mapObject.availableSize.width/2-d/2,this.mapObject.initialTileTranslate.y=this.mapObject.availableSize.height/2-d/2+s}e.generateTiles(e.mapObject.tileZoomLevel,e.mapObject.tileTranslatePoint,null,o),t.isNullOrUndefined(e.mapObject.previousZoomFactor)||e.mapObject.previousZoomFactor===e.mapObject.zoomSettings.zoomFactor||(e.mapObject.previousZoomFactor=e.mapObject.zoomSettings.zoomFactor),e.mapObject.navigationLineModule&&e.layerObject.appendChild(e.mapObject.navigationLineModule.renderNavigation(e.currentLayer,e.mapObject.tileZoomLevel,a)),e.mapObject.markerModule&&e.mapObject.markerModule.markerRender(e.layerObject,a,e.mapObject.tileZoomLevel,null),e.translateLayerElements(e.layerObject,a),e.layerGroup.appendChild(e.layerObject)},e.prototype.processLayers=function(e,i){var a=this;if(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+i}),!this.mapObject.enablePersistence){var o=this.mapObject.getModuleName()+this.mapObject.element.id;-1===navigator.userAgent.indexOf("Edge")&&!t.isNullOrUndefined(window.localStorage)&&window.localStorage.getItem(o)&&window.localStorage.removeItem(o)}var n={cancel:!1,name:"layerRendering",index:i,layer:e,maps:this.mapObject,visible:e.visible};if(this.mapObject.isBlazor){n.maps,n.layer;var l=pi(n,["maps","layer"]);n=l}this.mapObject.trigger("layerRendering",n,function(o){if(!n.cancel&&n.visible)if("Geometry"!==e.layerType){if("Bing"!==e.layerType||a.bing)a.renderTileLayer(a,e,i);else if(e.key&&e.key.length>1){var l=a,r=new si(a.mapObject),s="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+("AerialWithLabel"===e.bingMapType?"AerialWithLabelsOnDemand":e.bingMapType),d=new t.Ajax({url:s+"?output=json&include=ImageryProviders&urischeme=https&key="+e.key});d.onSuccess=function(t){var o=JSON.parse(t).resourceSets[0].resources[0],n=o.imageUrl,s=o.imageUrlSubdomains,d=o.zoomMax;null!==n&&void 0!==n&&n!==r.imageUrl&&(r.imageUrl=n),null!==s&&void 0!==s&&s!==r.subDomains&&(r.subDomains=s),null!==d&&void 0!==d&&d!==r.maxZoom&&(r.maxZoom=d),l.mapObject.bingMap=r,l.renderTileLayer(l,e,i,r),a.mapObject.arrangeTemplate()},d.send()}}else if(!(t.isNullOrUndefined(e.shapeData)||t.isNullOrUndefined(e.shapeData.geometries)&&t.isNullOrUndefined(e.shapeData.features))){var p=!t.isNullOrUndefined(e.shapeData.geometries)&&e.shapeData.geometries.length>0?e.shapeData.geometries:e.shapeData.features;e.layerData=[];var h=e.shapeData.bbox;!t.isNullOrUndefined(h)&&e.isBaseLayer?a.mapObject.baseMapBounds=new it({min:h[0][1],max:h[1][1]},{min:h[0][0],max:h[1][0]}):t.isNullOrUndefined(a.mapObject.baseMapBounds)&&!le(p)&&a.calculateRectBounds(p),a.calculatePathCollection(i,p)}}),this.mapObject.isTileMap?this.tileSvgObject&&(this.tileSvgObject.appendChild(this.layerGroup),this.mapObject.baseMapBounds=null):this.mapObject.svgObject.appendChild(this.layerGroup)},e.prototype.bubbleCalculation=function(e,i){if(null!=e.dataSource&&null!=e)for(var a=e.dataSource,o=0;o<a.length;o++){var n=t.isNullOrUndefined(e.valuePath)?parseFloat(e.dataSource[o][e.valuePath]):e.valuePath.indexOf(".")>-1?Number(w(e.dataSource[o],e.valuePath)):parseFloat(e.dataSource[o][e.valuePath]);0!==o?n>i.max?i.max=n:n<i.min&&(i.min=n):i.max=i.min=n}},e.prototype.calculatePathCollection=function(e,i){var a=this;this.groupElements=[],le(i)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null;var o=this.currentLayer.shapeSettings;this.currentLayer.bubbleSettings;Array.prototype.forEach.call(i,function(e,i){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var o=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,n=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates,l=e.geometry,r=e.properties;"LineString"!==o&&a.generatePoints(o,n,l,r)}}),this.currentLayer.rectBounds=this.rectBounds,t.isNullOrUndefined(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds);var n=o.palette.length>1?o.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),l=t.createElement("div",{id:this.mapObject.element.id+"_LayerIndex_"+e+"_Label_Template_Group",className:this.mapObject.element.id+"_template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"});if(0!==this.currentLayer.layerData.length)for(var r=this,s=0;s<this.currentLayer.layerData.length;s++)!function(s){var d,p,h,c,m,u=void 0,g=r.currentLayer.layerData[s],y="",f="",b=void 0,v=o.autofill?n[s%n.length]:o.fill;null===o.colorValuePath||t.isNullOrUndefined(g.property)||(null!==(u=te(r.currentLayer.dataSource,g.property,r.currentLayer.shapeDataPath,r.currentLayer.shapePropertyPath,r.currentLayer))&&0===o.colorMapping.length?v=r.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?w(r.currentLayer.dataSource[u],o.colorValuePath):r.currentLayer.dataSource[u][o.colorValuePath]:g.property[o.colorValuePath]&&0===r.currentLayer.dataSource.length&&0===o.colorMapping.length&&(v=r.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?w(g.property,o.colorValuePath):g.property[o.colorValuePath]),v=t.isNullOrUndefined(v)?o.fill:v);var x=r.mapObject.element.id+"_LayerIndex_"+e+"_shapeIndex_"+s+"_dataIndex_"+u;b=r.getShapeColorMapping(r.currentLayer,g.property,v),v="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.fill)?v:b.fill,m="[object Object]"!==Object.prototype.toString.call(b)||t.isNullOrUndefined(b.opacity)?o.opacity:b.opacity;var S={cancel:!1,name:"shapeRendering",index:s,data:r.currentLayer.dataSource?r.currentLayer.dataSource[u]:null,maps:r.mapObject,shape:o,fill:v,border:{width:o.border.width,color:o.border.color}};if(r.mapObject.isBlazor){S.maps;S=pi(S,["maps"])}var O=function(r){var u=t.isNullOrUndefined(g._isMultiPolygon)?t.isNullOrUndefined(g.type)?g[0].type:g.type:"MultiPolygon";if(u="Polygon"===u||"MultiPolygon"===u?"Polygon":u,r.cancel?(r.fill=v,r.border.color=o.border.color,r.border.width=o.border.width,a.mapObject.layers[e].shapeSettings.border=o.border):(r.fill="#A6A6A6"===r.fill?r.shape.fill:r.fill,r.border.color="#000000"===r.border.color?r.shape.border.color:r.border.color,r.border.width=0===r.border.width?r.shape.border.width:r.border.width,a.mapObject.layers[e].shapeSettings.border=r.border),a.groupElements.length<1)c=a.mapObject.renderer.createGroup({id:a.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group",transform:""}),a.groupElements.push(c);else for(var b=0;b<a.groupElements.length;b++){var S=a.groupElements[b];if(S.id.indexOf(u)>-1){c=S;break}if(b>=a.groupElements.length-1){c=a.mapObject.renderer.createGroup({id:a.mapObject.element.id+"_LayerIndex_"+e+"_"+u+"_Group"}),a.groupElements.push(c);break}}var O;switch(u){case"Polygon":g._isMultiPolygon?y=a.generateMultiPolygonPath(g):(y+="M"+g[0].point.x+" "+g[0].point.y,g.map(function(e){y+=" L "+e.point.x+" "+e.point.y})),(y+=" z ").length>3&&(d=new ot(x,r.fill,r.border.width,r.border.color,m,o.dashArray,y),O=a.mapObject.renderer.drawPath(d));break;case"LineString":g.map(function(e){f+=e.point.x+" , "+e.point.y+" "}),p=new dt(x,f,r.fill,r.border.width,r.border.color,m,o.dashArray),O=a.mapObject.renderer.drawPolyline(p);break;case"Point":var _=g.point;h=new rt(x,r.fill,r.border,m,_.x,_.y,o.circleRadius,null),O=a.mapObject.renderer.drawCircle(h);break;case"Path":y=g.point,d=new ot(x,r.fill,r.border.width,r.border.color,m,o.dashArray,y),O=a.mapObject.renderer.drawPath(d)}if(!t.isNullOrUndefined(O)){for(var M="[object Array]"===Object.prototype.toString.call(a.currentLayer.shapePropertyPath)?a.currentLayer.shapePropertyPath:[a.currentLayer.shapePropertyPath],L=void 0,C=0;C<M.length;C++)if(!t.isNullOrUndefined(g.property)){L=M[C];break}if(O.setAttribute("aria-label",t.isNullOrUndefined(g.property)?"":g.property[L]),O.setAttribute("tabindex",(a.mapObject.tabIndex+s+2).toString()),A(a.mapObject.selectedElementId,a.mapObject.shapeSelectionClass,O,"ShapeselectionMapStyle"),a.mapObject.toggledShapeElementId)for(C=0;C<a.mapObject.toggledShapeElementId.length;C++){var P=a.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?a.currentLayer.shapeSettings:a.mapObject.legendSettings.toggleLegendSettings;a.mapObject.toggledShapeElementId[C]===O.id&&(O.setAttribute("fill",P.fill),O.setAttribute("stroke",P.border.color),O.setAttribute("opacity",P.opacity.toString()),O.setAttribute("stroke-width",P.border.width.toString()))}c.appendChild(O)}s===a.currentLayer.layerData.length-1&&a.layerFeatures(e,n,i,l)};O.bind(r),r.mapObject.trigger("shapeRendering",S,O)}(s);else this.layerFeatures(e,n,i,l)},e.prototype.layerFeatures=function(e,i,a,o){var n,l=this;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var r,s=this.currentLayer.bubbleSettings.length,d=this,p=0;p<s;p++)!function(t){r=d.currentLayer.bubbleSettings[t],n=d.mapObject.renderer.createGroup({id:d.mapObject.element.id+"_LayerIndex_"+e+"_bubble_Group_"+t});var a={min:0,max:0};d.bubbleCalculation(r,a),r.dataSource.map(function(o,s){l.renderBubble(l.currentLayer,o,i[s%i.length],a,t,s,n,e,r)}),d.groupElements.push(n)}(p);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);var h=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+e+"_dataLableIndex_Group",style:"pointer-events: none;"});if(this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible){var c=[];a.map(function(t,i){l.renderLabel(l.currentLayer,e,t,h,i,o,c)}),this.groupElements.push(h)}this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,e)),this.groupElements.map(function(e){l.layerObject.appendChild(e)}),this.mapObject.markerModule&&(t.isNullOrUndefined(this.mapObject.baseMapRectBounds)||this.mapObject.markerModule.markerRender(this.layerObject,e,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor,null)),this.translateLayerElements(this.layerObject,e),this.layerGroup.appendChild(this.layerObject)},e.prototype.renderLabel=function(e,t,i,a,o,n,l){this.mapObject.dataLabelModule.renderLabel(e,t,i,e.layerData,a,n,o,l)},e.prototype.generateMultiPolygonPath=function(e){for(var t="",i=0;i<e.length;i++)t+="M"+e[i][0].point.x+" "+e[i][0].point.y,e[i].map(function(e){t+=" L "+e.point.x+" "+e.point.y});return t},e.prototype.renderBubble=function(e,i,a,o,n,l,r,s,d){if(t.isNullOrUndefined(this.mapObject.bubbleModule)||!d.visible)return null;a=d.fill?d.fill:a,this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+s+"_BubbleIndex_"+n+"_dataIndex_"+l,this.mapObject.bubbleModule.renderBubble(d,i,a,o,n,l,s,e,r,this.mapObject.bubbleModule.id)},e.prototype.getShapeColorMapping=function(e,i,a){if(a=a||e.shapeSettings.fill,0===e.shapeSettings.colorMapping.length&&t.isNullOrUndefined(e.dataSource))return a;var o=te(e.dataSource,i,e.shapeDataPath,e.shapePropertyPath,e),n=new di(this.mapObject);return t.isNullOrUndefined(e.dataSource[o])?a:n.getShapeColorMapping(e.shapeSettings,e.dataSource[o],a)},e.prototype.generatePoints=function(e,t,i,a){var o,n,l=this,r=[];switch(e.toLowerCase()){case"polygon":(r=this.calculatePolygonBox(t[0],i,a)).length>0&&(r.property=a,r.type=e,r._isMultiPolygon=!1,this.currentLayer.layerData.push(r));break;case"multipolygon":for(var s=[],d=0;d<t.length;d++)(r=this.calculatePolygonBox(t[d][0],i,a)).length>0&&s.push(r);s.property=a,s.type=e,s._isMultiPolygon=!0,this.currentLayer.layerData.push(s);break;case"linestring":t.map(function(e,t){o=e[1],n=e[0];var i=h(o,n,l.currentFactor,l.currentLayer,l.mapObject);r.push({point:i,lat:o,lng:n})}),r.property=a,r.type=e,this.currentLayer.layerData.push(r);break;case"point":var p=!1;if(t.map(function(t,i){if("[object Array]"===Object.prototype.toString.call(t)){o=t[1],n=t[0],p=!0;var r=h(o,n,l.currentFactor,l.currentLayer,l.mapObject);l.currentLayer.layerData.push({point:r,type:e,lat:o,lng:n,property:a})}}),!p){o=t[1],n=t[0];var c=h(o,n,this.currentFactor,this.currentLayer,this.mapObject);this.currentLayer.layerData.push({point:c,type:e,lat:o,lng:n,property:a})}break;case"path":this.currentLayer.layerData.push({point:i.d,type:e,property:a})}},e.prototype.calculateFactor=function(e){var t,i,a,o=1,n=this.mapObject.baseMapBounds,l=new $e(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5);if(n){var r=h(n.latitude.min,n.longitude.min,null,e,this.mapObject),s=h(n.latitude.max,n.longitude.max,null,e,this.mapObject);i=s.y-r.y,a=s.x-r.x}else i=a=500;return t=i<l.height?parseFloat(Math.abs(100*Number(l.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:l.height/i,o=a<l.width?parseFloat(Math.abs(100*Number(l.width/Number(a.toString()+"e+1"))).toString().split(".")[0])/10:l.width/a,Math.min(o,t)},e.prototype.translateLayerElements=function(e,i){var a;if(this.mapObject.translateType="layer",t.isNullOrUndefined(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!t.isNullOrUndefined(this.mapObject.scale))for(var o=0;o<e.childElementCount;o++)if(!((a=e.childNodes[o]).id.indexOf("_Markers_Group")>-1||a.id.indexOf("_bubble_Group")>-1||a.id.indexOf("_dataLableIndex_Group")>-1||a.id.indexOf("_line_Group")>-1)){h="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ";a.setAttribute("transform",h)}}else{var n=this.currentLayer.animationDuration,l=0!==n||t.isNullOrUndefined(this.mapObject.zoomModule);this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint;var r=void 0;r=this.mapObject.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(this.mapObject.zoomModule)?ce(this.mapObject,this.currentLayer,l):he(this.mapObject,this.currentLayer,l);var s=this.mapObject.previousScale=r.scale,d=this.mapObject.previousPoint=r.location;this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=d,this.mapObject.baseScale=this.mapObject.scale=s;for(var p=0;p<e.childElementCount;p++)if(!((a=e.childNodes[p]).id.indexOf("_Markers_Group")>-1||a.id.indexOf("_bubble_Group")>-1||a.id.indexOf("_dataLableIndex_Group")>-1)){var h="scale( "+s+" ) translate( "+d.x+" "+d.y+" ) ";a.setAttribute("transform",h),n>0&&!t.isNullOrUndefined(this.mapObject.zoomModule)&&(r=this.mapObject.zoomSettings.zoomFactor>1?ce(this.mapObject,this.currentLayer):he(this.mapObject,this.currentLayer),this.mapObject.scale=r.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=r.location)}}},e.prototype.calculateRectBounds=function(e){var i=this;Array.prototype.forEach.call(e,function(e,a){if(!t.isNullOrUndefined(e.geometry)||!t.isNullOrUndefined(e.coordinates)){var o=t.isNullOrUndefined(e.geometry)?e.type:e.geometry.type,n=t.isNullOrUndefined(e.geometry)?e.coordinates:e.geometry.coordinates;switch(o.toLowerCase()){case"polygon":i.calculateRectBox(n[0]);break;case"multipolygon":n.map(function(e,t){i.calculateRectBox(e[0])})}}})},e.prototype.calculatePolygonBox=function(e,i,a){var o=this,n=[],l=this.mapObject.baseMapBounds;return e.map(function(e,i){var a=e[1],r=e[0];if(r>=l.longitude.min&&r<=l.longitude.max&&a>=l.latitude.min&&a<=l.latitude.max){var s=h(a,r,o.currentFactor,o.currentLayer,o.mapObject);t.isNullOrUndefined(o.rectBounds)?o.rectBounds={min:{x:s.x,y:s.y},max:{x:s.x,y:s.y}}:(o.rectBounds.min.x=Math.min(o.rectBounds.min.x,s.x),o.rectBounds.min.y=Math.min(o.rectBounds.min.y,s.y),o.rectBounds.max.x=Math.max(o.rectBounds.max.x,s.x),o.rectBounds.max.y=Math.max(o.rectBounds.max.y,s.y)),n.push({point:s,lat:a,lng:r})}}),n},e.prototype.calculateRectBox=function(e){var i=this;Array.prototype.forEach.call(e,function(e){t.isNullOrUndefined(i.mapObject.baseMapBounds)?i.mapObject.baseMapBounds=new it({min:e[1],max:e[1]},{min:e[0],max:e[0]}):(i.mapObject.baseMapBounds.latitude.min=Math.min(i.mapObject.baseMapBounds.latitude.min,e[1]),i.mapObject.baseMapBounds.latitude.max=Math.max(i.mapObject.baseMapBounds.latitude.max,e[1]),i.mapObject.baseMapBounds.longitude.min=Math.min(i.mapObject.baseMapBounds.longitude.min,e[0]),i.mapObject.baseMapBounds.longitude.max=Math.max(i.mapObject.baseMapBounds.longitude.max,e[0]))})},e.prototype.generateTiles=function(e,i,a,o,n){var l=this.mapObject.locale,r=this.mapObject.availableSize;this.tiles=[];var s,d;s=d=Math.pow(2,e);var p=0,h=0;i.x+256*s<r.width&&(p=i.x>0?Math.ceil(i.x/256):0,h=i.x+256*s<r.width?Math.ceil((r.width-(i.x+256*s))/256):0),s+=p+h,"Pan"===a?(s=this.horizontalPanXCount>=s?this.horizontalPanXCount:s,this.horizontalPan=!1):(this.horizontalPanXCount=s,this.horizontalPan=!0);var c=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=c.urlTemplate;var m=Math.min(d,(-i.y+r.height)/256+1),u=Math.min(s,(-i.x+r.width+256*h)/256+1),g=-(i.x+256*p+256)/256,y=-(i.y+256)/256;o=o||this.bing||this.mapObject.bingMap;for(var f=Math.round(g);f<Math.round(u);f++)for(var b=Math.round(y);b<Math.round(m);b++){var v=256*f+i.x,x=256*b+i.y;if(v>-256&&v<=r.width&&x>-256&&x<r.height&&b>=0){var S=f;f<0&&(S=S%d+d);var O=new Jt(S%d,b);if(O.left=v,O.top=x,"Bing"===c.layerType){var _=c.key;O.src=o.getBingMap(O,_,c.bingMapType,l,o.imageUrl,o.subDomains)}else O.src=this.urlTemplate.replace("level",e.toString()).replace("tileX",O.x.toString()).replace("tileY",O.y.toString());this.tiles.push(O)}}t.isNullOrUndefined(a)||(a.indexOf("wheel")>1?(this.animateToZoomX=this.mapObject.availableSize.width/2-n.x-10,this.animateToZoomY=-n.y):(this.animateToZoomX=-10,this.animateToZoomY=10-(this.mapObject.availableSize.height/2+11.5)));for(var M=t.extend([],this.tiles,[],!0),L=0,C=this.mapObject.layers;L<C.length;L++){var P=C[L];if("SubLayer"===P.type&&P.visible&&("OSM"===P.layerType||"Bing"===P.layerType))for(var w=0,I=M;w<I.length;w++){var T=I[w],k=t.extend(T,{},{},!0);"Bing"===P.layerType?k.src=o.getBingMap(k,P.key,P.bingMapType,l,o.imageUrl,o.subDomains):k.src=P.urlTemplate.replace("level",e.toString()).replace("tileX",T.x.toString()).replace("tileY",T.y.toString()),this.tiles.push(k)}}this.arrangeTiles(a,this.animateToZoomX,this.animateToZoomY)},e.prototype.arrangeTiles=function(e,i,a){var o,n=this,l=document.getElementById(this.mapObject.element.id+"_tile_parent"),r=document.getElementById(this.mapObject.element.id+"_tiles");t.isNullOrUndefined(e)||"Pan"===e||"Reset"===e||-1!==e.indexOf("ZoomOut")?o=0:(this.tileAnimation(e,i,a),o=250),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?this.renderGoogleMap(this.mapObject.layers[0].key,this.mapObject.staticMapZoom):setTimeout(function(){l&&(l.style.zIndex="1"),r&&(r.style.zIndex="0",r.style.visibility="hidden");var i;!document.getElementById("animated_tiles")&&l?(i=t.createElement("div",{id:n.mapObject.element.id+"_animated_tiles"}),l.appendChild(i)):"Pan"!==e&&r&&l?(r.appendChild(l.children[0]),i=t.createElement("div",{id:n.mapObject.element.id+"_animated_tiles"}),l.appendChild(i)):i=l?l.children[0]:null;for(var a=0,o=0,s=n.tiles;o<s.length;o++){var d=s[o],p=t.createElement("img");p.setAttribute("src",d.src);var h=void 0;document.getElementById("tile_"+a)&&"Pan"===e&&de("tile_"+a),(h=t.createElement("div",{id:"tile_"+a})).style.position="absolute",h.style.left=d.left+"px",h.style.top=d.top+"px",h.style.height=d.height+"px",h.style.width=d.width+"px",h.appendChild(p),i&&i.appendChild(h),a++}},o)},e.prototype.tileAnimation=function(e,i,a){var o=document.getElementById(this.mapObject.element.id+"_tile_parent"),n=document.getElementById("animated_tiles"),l=document.getElementById(this.mapObject.element.id+"_tiles"),r="2";if(0===e.indexOf("ZoomOut")){for(l.style.zIndex="1",o.style.zIndex="0";l.childElementCount>=1;)l.removeChild(l.children[0]);i=0,a=105,r="0.5"}else if("Reset"===e){for(l.style.zIndex="1",o.style.zIndex="0";1!==l.childElementCount&&0!==l.childElementCount;)l.removeChild(l.children[1]);n=l.children[0],i=0,a=0,r="1"}t.isNullOrUndefined(n)||(n.style.transition="250ms",n.style.transform="translate("+i+"px, "+a+"px) scale("+r+")")},e.prototype.renderGoogleMap=function(e,i){var a,o=this.mapObject;i=this.mapObject.tileZoomLevel;var n,l,r=256*Math.pow(2,i);n=o.mapAreaRect.width/2-r/2,l=o.mapAreaRect.height/2-r/2;var s=0,d=0,p=c(new et(null,null),i,{x:n,y:l},this.isMapCoordinates);o.zoomModule&&o.zoomSettings.enable&&(s=o.zoomModule.mouseDownLatLong.x-o.zoomModule.mouseMoveLatLong.x,d=o.zoomModule.mouseDownLatLong.y-o.zoomModule.mouseMoveLatLong.y);var h=o.pointToLatLong(p.x-s,p.y-d);o.centerPosition.latitude=h.latitude,o.centerPosition.longitude=h.longitude;var m,u;m=t.isNullOrUndefined(parseInt(o.width,10))?parseInt(o.width,10)-22:Math.round(o.mapAreaRect.width),u=t.isNullOrUndefined(parseInt(o.height,10))?parseInt(o.height,10)-22:Math.round(o.mapAreaRect.height);var g=m>640?(m-640)/2:0,y=u>640?(u-640)/2:0,f=o.layers[o.layers.length-1].staticMapType.toString().toLowerCase();a="https://maps.googleapis.com/maps/api/staticmap?size="+m+"x"+u+"&zoom="+i+"&center="+(o.centerPosition.latitude&&o.centerPosition.longitude?o.centerPosition.latitude.toString()+","+o.centerPosition.longitude.toString():"0,0")+"&maptype="+f+"&key="+e,document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML='<div id="'+this.mapObject.element.id+'_StaticGoogleMap"style="position:absolute; left:'+g+"px; top:"+y+'px"><img src="'+a+'"></div>'},e.prototype.panTileMap=function(e,i,a){this.mapObject.tileZoomLevel<=this.mapObject.tileZoomScale&&this.mapObject.initialCheck&&(this.mapObject.tileZoomLevel=this.mapObject.tileZoomScale);var o,n,l=this.mapObject.tileZoomLevel,r="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.layers.length-1].layerType?20:0,s=256*Math.pow(2,l),d=c(a,l,{x:o=e/2-s/2,y:n=i/2-s/2},this.isMapCoordinates);if(r=this.mapObject.zoomNotApplied?0:r,o-=d.x-e/2,n=n-(d.y-i/2)+r,this.mapObject.scale=Math.pow(2,l-1),(t.isNullOrUndefined(this.mapObject.tileTranslatePoint)||0===this.mapObject.tileTranslatePoint.y&&0===this.mapObject.tileTranslatePoint.x||t.isNullOrUndefined(this.mapObject.previousTileWidth)||t.isNullOrUndefined(this.mapObject.previousTileHeight))&&(this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=i),!t.isNullOrUndefined(this.mapObject.tileTranslatePoint)&&t.isNullOrUndefined(a.x)&&(1===this.mapObject.zoomSettings.zoomFactor||this.mapObject.zoomSettings.zoomFactor!==l||!this.mapObject.defaultState)&&(e!==this.mapObject.previousTileWidth||i!==this.mapObject.previousTileHeight)){var p=o-(this.mapObject.previousTileWidth/2-s/2),h=n-(this.mapObject.previousTileHeight/2-s/2+r);this.mapObject.tileTranslatePoint.x=this.mapObject.tileTranslatePoint.x+p,this.mapObject.tileTranslatePoint.y=this.mapObject.tileTranslatePoint.y+h}return t.isNullOrUndefined(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0===this.mapObject.tileTranslatePoint.x||this.mapObject.tileTranslatePoint.x===o||this.mapObject.centerPositionChanged||(o=this.mapObject.tileTranslatePoint.x),0===this.mapObject.tileTranslatePoint.y||this.mapObject.tileTranslatePoint.y===n||this.mapObject.centerPositionChanged||(n=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new et((o-.01*this.mapObject.scale)/this.mapObject.scale,(n-.01*this.mapObject.scale)/this.mapObject.scale),this.mapObject.previousTileWidth=e,this.mapObject.previousTileHeight=i,new et(o,n)},e}(),ci=function(){function e(e){this.map=e}return e.prototype.renderAnnotationElements=function(){var e=this,i=this.map.element.id+"_Secondary_Element",a=t.createElement("div",{id:this.map.element.id+"_Annotations_Group"});if(a.style.position="absolute",a.style.top="0px",a.style.left="0px",this.map.annotations.map(function(t,i){null!==t.content&&e.createAnnotationTemplate(a,t,i)}),a.childElementCount>0&&!t.isNullOrUndefined(ue(i))){ue(i).appendChild(a);for(var o=0;o<this.map.annotations.length;o++)t.updateBlazorTemplate(this.map.element.id+"_ContentTemplate_"+o,"ContentTemplate",this.map.annotations[o])}},e.prototype.createAnnotationTemplate=function(e,i,a){var o,n,l,r,s=this,d=this.map,p=d.availableSize,h=(d.element.id,t.createElement("div",{id:d.element.id+"_Annotation_"+a,styles:"position: absolute; z-index:"+i.zIndex+";"})),c={cancel:!1,name:"annotationRendering",content:i.content,annotation:i};this.map.trigger("annotationRendering",c,function(e){if(!c.cancel){if((l=ye(c.content))&&(window.Blazor?{}:l(s.map,null,null,s.map.element.id+"_ContentTemplate_"+a).length))for(var i=(r=Array.prototype.slice.call(l(window.Blazor?{}:s.map,null,null,s.map.element.id+"_ContentTemplate_"+a))).length,o=0;o<i;o++)h.appendChild(r[o]);else h.appendChild(t.createElement("div",{innerHTML:c.content}))}});var m=ze(h.cloneNode(!0),d.element),u=d.element.getBoundingClientRect(),g=d.svgObject.getBoundingClientRect();o=Math.abs(g.left-u.left),n=Math.abs(g.top-u.top);var y=i.x.indexOf("%")>-1?p.width/100*parseFloat(i.x):parseFloat(i.x),f=i.y.indexOf("%")>-1?p.height/100*parseFloat(i.y):parseFloat(i.y);switch(o="None"===i.horizontalAlignment?o+y:o,n="None"===i.verticalAlignment?n+f:n,i.verticalAlignment){case"Near":n+=f;break;case"Center":n=n+f+(g.height/2-m.height/2);break;case"Far":n=n+g.height+f-m.height}switch(i.horizontalAlignment){case"Near":o+=y;break;case"Center":o=o+y+(g.width/2-m.width/2);break;case"Far":o=o+g.width+y-m.width}h.style.left=o+"px",h.style.top=n+"px",e.appendChild(h)},e.prototype.getModuleName=function(){return"Annotations"},e.prototype.destroy=function(e){},e}(),mi=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),ui=function(e,t,i,a){var o,n=arguments.length,l=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,i):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,a);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(l=(n<3?o(l):n>3?o(t,i,l):o(t,i))||l);return n>3&&l&&Object.defineProperty(t,i,l),l},gi=function(e){function o(i,a){var o=e.call(this,i,a)||this;return o.isTileMap=!1,o.isResize=!1,o.baseSize=new $e(0,0),o.translatePoint=new et(0,0),o.baseTranslatePoint=new et(0,0),o.zoomTranslatePoint=new et(0,0),o.markerZoomedState=!0,o.zoomPersistence=!1,o.defaultState=!0,o.centerPositionChanged=!1,o.isTileMapSubLayer=!1,o.markerNullCount=0,o.tileTranslatePoint=new et(0,0),o.baseTileTranslatePoint=new et(0,0),o.isDevice=!1,o.staticMapZoom=o.zoomSettings.enable?o.zoomSettings.zoomFactor:0,o.zoomNotApplied=!1,o.dataLabelShape=[],o.zoomShapeCollection=[],o.zoomLabelPositions=[],o.mouseDownEvent={x:null,y:null},o.mouseClickEvent={x:null,y:null},o.selectedElementId=[],o.selectedMarkerElementId=[],o.selectedBubbleElementId=[],o.selectedNavigationElementId=[],o.selectedLegendElementId=[],o.legendSelectionCollection=[],o.shapeSelections=!0,o.legendSelection=!0,o.toggledLegendId=[],o.toggledShapeElementId=[],o.checkInitialRender=!0,o.initialTileTranslate=new et(0,0),o.initialCheck=!0,o.applyZoomReset=!1,o.markerClusterExpandCheck=!1,o.markerClusterExpand=!1,o.shapeSelectionItem=[],t.setValue("mergePersistData",o.mergePersistMapsData,o),o}return mi(o,e),Object.defineProperty(o.prototype,"isShapeSelected",{get:function(){return this.mapSelect},enumerable:!0,configurable:!0}),o.prototype.mergePersistMapsData=function(){var e;if(t.isNullOrUndefined(window.localStorage)||(e=window.localStorage.getItem(this.getModuleName()+this.element.id)),!t.isNullOrUndefined(e)&&""!==e){var i=JSON.parse(e),a=Object.keys(i);this.isProtectedOnChange=!0;for(var o=0,n=a;o<n.length;o++){var l=n[o];"object"!=typeof this[l]||t.isNullOrUndefined(this[l])?this[l]=i[l]:t.extend(this[l],i[l])}this.isProtectedOnChange=!1}},o.prototype.getLocalizedLabel=function(e){return this.localeObject.getConstant(e)},o.prototype.preRender=function(){this.isDevice=t.Browser.isDevice,this.isBlazor=t.isBlazor(),this.initPrivateVariable(),this.allowServerDataBinding=!1,this.unWireEVents(),this.wireEVents(),this.setCulture()},o.prototype.render=function(){this.trigger("load",this.isBlazor?{}:{maps:this}),this.createSVG(),this.findBaseAndSubLayers(),this.createSecondaryElement(),this.addTabIndex(),this.themeStyle=Ye(this.theme),this.renderBorder(),this.renderTitle(this.titleSettings,"title",null,null),this.renderArea(),this.processRequestJsonData(),this.renderComplete()},o.prototype.processRequestJsonData=function(){var e=this,i=this.layersCollection.length-1;this.serverProcess={request:0,response:0};var o,n;Array.prototype.forEach.call(this.layersCollection,function(l,r){if(l.shapeData instanceof a.DataManager?(e.serverProcess.request++,n=l.shapeData,o=l.query instanceof a.Query?l.query:e.isBlazor?(new a.Query).requiresCount():new a.Query,(s=n.executeQuery(o)).then(function(t){e.processResponseJsonData("DataManager",t,l,"ShapeData")})):(l.shapeData instanceof gt||l.shapeData)&&(t.isNullOrUndefined(l.shapeData.dataOptions)||e.processAjaxRequest(l,l.shapeData,"ShapeData")),l.dataSource instanceof a.DataManager){e.serverProcess.request++,n=l.dataSource,o=l.query instanceof a.Query?l.query:e.isBlazor?(new a.Query).requiresCount():new a.Query;var s=n.executeQuery(o);s.then(function(e){l.dataSource=Xe(e)})}if(l.markerSettings.length>0)for(d=0;d<l.markerSettings.length;d++)!function(t){l.markerSettings[t].dataSource instanceof a.DataManager&&(e.serverProcess.request++,n=l.markerSettings[t].dataSource,o=l.markerSettings[t].query instanceof a.Query?l.markerSettings[t].query:e.isBlazor?(new a.Query).requiresCount():new a.Query,n.executeQuery(o).then(function(e){l.markerSettings[t].dataSource=Xe(e)}))}(d);if(l.bubbleSettings.length>0)for(var d=0;d<l.bubbleSettings.length;d++)!function(t){l.bubbleSettings[t].dataSource instanceof a.DataManager&&(e.serverProcess.request++,n=l.bubbleSettings[t].dataSource,o=l.bubbleSettings[t].query instanceof a.Query?l.bubbleSettings[t].query:e.isBlazor?(new a.Query).requiresCount():new a.Query,n.executeQuery(o).then(function(e){l.bubbleSettings[t].dataSource=Xe(e)}))}(d);(l.dataSource instanceof gt||!t.isNullOrUndefined(l.dataSource.dataOptions))&&e.processAjaxRequest(l,l.dataSource,"DataSource"),e.serverProcess.request===e.serverProcess.response&&i===r&&e.processResponseJsonData(null)})},o.prototype.processAjaxRequest=function(e,i,a){var o,n=this;this.serverProcess.request++,(o=new t.Ajax(i.dataOptions,i.type,i.async,i.contentType)).onSuccess=function(t){n.processResponseJsonData("Ajax",t,e,a)},o.send(i.sendData)},o.prototype.processResponseJsonData=function(e,i,a,o){if(this.serverProcess.response++,e&&("ShapeData"===o?a.shapeData="DataManager"===e?Xe(i):JSON.parse(i):a.dataSource="DataManager"===e?Xe(i):JSON.parse("["+i+"]")[0]),t.isNullOrUndefined(e)||this.serverProcess.request!==this.serverProcess.response)t.isNullOrUndefined(e)&&this.renderMap();else{var n=this.layersCollection;this.layersCollection=[];for(var l=0;l<n.length;l++)n[l].isBaseLayer&&this.layersCollection.push(n[l]);for(var r=0;r<n.length;r++)n[r].isBaseLayer||this.layersCollection.push(n[r]);this.renderMap()}},o.prototype.renderMap=function(){if(this.legendModule&&this.legendSettings.visible)if(this.isTileMap){var e=this.layersCollection.length-1;this.layersCollection[e].isBaseLayer||(this.isTileMapSubLayer=!0,this.legendModule.renderLegend())}else this.legendModule.renderLegend();this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),t.isNullOrUndefined(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject);for(f=0;f<this.layers.length;f++){if(this.layers[f].selectionSettings&&this.layers[f].selectionSettings.enable&&this.layers[f].initialShapeSelection.length>0&&this.checkInitialRender){var i=this.layers[f].selectionSettings.enableMultiSelect;this.layers[f].selectionSettings.enableMultiSelect=i||!0;for(var a=this.layers[f].initialShapeSelection,o=0;o<this.layers[f].initialShapeSelection.length;o++)this.shapeSelection(f,a[o].shapePath,a[o].shapeValue,!0);this.layers[f].selectionSettings.enableMultiSelect=i,f===this.layers.length-1&&(this.checkInitialRender=!1)}for(var n=0;n<this.layers[f].markerSettings.length;n++)if(this.layers[f].markerSettings[n].selectionSettings&&this.layers[f].markerSettings[n].selectionSettings.enable&&this.layers[f].markerSettings[n].initialMarkerSelection.length>0)for(var l=this.layers[f].markerSettings[n].initialMarkerSelection,o=0;o<l.length;o++)this.markerInitialSelection(f,n,this.layers[f].markerSettings[n],l[o].latitude,l[o].longitude)}if(!t.isNullOrUndefined(document.getElementById(this.element.id+"_tile_parent"))){var r,s=this.svgObject.getBoundingClientRect(),d=document.getElementById(this.element.id),p=document.getElementById(this.element.id+"_tile_parent"),h=document.getElementById(this.element.id+"_tiles"),c=p.getBoundingClientRect(),m=void 0,u=void 0;u=parseFloat(p.style.left)+d.offsetLeft;var g=S(this.titleSettings.text,this.titleSettings.textStyle),y=S(this.titleSettings.subtitleSettings.text,this.titleSettings.subtitleSettings.textStyle);this.isTileMap&&this.isTileMapSubLayer&&"Bottom"===this.legendSettings.position&&this.legendSettings.visible?"Default"!==this.legendSettings.mode?r=0!==g.width&&0!==g.height?parseFloat(p.style.top)+d.offsetTop+y.height/2-this.legendModule.legendBorderRect.height/2:parseFloat(p.style.top)+d.offsetTop-this.mapAreaRect.y:(u=this.legendModule.legendBorderRect.x,r=0!==g.width&&0!==g.height?parseFloat(p.style.top)+d.offsetTop+y.height/2-this.legendModule.legendBorderRect.y:parseFloat(p.style.top)+d.offsetTop+y.height/2):(m=s.bottom-c.bottom-d.offsetTop,r=parseFloat(p.style.top)+d.offsetTop),r=m<=11?r:2*r,u=m<=11?u:2*u,p.style.top=r+"px",p.style.left=u+"px",h.style.top=r+"px",h.style.left=u+"px"}this.arrangeTemplate();this.isBlazor&&this.blazorTemplates();this.annotationsModule&&"0px"!==this.width&&"0px"!==this.height&&"0%"!==this.width&&"0%"!==this.height&&this.annotationsModule.renderAnnotationElements(),this.element.style.outline="none";for(var f=0;f<document.getElementsByTagName("path").length-1;f++)document.getElementsByTagName("path")[f].id.indexOf("shapeIndex")>-1&&(document.getElementsByTagName("path")[f].style.outline="none");this.zoomingChange(),this.trigger("loaded",this.isBlazor?{isResized:this.isResize}:{maps:this,isResized:this.isResize}),this.isResize=!1},o.prototype.markerSelection=function(e,t,i,a){var o={color:e.border.color,width:e.border.width/t.scale},n={opacity:e.opacity,fill:e.fill,border:o,target:i.id,cancel:!1,data:a,maps:t};fe("MarkerselectionMap")?Me("MarkerselectionMap","MarkerselectionMapStyle",n):document.body.appendChild(_e("MarkerselectionMap","MarkerselectionMapStyle",n)),(0===this.selectedMarkerElementId.length||e.enableMultiSelect)&&i.setAttribute("class","MarkerselectionMapStyle")},o.prototype.markerInitialSelection=function(e,t,i,a,o){var n=i.selectionSettings;if(n.enable)for(var l=0;l<i.dataSource.length;l++){var r=i.dataSource[l];if(r.latitude===a&&r.longitude===o){var s=this.element.id+"_LayerIndex_"+e+"_MarkerIndex_"+t+"_dataIndex_"+l;this.markerSelection(n,this,fe(s),r)}}},o.prototype.blazorTemplates=function(){for(var e=0;e<this.layers.length;e++){var i=this.layers[e].markerSettings.length-1;if(i>=0&&(this.layers[e].dataLabelSettings.visible||this.layers[e].markerSettings[i].template)){t.updateBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate",this.layers[e].dataLabelSettings);for(var a=0;a<this.layers[e].markerSettings.length;a++)t.updateBlazorTemplate(this.element.id+"_MarkerTemplate"+a,"MarkerTemplate",this.layers[e].markerSettings[a])}}},o.prototype.renderArea=function(){var e=this.mapsArea.border.width,t=this.mapsArea.background;if(e>0||t||this.themeStyle.areaBackgroundColor){var i=new lt(this.element.id+"_MapAreaBorder",t||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect);this.svgObject.appendChild(this.renderer.drawRectangle(i))}},o.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element"),this.element.setAttribute("tabindex",this.tabIndex.toString())},o.prototype.zoomingChange=function(){var e,i;if(ue(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=ue(this.element.id+"_Layer_Collections")),this.isTileMap&&ue(this.element.id+"_Tile_SVG")&&ue(this.element.id+"_tile_parent")){var a=ue(this.element.id+"_tile_parent").getBoundingClientRect(),o=ue(this.element.id+"_Tile_SVG").getBoundingClientRect();e=a.left-o.left,i=a.top-o.top,ue(this.element.id+"_Tile_SVG_Parent").style.left=e+"px",ue(this.element.id+"_Tile_SVG_Parent").style.top=i+"px";var n=document.getElementsByClassName("template");if(!t.isNullOrUndefined(n)&&n.length>0)for(s=0;s<n.length;s++){var l=n[s];l.style.left=e+"px",l.style.top=i+"px"}}if(this.zoomSettings.zoomFactor>=1){this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar();var r=document.getElementById(this.element.id+"_Layer_Collections");if(!t.isNullOrUndefined(r)&&r.childElementCount>0)for(var s=0;s<r.childNodes.length;s++){var d=r.childNodes[s];if("g"===d.tagName)for(var p=parseFloat(d.id.split("_LayerIndex_")[1].split("_")[0]),h=0;h<d.childNodes.length;h++){var c=d.childNodes[h];c.id.indexOf("_Markers_Group")>-1||c.id.indexOf("_bubble_Group")>-1||c.id.indexOf("_dataLableIndex_Group")>-1||je(c,p,this.scale,this)}}this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},o.prototype.createSecondaryElement=function(){if(t.isNullOrUndefined(document.getElementById(this.element.id+"_Secondary_Element"))){var e=t.createElement("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:2;"});this.element.appendChild(e)}},o.prototype.arrangeTemplate=function(){document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none");var e=document.getElementsByClassName(this.element.id+"_template");if(!t.isNullOrUndefined(e)&&e.length>0&&ue(this.element.id+"_Layer_Collections")&&"OSM"!==this.layers[this.layers.length-1].layerType)for(var i=0;i<e.length;i++){var a=e[i];if(!t.isNullOrUndefined(a)&&a.childElementCount>0)for(var o=ue(this.element.id+"_Layer_Collections").getBoundingClientRect(),n=ue(a.id).getBoundingClientRect(),l=this.isTileMap?0:o.left<n.left?-Math.abs(n.left-o.left):Math.abs(n.left-o.left),r=this.isTileMap?0:o.top<n.top?-Math.abs(n.top-o.top):Math.abs(n.top-o.top),s=0;s<a.childElementCount;s++){var d=a.childNodes[s];d.style.left=parseFloat(d.style.left)+l+"px",d.style.top=parseFloat(d.style.top)+r+"px",d.style.transform="translate(-50%, -50%)"}}},o.prototype.createTile=function(){var e=this.layersCollection[0];if(e.isBaseLayer&&("OSM"===e.layerType||"Bing"===e.layerType||"GoogleStaticMap"===e.layerType||"Google"===e.layerType)){"Google"===e.layerType&&(e.urlTemplate="https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level"),de(this.element.id+"_tile_parent"),de(this.element.id+"_tiles"),de("animated_tiles");var i=t.createElement("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"}),a=t.createElement("div",{id:this.element.id+"_tiles",styles:"position: absolute; left: "+this.mapAreaRect.x+"px;  right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"});this.element.appendChild(i),this.element.appendChild(a)}},o.prototype.initPrivateVariable=function(){if(""===this.element.id){var e=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+e}this.renderer=new i.SvgRenderer(this.element.id),this.mapLayerPanel=new hi(this)},o.prototype.findBaseAndSubLayers=function(){var e=this,t=this.baseLayerIndex,i=[],a=[];this.layersCollection=[],Array.prototype.forEach.call(this.layers,function(e){"Layer"===e.type?i.push(e):a.push(e)});for(var o=0;o<i.length;o++){var n=i[o];if(n.visible&&t===o){n.isBaseLayer=!0,this.isTileMap="Geometry"!==n.layerType,this.layersCollection.push(n);break}if(o===i.length-1){this.layersCollection.push(i[0]);break}}a.map(function(t,i){t.visible&&e.layersCollection.push(t)})},o.prototype.renderBorder=function(){var e=this.border.width,i=this.svgObject.querySelector("#"+this.element.id+"_MapBorder");if((e>0||this.background||this.themeStyle.backgroundColor)&&t.isNullOrUndefined(i)){var a=new lt(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new mt(e/2,e/2,this.availableSize.width-e,this.availableSize.height-e));this.svgObject.appendChild(this.renderer.drawRectangle(a))}else i.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},o.prototype.renderTitle=function(e,i,a,o){var n,l=e.textStyle,r=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(l.fontFamily=this.themeStyle.fontFamily||l.fontFamily,l.size=this.themeStyle.titleFontSize||l.size,e.text){t.isNullOrUndefined(o)&&(o=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var s=re(r,e.text,l),d=S(s,l),p=se(t.isNullOrUndefined(a)?new mt(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):a,e.alignment,d,i),h=new at(this.element.id+"_Map_"+i,p.x,p.y,"start",s),c=new mt(p.x,p.y,d.width,d.height),m=O(h,l,l.color||("title"===i?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),o);m.setAttribute("aria-label",this.description||e.text),m.setAttribute("tabindex",(this.tabIndex+("title"===i?1:2)).toString()),("title"===i&&!e.subtitleSettings.text||"subtitle"===i)&&(n=Math.abs(c.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new mt(this.margin.left,c.y+10,r,n-10)),"subtitle"!==i&&e.subtitleSettings.text?this.renderTitle(e.subtitleSettings,"subtitle",c,o):this.svgObject.appendChild(o)}else n=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new mt(this.margin.left,this.margin.top,r,n)},o.prototype.createSVG=function(){t.resetBlazorTemplate(this.element.id+"_LabelTemplate","LabelTemplate");for(var e=0;e<this.layers.length;e++)for(var i=0;i<this.layers[e].markerSettings.length;i++)t.resetBlazorTemplate(this.element.id+"_MarkerTemplate"+i,"MarkerTemplate");this.removeSvg(),r(this)},o.prototype.removeSvg=function(){for(var e=0;e<this.annotations.length;e++)t.resetBlazorTemplate(this.element.id+"_ContentTemplate_"+e,"ContentTemplate");if(de(this.element.id+"_Secondary_Element"),de(this.element.id+"_tile_parent"),de(this.element.id+"_tiles"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&t.remove(this.svgObject)}},o.prototype.wireEVents=function(){t.EventHandler.add(this.element,"click",this.mapsOnClick,this),t.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this),t.EventHandler.add(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap,this),t.EventHandler.add(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap,this),t.EventHandler.add(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap,this),t.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this),window.addEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},o.prototype.unWireEVents=function(){t.EventHandler.remove(this.element,"click",this.mapsOnClick),t.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick),t.EventHandler.remove(this.element,t.Browser.touchStartEvent,this.mouseDownOnMap),t.EventHandler.remove(this.element,t.Browser.touchMoveEvent,this.mouseMoveOnMap),t.EventHandler.remove(this.element,t.Browser.touchEndEvent,this.mouseEndOnMap),t.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap),window.removeEventListener(t.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},o.prototype.mouseLeaveOnMap=function(e){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),Ce(document.getElementsByClassName("highlightMapStyle")[0]))},o.prototype.mapsOnClick=function(e){var i,a=this,o=e.target,n=o.id,l=0,r=null,s=null;if(this.mouseClickEvent={x:e.x,y:e.y},-1===o.id.indexOf("_ToolBar")){-1===o.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(r=(i=this.getTileGeoLocation(e)).latitude,s=i.longitude):(l=parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]),r=(i=this.getGeoLocation(l,e)).latitude,s=i.longitude);var d={cancel:!1,name:"click",target:n,x:e.clientX,y:e.clientY,latitude:r,longitude:s};this.trigger("click",d,function(i){if(o.id.indexOf("shapeIndex")>-1&&(a.markerModule&&a.markerModule.sameMarkerData.length>0&&(!a.zoomModule||a.zoomModule.isSingleClick)&&(N(a.markerModule.sameMarkerData,a,fe(a.element.id+"_Markers_Group")),a.markerModule.sameMarkerData=[]),fe(a.element.id+"_mapsTooltip")&&a.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&de(a.element.id+"_mapsTooltip")),a.markerModule&&(a.markerModule.markerClick(e),a.markerModule.markerClusterClick(e)),a.bubbleModule&&a.bubbleModule.bubbleClick(e),d.cancel||a.notify("click",o),!d.cancel&&-1!==o.id.indexOf("shapeIndex")){var l=parseInt(o.id.split("_LayerIndex_")[1].split("_")[0],10),r=ve(n,a.layers[l].selectionSettings,a,"shapeSelected");r.cancel||!a.selectionModule||t.isNullOrUndefined(a.shapeSelected)?r.cancel&&a.selectionModule&&t.isNullOrUndefined(r.data)&&(Ce(o),a.selectionModule.removedSelectionList(o)):Me(a.selectionModule.selectionType+"selectionMap",a.selectionModule.selectionType+"selectionMapStyle",r)}})}},o.prototype.mouseEndOnMap=function(e){var i,a,o;e.target.id,this.element.getBoundingClientRect(),e.target;return-1!==e.type.indexOf("touch")?(this.isTouch=!0,i=(o=e).changedTouches[0].pageX,a=o.changedTouches[0].pageY,o.target):(this.isTouch="touch"===e.pointerType,i=e.pageX,a=e.pageY,e.target),this.isTouch&&(this.titleTooltip(e,i,a,!0),t.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),this.notify(t.Browser.touchEndEvent,e),e.preventDefault(),!1},o.prototype.mouseDownOnMap=function(e){this.mouseDownEvent={x:e.x,y:e.y};this.element.getBoundingClientRect();var i=e.target;if(-1===i.id.indexOf("_ToolBar")){var a=this.markerModule;(i.id.indexOf("shapeIndex")>-1||i.id.indexOf("Tile")>-1)&&a&&a.sameMarkerData.length>0&&(!this.zoomModule||this.zoomModule.isSingleClick)&&(N(a.sameMarkerData,this,fe(this.element.id+"_Markers_Group")),a.sameMarkerData=[]),a&&(a.markerClick(e),a.markerClusterClick(e)),this.bubbleModule&&this.bubbleModule.bubbleClick(e)}this.notify(t.Browser.touchStartEvent,e)},o.prototype.mapsOnDoubleClick=function(e){this.notify("dblclick",e)},o.prototype.mouseMoveOnMap=function(e){"touchmove"===e.type?e.target:e.target,this.markerModule&&(this.markerModule.markerMove(e),this.markerModule.markerClusterMouseMove(e)),this.bubbleModule&&this.bubbleModule.bubbleMove(e),this.onMouseMove(e),this.notify(t.Browser.touchMoveEvent,e)},o.prototype.onMouseMove=function(e){e.target;return this.isTouch||(this.titleTooltip(e,e.pageX,e.pageY),t.isNullOrUndefined(this.legendModule)||this.legendTooltip(e,e.pageX,e.pageY,!0)),!1},o.prototype.legendTooltip=function(e,t,i,a){var o,n,l=e.target.id,r=this.legendModule.currentPage,s=e.target.id.split("_Index_")[1];r=this.legendModule.totalPages.length<=this.legendModule.currentPage?this.legendModule.totalPages.length-1:this.legendModule.currentPage<0?0:this.legendModule.currentPage;for(var d=0!==this.legendModule.totalPages.length?this.legendModule.totalPages[r].Collection.length:this.legendModule.totalPages.length,p=0;p<d;p++)o=(n=this.legendModule.totalPages[r].Collection[p]).DisplayText,l=e.target.id,s=e.target.id.split("_Index_")[1],l===this.element.id+"_Legend_Text_Index_"+s&&e.target.textContent.indexOf("...")>-1&&n.idIndex===parseInt(s,10)&&Ie(o,this.legendSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Legend_Text_Tooltip",fe(this.element.id+"_Secondary_Element"),a);l!==this.element.id+"_Legend_Text_Index_"+s&&de(this.element.id+"_EJ2_Legend_Text_Tooltip")},o.prototype.titleTooltip=function(e,t,i,a){var o=e.target.id;o===this.element.id+"_LegendTitle"&&-1===e.target.textContent.indexOf("...")?Ie(this.legendSettings.title.text,this.legendSettings.titleStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_LegendTitle_Tooltip",fe(this.element.id+"_Secondary_Element"),a):de(this.element.id+"_EJ2_LegendTitle_Tooltip"),o===this.element.id+"_Map_title"&&e.target.textContent.indexOf("...")>-1?Ie(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",fe(this.element.id+"_Secondary_Element"),a):de(this.element.id+"_EJ2_Title_Tooltip")},o.prototype.mapsOnResize=function(e){var t=this;this.isResize=!0;var i={name:"resize",previousSize:this.availableSize,currentSize:new $e(0,0),maps:this.isBlazor?null:this};return this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){t.unWireEVents(),t.createSVG(),t.refreshing=!0,t.wireEVents(),i.currentSize=t.availableSize,t.trigger("resize",i),t.render()},500)),!1},o.prototype.zoomByPosition=function(e,i){var a,o=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),n=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(t.isNullOrUndefined(e))a={x:n.width/2,y:n.height/2},this.zoomModule.performZooming(a,i,i>this.scale?"ZoomIn":"ZoomOut");else{a=h(e.latitude,e.longitude,o,this.layersCollection[0],this);var l=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),r=this.svgObject.getBoundingClientRect(),s=Math.abs(l.left-r.left)/this.scale,d=Math.abs(l.top-r.top)/this.scale,p=this.translatePoint.x+s,c=this.translatePoint.y+d;this.scale=i,this.translatePoint.x=((l.left<r.left?p:0)+n.width/2-a.x*i)/i,this.translatePoint.y=((l.top<r.top?c:0)+n.height/2-a.y*i)/i,this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=i,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:e.longitude,y:e.latitude}),this.mapLayerPanel.generateTiles(i,this.tileTranslatePoint,null,new si(this)))},o.prototype.panByDirection=function(e,t){var i=0,a=0;switch(e){case"Left":i=-this.mapAreaRect.width/7;break;case"Right":i=this.mapAreaRect.width/7;break;case"Top":a=-this.mapAreaRect.height/7;break;case"Bottom":a=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(e,i,a,t)},o.prototype.addLayer=function(e){this.layers.push(new Yt(this.layers[0],"layers",e)),this.refresh()},o.prototype.removeLayer=function(e){this.layers.splice(e,1),this.refresh()},o.prototype.addMarker=function(e,t){var i=document.getElementById(this.element.id+"_LayerIndex_"+e);if(t.length>0&&i){for(var a=0,o=t;a<o.length;a++){var n=o[a];this.layersCollection[e].markerSettings.push(new Xt(this,"markerSettings",n))}new $t(this).markerRender(i,e,this.mapLayerPanel.currentFactor,"AddMarker"),this.arrangeTemplate()}},o.prototype.shapeSelection=function(e,i,a,o){var n,l=Array.isArray(i)?i:Array(i);t.isNullOrUndefined(o)&&(o=!0);var r=this.layers[e].selectionSettings;if(!r.enableMultiSelect&&this.legendSelection&&o&&this.removeShapeSelection(),r.enable)for(var s=void 0,d=void 0,p=void 0,h=void 0,c=void 0,m=this.layers[e].shapeData.features,u=0;u<m.length;u++)for(var g=0;g<l.length;g++)if((!t.isNullOrUndefined(m[u].properties[l[g]])&&isNaN(m[u].properties[l[g]])?m[u].properties[l[g]].toLowerCase():m[u].properties[l[g]])===(t.isNullOrUndefined(a)?a:a.toLowerCase())){var y=te(this.layers[e].dataSource,m[u].properties,this.layers[e].shapeDataPath,this.layers[e].shapePropertyPath,this.layers[e]);if(s=this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+u+"_dataIndex_"+(t.isNullOrUndefined(y)?"undefined":y.toString()),n=fe(s),t.isNullOrUndefined(y)&&t.isNullOrUndefined(n)&&(n=fe(s=this.element.id+"_LayerIndex_"+e+"_shapeIndex_"+u+"_dataIndex_null")),p=parseInt(n.id.split("_shapeIndex_")[1].split("_")[0],10),h=this.layers[e].shapeData.features.length>p?this.layers[e].shapeData.features[p].properties:null,d=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),c=t.isNullOrUndefined(d)?null:this.layers[e].dataSource[d],o){if(Le(r,this,n,h,c),this.shapeSelectionClass=fe("ShapeselectionMap"),this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e),(f=!this.legendSettings.visible||this.legendModule.shapeToggled)&&(n.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(n.getAttribute("id"))&&this.selectedElementId.push(n.getAttribute("id")),!r.enableMultiSelect))return}else{this.legendSelection=!r.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===n.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(n,c,r,"selection",e);var f=!this.legendSettings.visible||this.legendModule.shapeToggled;if(f){Ce(n);var b=this.selectedElementId.indexOf(n.getAttribute("id"));-1!==b&&(this.selectedElementId.splice(b,1),!r.enableMultiSelect&&this.legendSelection&&this.selectedElementId.length>0&&this.removeShapeSelection())}}}},o.prototype.zoomToCoordinates=function(e,i,a,o){var n,l,r,s,d=!1;(t.isNullOrUndefined(a)&&t.isNullOrUndefined(o)||t.isNullOrUndefined(e)&&t.isNullOrUndefined(i))&&(e=t.isNullOrUndefined(e)?0:e,i=t.isNullOrUndefined(e)?0:i,a=t.isNullOrUndefined(a)?e:a,o=t.isNullOrUndefined(o)?i:o,d=!0),e>a&&(e=(n=[a,e])[0],a=n[1]),i>o&&(i=(l=[o,i])[0],o=l[1]),d?(r=e+a,s=i+o):(r=(e+a)/2,s=(i+o)/2),this.centerLatOfGivenLocation=r,this.centerLongOfGivenLocation=s,this.minLatOfGivenLocation=e,this.minLongOfGivenLocation=i,this.maxLatOfGivenLocation=a,this.maxLongOfGivenLocation=o,this.zoomNotApplied=!0,this.scaleOfGivenLocation=qe(e,a,i,o,this.mapAreaRect.width,this.mapAreaRect.height,this);var p;p={cancel:!1,name:"zoom",type:"zoomIn",maps:this.isBlazor?null:this,tileTranslatePoint:{},translatePoint:{},tileZoomLevel:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{},scale:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{previous:this.scale,current:this.scaleOfGivenLocation}},this.trigger("zoom",p),this.refresh()},o.prototype.removeShapeSelection=function(){for(var e=this.selectedElementId.length,t=0;t<e;t++)Ce(ue(this.selectedElementId[0])),this.selectedElementId.splice(0,1);if(this.legendSettings.visible)for(var i=this.legendSelectionCollection.length,t=0;t<i;t++)Ce(ue(this.legendSelectionCollection[t].legendElement.id)),this.selectedLegendElementId.splice(0,1);this.shapeSelectionItem=[],this.legendSelectionCollection=[]},o.prototype.setCulture=function(){this.intl=new t.Internationalization,this.setLocaleConstants(),this.localeObject=new t.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},o.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset"}},o.prototype.destroy=function(){this.unWireEVents(),this.shapeSelectionItem=[],this.toggledShapeElementId=[],this.toggledLegendId=[],this.legendSelectionCollection=[],this.selectedLegendElementId=[],this.selectedNavigationElementId=[],this.selectedBubbleElementId=[],this.selectedMarkerElementId=[],this.selectedElementId=[],this.dataLabelShape=[],this.zoomShapeCollection=[],this.zoomLabelPositions=[],this.mouseDownEvent={x:null,y:null},this.mouseClickEvent={x:null,y:null},document.getElementById("mapsmeasuretext")&&document.getElementById("mapsmeasuretext").remove(),this.removeSvg(),e.prototype.destroy.call(this)},o.prototype.getModuleName=function(){return"maps"},o.prototype.getPersistData=function(){var e=["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale","zoomPersistence","defaultState","markerZoomedState","initialCheck","initialZoomLevel","initialTileTranslate","applyZoomReset","markerZoomFactor"];return this.addOnPersist(e)},o.prototype.onPropertyChanged=function(i,a){var o=!1,n=!1,l=!1;if(i.layers){var r=Object.keys(i.layers).length;document.getElementById(this.element.id+"_LayerIndex_"+(r-1))}for(var s=0,d=Object.keys(i);s<d.length;s++){var p=d[s];switch(p){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"centerPosition":case"legendSettings":case"zoomSettings":case"baseLayerIndex":if("layers"===p)for(var h=Object.keys(i.layers).length,c=0;c<h;c++)if(!t.isNullOrUndefined(i.layers[c]))for(var m=0,u=Object.keys(i.layers[c]);m<u.length;m++){var g=u[m];"markerSettings"===g?n=!0:"staticMapType"===g&&(l=!0)}o=!0;break;case"locale":case"currencyCode":e.prototype.refresh.call(this)}}o&&(i.layers&&n?(de(this.element.id+"_Markers_Group"),this.isTileMap?this.isBlazor?this.render():this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,this.layers.length-1):this.render()):i.layers&&l?this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length-1].key,this.staticMapZoom):(this.createSVG(),this.render()))},o.prototype.requiredModules=function(){var e=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(e,t){i=null!=e.content}),this.isBubbleVisible()&&e.push({member:"Bubble",args:[this]}),t.highlight&&e.push({member:"Highlight",args:[this]}),t.selection&&e.push({member:"Selection",args:[this]}),this.legendSettings.visible&&e.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&e.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&e.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&e.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&e.push({member:"NavigationLine",args:[this]}),t.tooltip&&e.push({member:"MapsTooltip",args:[this]}),i&&e.push({member:"Annotations",args:[this,ci]}),this.allowPrint&&e.push({member:"Print",args:[this]}),this.allowImageExport&&e.push({member:"ImageExport",args:[this]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),e},o.prototype.isMarkersVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var a=0;a<t.markerSettings.length;a++)if(t.markerSettings[a].visible){e=!0;break}}),e},o.prototype.isDataLabelVisible=function(){for(var e=!1,t=0;t<this.layers.length;t++)if(this.layers[t].dataLabelSettings.visible){e=!0;break}return e},o.prototype.isNavigationVisible=function(){var e=!1;return Array.prototype.forEach.call(this.layers,function(t,i){for(var a=0;a<t.navigationLineSettings.length;a++)if(t.navigationLineSettings[a].visible){e=!0;break}}),e},o.prototype.isBubbleVisible=function(){for(var e=!1,t=0,i=this.layers;t<i.length;t++){var a=i[t];if(this.getBubbleVisible(a)){e=!0;break}}return e},o.prototype.getBubbleVisible=function(e){for(var t=!1,i=0,a=e.bubbleSettings;i<a.length;i++)if(a[i].visible){t=!0;break}return t},o.prototype.print=function(e){this.allowPrint&&this.printModule&&this.printModule.print(e)},o.prototype.export=function(e,i,a,o){var n=this;return t.isNullOrUndefined(o)&&(o=!0),"PDF"!==e&&this.allowImageExport&&this.imageExportModule?new Promise(function(t,a){t(n.imageExportModule.export(e,i,o))}):this.allowPdfExport&&this.pdfExportModule?new Promise(function(t,l){t(n.pdfExportModule.export(e,i,o,a))}):null},o.prototype.findVisibleLayers=function(e,t,i,a,o,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===n&&(n=!1);for(var l,r,s,d=0,p=e;d<p.length;d++){var h=p[d];if(t=h.visible||t,h.visible){l=h.bubbleSettings,r=h.markerSettings;for(var c=0,m=s=h.navigationLineSettings;c<m.length;c++){var u=m[c];u.visible&&(o=u.highlightSettings.enable||o,n=u.selectionSettings.enable||n)}for(var g=0,y=r;g<y.length;g++){var f=y[g];if(f.visible&&(a=f.tooltipSettings.visible||a,o=f.selectionSettings.enable||o,n=f.highlightSettings.enable||n),a)break}for(var b=0,v=l;b<v.length;b++){var x=v[b];if(x.visible&&(a=x.tooltipSettings.visible||a,o=x.selectionSettings.enable||o,n=x.highlightSettings.enable||n),a)break}a=h.tooltipSettings.visible||a,o=h.selectionSettings.enable||o,n=h.highlightSettings.enable||n}if(t&&i&&a)break}return{layer:t,bubble:i,tooltip:a,selection:o,highlight:n}},o.prototype.getGeoLocation=function(e,t){var i=document.getElementById(this.element.id),a=t.layerX-i.offsetLeft,o=t.layerY-i.offsetTop,n=he(this,this.layersCollection[e],!1).location,l=n.x*this.scale,r=n.y*this.scale,s=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,d=this.clip(a-l,0,s-1)/s-.5,p=.5-this.clip(o-r,0,s-1)/s;return{latitude:90-360*Math.atan(Math.exp(2*-p*Math.PI))/Math.PI,longitude:360*d}},o.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},o.prototype.getTileGeoLocation=function(e){var t,i=document.getElementById(this.element.id),a=document.getElementById(this.element.id+"_tile_parent");return t=this.pointToLatLong(e.layerX+this.mapAreaRect.x-(a.offsetLeft-i.offsetLeft),e.layerY+this.mapAreaRect.y-(a.offsetTop-i.offsetTop)),{latitude:t.latitude,longitude:t.longitude}},o.prototype.pointToLatLong=function(e,t){var i="GoogleStaticMap"===this.layers[this.layers.length-1].layerType?0:10;t=this.zoomSettings.enable?t+i:t;var a=256*Math.pow(2,this.tileZoomLevel),o=this.clip(e-this.translatePoint.x*this.scale,0,a-1)/a-.5,n=.5-this.clip(t-this.translatePoint.y*this.scale,0,a-1)/a;return{latitude:90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI,longitude:360*o}},ui([t.Property(null)],o.prototype,"background",void 0),ui([t.Property(!1)],o.prototype,"useGroupingSeparator",void 0),ui([t.Property(null)],o.prototype,"format",void 0),ui([t.Property(null)],o.prototype,"width",void 0),ui([t.Property(null)],o.prototype,"height",void 0),ui([t.Property("MouseMove")],o.prototype,"tooltipDisplayMode",void 0),ui([t.Property(!1)],o.prototype,"allowPrint",void 0),ui([t.Property(!1)],o.prototype,"allowImageExport",void 0),ui([t.Property(!1)],o.prototype,"allowPdfExport",void 0),ui([t.Complex({},Zt)],o.prototype,"titleSettings",void 0),ui([t.Complex({},Dt)],o.prototype,"zoomSettings",void 0),ui([t.Complex({},Ht)],o.prototype,"legendSettings",void 0),ui([t.Collection([],Yt)],o.prototype,"layers",void 0),ui([t.Collection([],Ot)],o.prototype,"annotations",void 0),ui([t.Complex({},wt)],o.prototype,"margin",void 0),ui([t.Complex({color:"#DDDDDD",width:0},Lt)],o.prototype,"border",void 0),ui([t.Property("Material")],o.prototype,"theme",void 0),ui([t.Property("Mercator")],o.prototype,"projectionType",void 0),ui([t.Property(0)],o.prototype,"baseLayerIndex",void 0),ui([t.Property(null)],o.prototype,"description",void 0),ui([t.Property(1)],o.prototype,"tabIndex",void 0),ui([t.Complex({latitude:null,longitude:null},Ct)],o.prototype,"centerPosition",void 0),ui([t.Complex({},Qt)],o.prototype,"mapsArea",void 0),ui([t.Event()],o.prototype,"load",void 0),ui([t.Event()],o.prototype,"beforePrint",void 0),ui([t.Event()],o.prototype,"loaded",void 0),ui([t.Event()],o.prototype,"click",void 0),ui([t.Event()],o.prototype,"doubleClick",void 0),ui([t.Event()],o.prototype,"rightClick",void 0),ui([t.Event()],o.prototype,"resize",void 0),ui([t.Event()],o.prototype,"tooltipRender",void 0),ui([t.Event()],o.prototype,"legendRendering",void 0),ui([t.Event()],o.prototype,"tooltipRenderComplete",void 0),ui([t.Event()],o.prototype,"shapeSelected",void 0),ui([t.Event()],o.prototype,"itemSelection",void 0),ui([t.Event()],o.prototype,"itemHighlight",void 0),ui([t.Event()],o.prototype,"shapeHighlight",void 0),ui([t.Event()],o.prototype,"layerRendering",void 0),ui([t.Event()],o.prototype,"shapeRendering",void 0),ui([t.Event()],o.prototype,"markerRendering",void 0),ui([t.Event()],o.prototype,"markerClusterRendering",void 0),ui([t.Event()],o.prototype,"markerClick",void 0),ui([t.Event()],o.prototype,"markerClusterClick",void 0),ui([t.Event()],o.prototype,"markerClusterMouseMove",void 0),ui([t.Event()],o.prototype,"markerMouseMove",void 0),ui([t.Event()],o.prototype,"dataLabelRendering",void 0),ui([t.Event()],o.prototype,"bubbleRendering",void 0),ui([t.Event()],o.prototype,"bubbleClick",void 0),ui([t.Event()],o.prototype,"bubbleMouseMove",void 0),ui([t.Event()],o.prototype,"animationComplete",void 0),ui([t.Event()],o.prototype,"annotationRendering",void 0),ui([t.Event()],o.prototype,"zoom",void 0),ui([t.Event()],o.prototype,"pan",void 0),o=ui([t.NotifyPropertyChanges],o)}(t.Component),yi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},fi=function(){function e(e){this.id="",this.maps=e,this.bubbleCollection=[]}return e.prototype.renderBubble=function(e,i,a,o,n,l,r,s,d,p){var h,c,m=this,u=s.layerData,g=e.colorValuePath,y=t.isNullOrUndefined(g)?i[g]:g.indexOf(".")>-1?w(i,e.colorValuePath):i[g],f=t.isNullOrUndefined(g)?Number(i[g]):g.indexOf(".")>-1?Number(w(i,e.colorValuePath)):Number(i[g]),b=t.isNullOrUndefined(e.valuePath)?Number(i[e.valuePath]):e.valuePath.indexOf(".")>-1?Number(w(i,e.valuePath)):Number(i[e.valuePath]);if(isNaN(b)&&isNaN(f)&&t.isNullOrUndefined(y))return null;var v=oe(e.minRadius,e.maxRadius,b,o.min,o.max),x=new di(this.maps).getColorByValue(e.colorMapping,f,y);c="[object Object]"!==Object.prototype.toString.call(x)||t.isNullOrUndefined(x.fill)?a:x.fill,h="[object Object]"!==Object.prototype.toString.call(x)||t.isNullOrUndefined(x.opacity)?e.opacity:x.opacity;var S=[[]];this.maps.translateType="bubble";for(var O=0,_=0,M=0,L=0,C=u.length;L<C;L++){var P=u[L];P=P.property;var I=ie(i[s.shapeDataPath],s.shapePropertyPath,P);if((!t.isNullOrUndefined(i[s.shapeDataPath])&&isNaN(i[s.shapeDataPath])?i[s.shapeDataPath].toLowerCase():i[s.shapeDataPath])===(!t.isNullOrUndefined(P[I])&&isNaN(P[I])?P[I].toLowerCase():P[I]))if("Point"===u[L].type)S.push(this.getPoints(u[L],[]));else if(u[L]._isMultiPolygon)for(var T=u[L],k=0;k<T.length;k++)S.push(this.getPoints(T[k],[])),_<(M=S[S.length-1].length)&&(_=M,O=S.length-1);else S.push(this.getPoints(u[L],[])),_<(M=S[S.length-1].length)&&(_=M,O=S.length-1)}var N,E,z=this.maps.projectionType,j=ne(S[O],z);if(e.visible){if(t.isNullOrUndefined(j)){var B=S.length-1;if(!S[B].x||!S[B].y)return;if(E={cancel:!1,name:"bubbleRendering",border:e.border,cx:S[B].x,cy:S[B].y,data:i,fill:c,maps:this.maps.isBlazor?null:this.maps,radius:v},this.maps.isBlazor){E.maps;var F=yi(E,["maps"]);E=F}}else N="Mercator"===this.maps.projectionType?j.y:-j.y,E={cancel:!1,name:"bubbleRendering",border:e.border,cx:j.x,cy:N,data:i,fill:c,maps:this.maps.isBlazor?null:this.maps,radius:v};this.maps.trigger("bubbleRendering",E,function(i){if(!E.cancel){var a;if("Circle"===e.bubbleType){var o=new rt(p,E.fill,E.border,h,0,0,E.radius,null);a=R(m.maps,o,d)}else{var c="Mercator"===m.maps.projectionType?E.cy-v:E.cy+v,u=new lt(p,E.fill,E.border,h,new mt(0,0,2*v,2*v),2,2);E.cx-=v,E.cy=c,a=U(m.maps,u,d)}A(m.maps.selectedBubbleElementId,m.maps.bubbleSelectionClass,a,"BubbleselectionMapStyle"),m.bubbleCollection.push({LayerIndex:r,BubbleIndex:n,DataIndex:l,element:a,center:{x:E.cx,y:E.cy}});var g,y=0!==s.animationDuration||t.isNullOrUndefined(m.maps.zoomModule);g=m.maps.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(m.maps.zoomModule)?ce(m.maps,s,y):he(m.maps,s,y);var f=e.dataSource,b=g.scale,x=g.location,S=new ct(m.maps.isTileMap?E.cx:(E.cx+x.x)*b,m.maps.isTileMap?E.cy:(E.cy+x.y)*b);a.setAttribute("transform","translate( "+S.x+" "+S.y+" )");var O=f.length-1===l?"bubble":null;"Square"===e.bubbleType?(S.x+=v,S.y+=v*("Mercator"===m.maps.projectionType?1:-1)):v=0,e.animationDuration>0&&Pe(a,e.animationDelay,e.animationDuration,S,m.maps,O,v)}})}},e.prototype.getPoints=function(e,i){return t.isNullOrUndefined(e.map)?i=e.point:e.map(function(e,t){i.push(new et(e.point.x,e.point.y))}),i},e.prototype.bubbleClick=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var a=this.getbubble(i);if(!t.isNullOrUndefined(a)){var o={cancel:!1,name:"bubbleClick",data:a,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){o.maps;o=yi(o,["maps"])}this.maps.trigger("bubbleClick",o)}}},e.prototype.getbubble=function(e){var t=e.split("_LayerIndex_"),i=parseInt(t[1].split("_")[0],10),a=this.maps.layers[i];if(e.indexOf("_BubbleIndex_")>-1){var o=parseInt(t[1].split("_BubbleIndex_")[1],10),n=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10);if(!isNaN(o))return a.bubbleSettings[o].dataSource[n]}return null},e.prototype.bubbleMove=function(e){var i=e.target.id;if(-1!==i.indexOf("_LayerIndex_")){var a=this.getbubble(i);if(!t.isNullOrUndefined(a)){var o={cancel:!1,name:"bubbleMouseMove",data:a,maps:this.maps,target:i,x:e.clientX,y:e.clientY};if(this.maps.isBlazor){o.maps;o=yi(o,["maps"])}this.maps.trigger("bubbleMouseMove",o)}}},e.prototype.getModuleName=function(){return"Bubble"},e.prototype.destroy=function(e){},e}(),bi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},vi=function(){function e(e){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0},this.maps=e,this.dataLabelCollections=[]}return e.prototype.getDataLabel=function(e,i,a,o){for(var n,l,r=0;r<e.length;r++){var s=e[r],d=void 0;if(d=!t.isNullOrUndefined(s[o])&&isNaN(s[o])?s[o].toLowerCase():s[o],a=t.isNullOrUndefined(a)?a:a.toString(),l=t.isNullOrUndefined(a)?a:a.toLowerCase(),d===l){n=s;break}}return n},e.prototype.renderLabel=function(e,i,a,o,n,l,r,s){var d,p,h,c,m,u,g,y,f=this,b=e.dataLabelSettings,v=e.dataLabelSettings.textStyle,x=e.dataLabelSettings,_=e.dataLabelSettings.labelPath,M=[[]],L=0,P=0,w=a,I="",T=0,k=!1,N=a.properties,E=this.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+r+"_LabelIndex_"+r,z=new et(0,0),j=o[r];v.fontFamily="material"!==this.maps.theme.toLowerCase()?this.maps.themeStyle.labelFontFamily:v.fontFamily,a=j.property;var A,B,F="[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)?e.shapePropertyPath:[e.shapePropertyPath],R=!1,U=0!==e.animationDuration||t.isNullOrUndefined(this.maps.zoomModule),Z=this.maps.isTileMap?new Object:this.maps.zoomSettings.zoomFactor>1&&!t.isNullOrUndefined(this.maps.zoomModule)?ce(this.maps,e,U):he(this.maps,e,U),D=this.maps.isTileMap?this.maps.scale:Z.scale,V=this.maps.isTileMap?this.maps.translatePoint:Z.location,H=this.maps.zoomTranslatePoint,G=t.isNullOrUndefined(this.maps.scale)?1:Math.floor(this.maps.scale),W=this.maps.zoomSettings.enable?!t.isNullOrUndefined(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable;this.maps.translateType="labels";for(Y=0;Y<F.length&&!(N[F[Y]]&&(A=F[Y],c=this.getDataLabel(e.dataSource,e.shapeDataPath,w.properties[A],e.shapeDataPath)));Y++);if(c=this.getDataLabel(e.dataSource,e.shapeDataPath,w.properties[A],e.shapeDataPath),!t.isNullOrUndefined(j.property))if(M=[[]],o[r]._isMultiPolygon||"Point"===o[r].type){var q=o[r];if("Point"===q.type){R=!0;var X=[];X.push(this.getPoint(o,[])),P<(T=(M=X)[M.length-1].length)&&(P=T,L=M.length-1)}for(var Y=0;Y<q.length;Y++)M.push(this.getPoint(q[Y],[])),P<(T=M[M.length-1].length)&&(P=T,L=M.length-1)}else M.push(this.getPoint(o[r],[])),P<(T=M[M.length-1].length)&&(P=T,L=M.length-1);if(I=t.isNullOrUndefined(c)?w.properties[_]:t.isNullOrUndefined(c[_])?c[e.shapeDataPath]:c[e.shapeDataPath].toString(),"[object Array]"===Object.prototype.toString.call(e.shapePropertyPath)&&t.isNullOrUndefined(I)&&0===e.dataSource.length)for(var J=0;J<e.shapePropertyPath.length;J++)if(w.properties[e.shapePropertyPath[J]]){I=w.properties[e.shapePropertyPath[J]];break}t.isNullOrUndefined(I)&&""!==e.dataLabelSettings.template&&0===e.dataSource.length&&(I=w.properties[e.shapePropertyPath]);var Q=I,K=this.maps.projectionType,$=u=R?{x:M[L][r].x,y:M[L][r].y,rightMin:0,rightMax:0,leftMin:0,leftMax:0,points:M[L][r],topMax:0,topMin:0,bottomMax:0,bottomMin:0,height:0}:ne(M[L],K);if(!t.isNullOrUndefined(I)&&!t.isNullOrUndefined(u)){if(W&&G>1&&!this.maps.zoomNotApplied&&""===b.template){if(i>0)for(var ee=0;ee<this.maps.zoomLabelPositions.length;ee++)if(this.maps.zoomLabelPositions[ee].dataLabelText===I){m=r,r=ee,k=!0;break}g=u.x,y=u.y,u.x=(u.x+H.x)*D,u.y=(u.y+H.y)*D}u.y="Mercator"===this.maps.projectionType?u.y:-u.y,t.isNullOrUndefined(this.maps.format)||isNaN(parseFloat(I))||this.maps.useGroupingSeparator&&(I=ge(this.maps,parseFloat(I)),t.isNullOrUndefined(c)||(c[_]=I));var te={name:"dataLabelRendering",maps:this.maps,cancel:!1,border:b.border,datalabel:b,fill:b.fill,template:b.template,text:I};if(this.maps.isBlazor){te.maps,te.datalabel;var ie=bi(te,["maps","datalabel"]);te=ie}this.maps.trigger("dataLabelRendering",te,function(e){if(!te.cancel){var a=[],o=W&&G>1&&!f.maps.zoomNotApplied&&f.maps.zoomShapeCollection.length>r?f.maps.zoomShapeCollection[r].width:(u.rightMax.x-u.leftMax.x)*D;t.isNullOrUndefined(f.maps.dataLabelShape)||(B=$.rightMax.x-$.leftMax.x,f.maps.dataLabelShape.push(B)),te.text===I||te.cancel||(I=te.text);var b=S(I,v),_=I,P=b,T=u.y-b.height/4,N=u.y+b.height/4,j=(u.y+V.y)*D-b.height/4,A=(u.y+V.y)*D+b.height/4;if(a=ae(M[L],T,N),!R&&a.length>5&&"MultiPolygon"!==w.geometry.type&&"MultiPolygon"!==w.type){var F=ne(a,K);W&&G>1&&!f.maps.zoomNotApplied&&""===te.template&&(F.x=(f.maps.zoomLabelPositions[r].location.x+H.x)*D,F.y=(f.maps.zoomLabelPositions[r].location.y+H.y)*D),g=F.x,u.x=F.x,o=W&&G>1&&!f.maps.zoomNotApplied&&f.maps.zoomShapeCollection.length>r?f.maps.zoomShapeCollection[r].width:(F.rightMax.x-F.leftMax.x)*D}var U=(u.x+V.x)*D+b.width/2,Z=(u.x+V.x)*D-b.width/2;f.value[r]={rightWidth:U,leftWidth:Z,heightTop:j,heightBottom:A};var q;if(""!==te.template){var X=(d=ye(te.template))?d(t.isNullOrUndefined(c)?w.properties:c,null,null,f.maps.element.id+"_LabelTemplate",!1):document.createElement("div");X.innerHTML=d?"":te.template,(q=C(X,E,t.isNullOrUndefined(c)?w.properties:c,r,f.maps)).style.left=Math.abs(f.maps.baseMapRectBounds.min.x-u.x)*D+"px",q.style.top=Math.abs(f.maps.baseMapRectBounds.min.y-u.y)*D+"px",l.appendChild(q)}else{if("Trim"===x.smartLabelMode&&(P=S(_=re(o,I,v),v),p=new at(E,z.x,z.y,"middle",_,"","")),"None"===x.smartLabelMode&&(p=new at(E,z.x,z.y,"middle",I,"","")),"Hide"===x.smartLabelMode&&(I=o>=b.width?I:"",p=new at(E,z.x,z.y,"middle",I,"","")),I=p.text,"Hide"===x.intersectionAction){for(var Y=0;Y<s.length;Y++)if(!t.isNullOrUndefined(s[Y])){if(!(f.value[r].leftWidth>s[Y].rightWidth||f.value[r].rightWidth<s[Y].leftWidth||f.value[r].heightTop>s[Y].heightBottom||f.value[r].heightBottom<s[Y].heightTop)){I="";break}I=I}s.push(f.value[r]),p=new at(E,z.x,z.y,"middle",I,"","")}if("Trim"===x.intersectionAction){for(var J=0;J<s.length;J++)if(!t.isNullOrUndefined(s[J]))if(s[J].rightWidth<f.value[r].leftWidth||s[J].leftWidth>f.value[r].rightWidth||s[J].heightBottom<f.value[r].heightTop||s[J].heightTop>f.value[r].heightBottom)_=I,0;else{if(f.value[r].leftWidth>s[J].leftWidth){_=re((o=s[J].rightWidth-f.value[r].leftWidth)-(f.value[r].rightWidth-f.value[r].leftWidth),I,v);break}if(f.value[r].leftWidth<s[J].leftWidth){o=f.value[r].rightWidth-s[J].leftWidth,_=re(Math.abs(o-(f.value[r].rightWidth-f.value[r].leftWidth)),I,v);break}}P=S(_,v),s.push(f.value[r]),p=new at(E,z.x,z.y,"middle",_,"","")}if("None"===x.intersectionAction&&(p=new at(E,z.x,z.y,"middle",I,"","")),_.length>1){var ee=te.border;if(ee.width>1){var ie=te.fill,oe=x.opacity,le=x.rx,se=x.ry,de=void 0,pe=void 0;W&&G>1&&!f.maps.zoomNotApplied?(de=u.x-b.width/2,pe=u.y-b.height/2-5):(de=(u.x+V.x)*D-b.width/2,pe=(u.y+V.y)*D-b.height/2);var he=new lt(f.maps.element.id+"_LayerIndex_"+i+"_shapeIndex_"+r+"_rectIndex_"+r,ie,ee,oe,new mt(de,pe,b.width,b.height),le,se),ce=f.maps.renderer.drawRectangle(he);n.appendChild(ce)}}h=O(p,v,v.color||f.maps.themeStyle.dataLabelFontColor,n),W&&G>1&&!f.maps.zoomNotApplied?(h.setAttribute("transform","translate( "+u.x+" "+u.y+" )"),u.x=g,u.y=y):h.setAttribute("transform","translate( "+(u.x+V.x)*D+" "+((u.y+V.y)*D+P.height/4)+" )"),n.appendChild(h)}f.dataLabelCollections.push({location:{x:u.x,y:u.y},element:t.isNullOrUndefined(q)?h:q,layerIndex:i,shapeIndex:k?m:r,labelIndex:k?m:r,dataLabelText:Q}),l.childElementCount>0&&!f.maps.element.contains(l)&&document.getElementById(f.maps.element.id+"_Secondary_Element").appendChild(l)}})}},e.prototype.getPoint=function(e,t){return e.map(function(e,i){t.push(new et(e.point.x,e.point.y))}),t},e.prototype.getModuleName=function(){return"DataLabel"},e.prototype.destroy=function(e){},e}(),xi=function(){function e(e){this.maps=e}return e.prototype.renderNavigation=function(e,i,a){var o,n;n=e.navigationLineSettings;for(var l,r,s,d,p,m,u,g,y,f,b,v,x,S,O,_,M,L,C,P,w=[],I=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+a+"_line_Group"}),T=0;T<n.length;T++){if(r=n[T].properties.latitude,l=n[T].properties.longitude,s=n[T].properties.visible,d=n[T].angle,p=n[T].width||1,m=n[T].color,u=n[T].properties.dashArray,x=n[T].properties.arrowSettings,f=!t.isNullOrUndefined(x)&&x.properties.showArrow,l.length===r.length&&s)for(var k=0;k<l.length;k++){var N=this.maps.isTileMap?c(new et(l[k],r[k]),i,this.maps.tileTranslatePoint,!0):h(r[k],l[k],i,e,this.maps);w.push(N)}C=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+a+"_NavigationGroup"+T});for(var E=0;E<w.length-1;E++){d=1<(d=-1>d?-1:d)?1:d;var z=this.maps.element.id+"_LayerIndex_"+a+"_NavigationIndex_"+T+"_Line"+E,j=this.convertRadius(w[E],w[E+1]);if(d<=1&&d>0&&(y=0,w[E].x>w[E+1].x&&(y=1)),d>=-1&&d<0&&(y=1,w[E].x>w[E+1].x&&(y=0)),w[E].x!==w[E+1].x){if(f){b=x.properties.color,v=x.properties.size,L=void 0===x.properties.offSet?0:x.properties.offSet;var B=Math.round(v/2);O="Start"===(S=x.properties.position)?"url(#triangle"+T+")":null,_="End"===S?"url(#triangle"+T+")":null,0!==M&&0===d&&(M="Start"===S?L:-L),M=t.isNullOrUndefined(M)?0:M;var F=this.maps.element.id+"_triangle",R=this.maps.renderer.createDefs();R.innerHTML+='<marker id="triangle'+T+'"></marker>';var U=R.querySelector("#triangle"+T);U.setAttribute("markerWidth",v.toString()),U.setAttribute("markerHeight",v.toString()),U.setAttribute("refX",(B-M).toString()),U.setAttribute("refY",B.toString()),U.setAttribute("orient","auto"),g=new ot(F,b,p,m,1,u,"M 0,0  L 0,"+v+" L "+B+", "+B+" Z"),o=this.maps.renderer.drawPath(g),U.appendChild(o),R.appendChild(U),C.appendChild(R)}P=0===(d=Math.abs(d))?"M "+w[E].x+","+w[E].y+"L "+w[E+1].x+","+w[E+1].y+" ":"M "+w[E].x+","+w[E].y+" A "+(j/2+(1-d)*j/(10*d))+" "+(j/2+(1-d)*j/(10*d))+" 0,0,"+y+" , "+w[E+1].x+","+w[E+1].y+" ",g=new ot(z,"none",p,m,1,u,P),o=this.maps.renderer.drawPath(g),t.isNullOrUndefined(S)||("Start"===S?o.setAttribute("marker-start",O):o.setAttribute("marker-end",_)),A(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,o,"navigationlineselectionMapStyle"),C.appendChild(o),I.appendChild(C)}}w=[]}return I},e.prototype.convertRadius=function(e,t){var i=t.x-e.x,a=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))},e.prototype.getModuleName=function(){return"NavigationLine"},e.prototype.destroy=function(e){},e}(),Si=function(){function e(e){this.legendBorderRect=new mt(0,0,0,0),this.totalPages=[],this.page=0,this.currentPage=0,this.legendItemRect=new mt(0,0,0,0),this.heightIncrement=0,this.widthIncrement=0,this.textMaxWidth=0,this.shapeHighlightCollection=[],this.legendHighlightCollection=[],this.shapePreviousColor=[],this.selectedNonLegendShapes=[],this.shapeToggled=!0,this.legendElement=null,this.maps=e,this.addEventListener()}return e.prototype.renderLegend=function(){this.legendRenderingCollections=[],this.legendCollection=[],this.totalPages=[],this.widthIncrement=0,this.heightIncrement=0,this.defsElement=this.maps.renderer.createDefs(),this.maps.svgObject.appendChild(this.defsElement),this.calculateLegendBounds(),this.drawLegend()},e.prototype.calculateLegendBounds=function(){var e=this,i=this.maps,a=i.legendSettings;this.legendCollection=[];var o=i.mapAreaRect.y;if(this.legendRenderingCollections=[],Array.prototype.forEach.call(i.layersCollection,function(i,o){if(!t.isNullOrUndefined(i.shapeData)){var n=i.shapeData.features,l=i.shapeDataPath,r=i.shapePropertyPath,s=i.dataSource,d=void 0,p=void 0;if("Layers"===a.type&&i.visible)d=i.shapeSettings.colorValuePath,p=i.shapeSettings.colorMapping,e.getLegends(o,n,p,s,l,d,r);else if("Bubbles"===a.type)for(var h=0,c=i.bubbleSettings;h<c.length;h++){var m=c[h];m.visible&&(d=m.colorValuePath,p=m.colorMapping,s=m.dataSource,e.getLegends(o,n,p,s,l,d,r))}else e.getMarkersLegendCollections(o,i.markerSettings)}}),this.legendCollection.length>0)for(U=0;U<this.legendCollection.length;U++){var n={name:"legendRendering",cancel:!1,fill:(H=this.legendCollection[U]).fill,shape:a.shape,shapeBorder:a.shapeBorder,text:"number"==typeof H.text?H.text.toString():H.text};i.trigger("legendRendering",n),H.fill=n.fill,H.shape=n.shape,H.shapeBorder=n.shapeBorder,H.text=n.text,n.cancel&&(this.legendCollection.splice(U,1),U--)}var l=i.legendSettings.title.text,r=i.legendSettings.titleStyle;if(this.legendCollection.length>0){var s,d,p=a.mode,h=0,c=0,m=0,u=0,g=a.shapePadding,y=a.shapeHeight,f=a.shapeWidth,b=[],v=[],x=a.position,O=a.labelDisplayMode,_="None"===a.orientation?"Top"===x||"Bottom"===x?"Horizontal":"Vertical":a.orientation,M=a.width.length>1?a.width.indexOf("%")>-1?i.availableSize.width/100*parseInt(a.width,10):parseInt(a.width,10):null,L=a.height.length>1?a.height.indexOf("%")>-1?i.availableSize.height/100*parseInt(a.height,10):parseInt(a.height,10):null,C=0,P=0,w=S(l,r);if("Interactive"===p){var I=a.textStyle,T=void 0,k=void 0,N=this.legendCollection.length;T="Horizontal"===_?t.isNullOrUndefined(M)?i.mapAreaRect.width/N:M/N:t.isNullOrUndefined(M)?25:M,k="Horizontal"===_?t.isNullOrUndefined(L)?25:L:t.isNullOrUndefined(L)?i.mapAreaRect.height/N:L/N,C=0,P=w.height+10;for(var E=a.labelPosition,z=0,j=0,A=0,B=0,F=0,R=0,U=0;U<this.legendCollection.length;U++){C="Horizontal"===_?C+T:C,P="Horizontal"===_?P:P+k;var Z=this.legendCollection[U].text,D=new $e(0,0);"None"===O?D=S(Z,I):"Trim"===O?D=S(Z=re("Horizontal"===_?T:k,Z,I),I):Z="",F=Math.max(F,D.height),R=Math.max(R,D.width),D.width>0&&D.height>0&&("Horizontal"===_?(z=C+T/2,j="After"===E?P+k+D.height/2+10:P-10):(z="After"===E?C-D.width/2-10:C+T+D.width/2+10,j=P+k/2+D.height/4)),0===U?(A="Horizontal"===_?C:"After"===E?z-D.width/2:C,B="Horizontal"===_?"After"===E?P:j-D.height/2:P,1===this.legendCollection.length&&(M="Horizontal"===_?Math.abs(C+T-A):T+R+10,L="Horizontal"===_?k+F/2+10:Math.abs(P+k-B))):U===this.legendCollection.length-1&&(M="Horizontal"===_?Math.abs(C+T-A):T+R+10,L="Horizontal"===_?k+F/2+10:Math.abs(P+k-B)),this.legendRenderingCollections.push({fill:this.legendCollection[U].fill,x:C,y:P,width:T,height:k,text:Z,textX:z,textY:j,textWidth:D.width,textHeight:D.height,shapeBorder:this.legendCollection[U].shapeBorder})}1===this.legendCollection.length&&(L=k,M=T),this.legendItemRect={x:A,y:B,width:M,height:L}}else{M=t.isNullOrUndefined(M)?i.mapAreaRect.width:M,L=t.isNullOrUndefined(L)?i.mapAreaRect.height:L;var V=0;this.page=0;for(U=0;U<this.legendCollection.length;U++){var H=this.legendCollection[U];t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]});var G=S(H.text,a.textStyle);if(this.textMaxWidth=Math.max(this.textMaxWidth,G.width),0===U)C=h=10+f/2,P=c=o+w.height+(y>G.height?y/2:G.height/4);else{var W=G.height>y?G.height:y;if("Horizontal"===_){var q=v[V-1].x+v[V-1].width+10+f;if(q+g+G.width>M){var X=(v[V-1].y>b[V-1].y+y/2?v[V-1].y:b[V-1].y+y/2)+o;X+W>L?(this.getPageChanged(),V=0,b=[],v=[],h=C,c=P):(h=b[0].x,c=X+W/2)}else h=q-f/2,c=b[V-1].y}else{var Y=v[V-1].y>b[V-1].y+y/2?v[V-1].y:b[V-1].y+y/2;if(Y+o+W>L){var J=v[V-1].x+this.textMaxWidth+10;J+g+G.width>M?(h=C,c=P,v=[],b=[],this.getPageChanged(),V=0):(h=J+f/2,c=b[0].y)}else h=b[V-1].x,c=Y+o+y/2}}m=h+f/2+g,u=c+G.height/4,b.push({x:h,y:c}),v.push({x:m,y:u,width:G.width,height:G.height/2}),this.totalPages[this.page].Collection.push({DisplayText:H.text,ImageSrc:H.imageSrc,Shape:{x:h,y:c},Text:{x:m,y:u},Fill:H.fill,legendShape:H.shape,shapeBorder:H.shapeBorder,idIndex:U,Rect:{x:b[V].x-f/2,y:b[V].y-y/2<u-G.height?b[V].y-y/2:u-G.height,width:Math.abs(b[V].x-f/2-(m+G.width)),height:y>G.height?y:G.height}}),V++}var Q=this.totalPages[0].Collection;Array.prototype.forEach.call(Q,function(t,i){var a=new mt(t.Rect.x,t.Rect.y,t.Rect.width,t.Rect.height);0===i&&(s=a.x,d=a.y),e.widthIncrement=Math.max(e.widthIncrement,Math.abs(s-(a.x+a.width))),e.heightIncrement=Math.max(e.heightIncrement,Math.abs(d-(a.y+a.height)))}),M=this.widthIncrement<M?this.widthIncrement:M,L=this.heightIncrement<L?this.heightIncrement:L,this.legendItemRect={x:Q[0].Rect.x,y:Q[0].Rect.y,width:M,height:L}}}},e.prototype.getLegends=function(e,t,i,a,o,n,l){this.getRangeLegendCollection(e,t,i,a,o,n,l),this.getEqualLegendCollection(e,t,i,a,o,n,l),this.getDataLegendCollection(e,t,i,a,o,n,l)},e.prototype.getPageChanged=function(){this.page++,t.isNullOrUndefined(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},e.prototype.legendTextTrim=function(e,t,i,a){var o=t,n=S(t,i).width,l=a-n;if(a>e)for(var r=t.length-1;r>=0;--r)if(l+(n=S(o=t.substring(0,r)+"...",i).width)<=e||o.length<4)return o.length<4&&(o=" "),o;return o},e.prototype.drawLegend=function(){var e,t=this.maps,i=t.legendSettings,a=t.renderer,o=i.textStyle;if(this.legendGroup=a.createGroup({id:t.element.id+"_Legend_Group"}),"Interactive"===i.mode)for(var n=0;n<this.legendRenderingCollections.length;n++){var l=t.element.id+"_Legend_Index_"+n,r=t.element.id+"_Legend_Index_"+n+"_Text",s=this.legendRenderingCollections[n],d=new mt(s.x,s.y,s.width,s.height);0===n&&this.renderLegendBorder();var p=new et(s.textX,s.textY);o.color=null!==o.color?o.color:this.maps.themeStyle.legendTextColor;var h=new lt(l,s.fill,s.shapeBorder,i.opacity,d);e=new at(r,p.x,p.y,"middle",s.text,"",""),o.fontFamily=t.themeStyle.fontFamily||o.fontFamily,o.size=t.themeStyle.legendFontSize||o.size,O(e,o,o.color,this.legendGroup),this.legendGroup.appendChild(a.drawRectangle(h)),this.legendToggle()}else this.drawLegendItem(this.currentPage)},e.prototype.drawLegendItem=function(e){var i,a=this.maps,o=a.legendSettings,n=new $e(o.shapeWidth,o.shapeHeight),l=a.renderer;if(e>=0&&e<this.totalPages.length){Se(this.legendGroup.id,this.maps.element.id)&&t.remove(Se(this.legendGroup.id,this.maps.element.id));for(var r=0;r<this.totalPages[e].Collection.length;r++){var s=this.totalPages[e].Collection[r],d=s.shapeBorder,p=l.createGroup({id:a.element.id+"_Legend_Index_"+s.idIndex}),h=s.DisplayText,c="Markers"===o.type?t.isNullOrUndefined(s.ImageSrc)?o.shape:"Image":s.legendShape,m="HorizontalLine"===o.shape||"VerticalLine"===o.shape||"Cross"===o.shape?t.isNullOrUndefined(o.fill)?"#000000":o.fill:d.color,u=("HorizontalLine"===o.shape||"VerticalLine"===o.shape||"Cross"===o.shape)&&0===d.width?1:d.width,g=a.element.id+"_Legend_Shape_Index_"+s.idIndex,y=a.element.id+"_Legend_Text_Index_"+s.idIndex,f=s.Shape,b=s.Text,v=(t.isNullOrUndefined(s.ImageSrc)?o.shape:s.ImageSrc,new ot(g,s.Fill,u,m,o.opacity,""));o.textStyle.color=null!==o.textStyle.color?o.textStyle.color:this.maps.themeStyle.legendTextColor,o.textStyle.fontFamily=a.themeStyle.fontFamily||o.textStyle.fontFamily,o.textStyle.size=a.themeStyle.legendFontSize||o.textStyle.size,0===r&&this.renderLegendBorder(),p.appendChild(Ne(f,c,n,s.ImageSrc,v));var x=s.Rect.x+s.Rect.width;if(x>this.legendBorderRect.width&&(h=this.legendTextTrim(this.legendBorderRect.width,h,o.textStyle,x)),i=new at(y,b.x,b.y,"start",h,"",""),O(i,o.textStyle,o.textStyle.color,p),this.legendGroup.appendChild(p),r===this.totalPages[e].Collection.length-1){var _=void 0;if(0!==this.page){var M=e+1+"/"+this.totalPages.length,L=o.textStyle,C=S(M,L),P=this.legendItemRect.x+this.legendItemRect.width-C.width-20-10,w=this.legendItemRect.x+this.legendItemRect.width,I=this.legendItemRect.y+this.legendItemRect.height+2.5+10,T=w-10-C.width/2-5;_=l.createGroup({id:a.element.id+"_Legend_Paging_Group"});var k=l.createGroup({id:a.element.id+"_Legend_Left_Paging_Group"}),N=l.createGroup({id:a.element.id+"_Legend_Right_Paging_Group"}),E=" M "+w+" "+I+" L "+(w-10)+" "+(I-5)+" L "+(w-10)+" "+(I+5)+" z ",z=" M "+P+" "+I+" L "+(P+10)+" "+(I-5)+" L "+(P+10)+" "+(I+5)+" z ",j=new ot(a.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",z);k.appendChild(l.drawPath(j));var A=new lt(a.element.id+"_Left_Page_Rect","transparent",{},1,new mt(P-5,I-10,20,20),null,null,"","");k.appendChild(l.drawRectangle(A)),this.wireEvents(k);var B=new ot(a.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",E);N.appendChild(l.drawPath(B));var F=new lt(a.element.id+"_Right_Page_Rect","transparent",{},1,new mt(w-10,I-5,10,10),null,null,"","");N.appendChild(l.drawRectangle(F)),this.wireEvents(N),_.appendChild(k),_.appendChild(N);var R={id:a.element.id+"_Paging_Text",x:T,y:I+C.height/4,fill:"#a6a6a6","font-size":"14px","font-style":L.fontStyle,"font-family":L.fontFamily,"font-weight":L.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};_.appendChild(l.createText(R,M)),this.legendGroup.appendChild(_)}this.legendToggle()}}}},e.prototype.legendHighLightAndSelection=function(e,i){var a,o,n,l;l="Default"===this.maps.legendSettings.mode?document.getElementById(e.id.replace("Shape","Text")):document.getElementById(e.id+"_Text");var r,s=this.maps.legendModule.legendCollection,d=this.maps.layers[s[0].data[0].layerIndex].selectionSettings.enableMultiSelect,p=0,h=!0,c=parseFloat(e.id.charAt(e.id.length-1));this.updateLegendElement();var m=this.maps.toggledLegendId.indexOf(c);if(this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===i&&-1!==m){var u=this.getIndexofLegend(this.legendHighlightCollection,e);return-1!==u&&this.legendHighlightCollection.splice(u,1),this.removeLegendHighlightCollection(),null}if("selection"===i){if(this.shapeHighlightCollection=[],this.maps.shapeSelections||d||(this.removeAllSelections(),this.maps.shapeSelections=!0),this.maps.legendSelectionCollection.length>0&&(d||this.maps.shapeSelections))for(y=0;y<this.maps.legendSelectionCollection.length;y++){if(e===this.maps.legendSelectionCollection[y].legendElement){this.maps.legendSelectionCollection[y].legendElement=e,h=!1,this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[y].legendElement),this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(c),1),this.maps.legendSelectionCollection.splice(y,1),this.maps.legendSelection=!(this.maps.legendSelectionCollection.length>0);break}if(!d)if(this.maps.legendSelectionCollection.length>1){for(var g=0;g<this.maps.legendSelectionCollection.length;g++)this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[g].legendElement);this.maps.legendSelectionCollection=[]}else this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[y].legendElement),this.maps.legendSelectionCollection.splice(y,1)}}else{if(this.maps.legendSelectionCollection.length>0)for(var y=0;y<this.maps.legendSelectionCollection.length;y++){if((e.id.indexOf("_Legend_Shape")>-1||e.id.indexOf("_Legend_Index"))&&e===this.maps.legendSelectionCollection[y].legendElement){h=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(h)for(var f=0;f<s.length;f++){var b="Interactive"===this.maps.legendSettings.mode?parseFloat(e.id.split("_Legend_Index_")[1]):parseFloat(e.id.split("_Legend_Shape_Index_")[1]);if(l.textContent===s[f].text&&s[f].data.length>0&&b===f){var v=this.maps.layers[s[f].data[0].layerIndex],x=void 0,S=void 0,O=void 0;if(t.isNullOrUndefined(v)||(x="selection"===i?v.selectionSettings.enable:v.highlightSettings.enable,S=void 0,S="selection"===i?v.selectionSettings:v.highlightSettings,O=s[f].data),x)for(var _=0;_<O.length;_++){a=O[_].shapeIndex,o=O[_].layerIndex,n=O[_].dataIndex;var M=document.getElementById(this.maps.element.id+"_LayerIndex_"+o+"_shapeIndex_"+a+"_dataIndex_"+n);if(null!==M){var L=!0;if(null!==this.maps.legendSelectionCollection)for(var C=0;C<this.maps.legendSelectionCollection.length;C++)if(this.maps.legendSelectionCollection[C].legendElement===e){L=!1;break}if("highlight"===i&&L){0===_&&(this.legendHighlightCollection=[],this.pushCollection(e,this.legendHighlightCollection,s[f],v.shapeSettings)),r=this.legendHighlightCollection.length;var P=this.legendHighlightCollection[r-1].legendOldFill;this.legendHighlightCollection[r-1].MapShapeCollection.Elements.push(M);var w=this.legendHighlightCollection[r-1].MapShapeCollection.Elements.length-1,I=M.getAttribute("fill");this.legendHighlightCollection[r-1].shapeOldFillColor.push(I);var T=this.legendHighlightCollection[r-1].shapeOldFillColor[w];this.shapePreviousColor=this.legendHighlightCollection[r-1].shapeOldFillColor,this.setColor(M,t.isNullOrUndefined(S.fill)?T:S.fill,S.opacity.toString(),S.border.color,S.border.width.toString(),"highlight"),this.setColor(e,t.isNullOrUndefined(S.fill)?P:S.fill,S.opacity.toString(),S.border.color,S.border.width.toString(),"highlight")}else if("selection"===i){this.legendHighlightCollection=[],this.maps.legendSelectionClass=S,0===_&&(this.pushCollection(e,this.maps.legendSelectionCollection,s[f],v.shapeSettings),d?this.maps.selectedLegendElementId.push(f):0===this.maps.selectedLegendElementId.length?this.maps.selectedLegendElementId.push(f):(this.maps.selectedLegendElementId=[],this.maps.selectedLegendElementId.push(f))),p=this.maps.legendSelectionCollection.length;var k=void 0;k=this.maps.legendSelectionCollection[p-1].legendOldFill,this.maps.legendSelectionCollection[p-1].MapShapeCollection.Elements.push(M),this.maps.legendSelectionCollection[p-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(e,t.isNullOrUndefined(S.fill)?k:S.fill,S.opacity.toString(),S.border.color,S.border.width.toString(),"selection"),this.setColor(M,t.isNullOrUndefined(S.fill)?k:S.fill,S.opacity.toString(),S.border.color,S.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(M.getAttribute("id"))&&this.maps.selectedElementId.push(M.getAttribute("id")),_===O.length-1&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection))}}}}}},e.prototype.setColor=function(e,t,i,a,o,n){"selection"===n?(B("ShapeselectionMap","ShapeselectionMapStyle",t,i,a,o,this.maps),e.setAttribute("class","ShapeselectionMapStyle")):(e.setAttribute("fill",t),e.setAttribute("opacity",i),e.setAttribute("stroke",a),e.setAttribute("stroke-width",(Number(o)/this.maps.scale).toString()))},e.prototype.pushCollection=function(e,t,i,a){t.push({legendElement:e,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:a.opacity,shapeOldBorderColor:a.border.color,shapeOldBorderWidth:a.border.width}),length=t.length,t[length-1].MapShapeCollection={Elements:[]},t[length-1].shapeOldFillColor=[]},e.prototype.removeLegend=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.setColor(i.legendElement,i.legendOldFill,i.legendOldOpacity,i.legendOldBorderColor,i.legendOldBorderWidth,"highlight");for(var a=i.MapShapeCollection.Elements.length,o=0;o<a;o++){var n=-1!==i.legendOldFill.indexOf("url")?i.shapeOldFillColor[o]:i.legendOldFill;this.setColor(i.MapShapeCollection.Elements[o],n,i.shapeOpacity,i.shapeOldBorderColor,i.shapeOldBorderWidth,"highlight")}}},e.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},e.prototype.removeLegendSelectionCollection=function(e){if(this.maps.legendSelectionCollection.length>0){Ce(e);for(var t=this.shapesOfLegend(e),i=t.length,a=0;a<i;a++){var o=fe(t[a]);if("ShapeselectionMapStyle"===o.getAttribute("class")){Ce(o);var n=void 0;-1!==(n=this.maps.selectedElementId.indexOf(o.id))&&this.maps.selectedElementId.splice(n,1)}}}},e.prototype.removeShapeHighlightCollection=function(){if(this.shapeHighlightCollection.length>0)for(var e=0;e<this.shapeHighlightCollection.length;e++){for(var t=this.shapeHighlightCollection[e],i=!0,a=0;a<this.maps.legendSelectionCollection.length;a++)this.maps.legendSelectionCollection[a].legendElement===t.legendElement&&(i=!1);i&&this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight")}},e.prototype.shapeHighLightAndSelection=function(e,i,a,o,n){if(void 0!==i){this.updateLegendElement(),this.shapeToggled=!0;var l=this.maps.legendModule.legendCollection,r=this.legendIndexOnShape(i,n),s=this.shapeDataOnLegend(e),d=this.maps.toggledLegendId.indexOf(r.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==d){this.shapeToggled=!1,this.legendHighlightCollection=[];var p=this.getIndexofLegend(this.shapeHighlightCollection,s.LegendEle);return-1!==p&&this.shapeHighlightCollection.splice(p,1),this.removeShapeHighlightCollection(),null}if(void 0===r.currentIndex&&void 0===r.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==r.currentIndex||"selection"!==o||this.maps.layers[n].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===e.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==o||this.maps.layers[n].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===r.currentIndex){if("selection"===o&&void 0!==r.actualIndex){for(var h=0,c=0;c<s.Elements.length;c++)"ShapeselectionMapStyle"===s.Elements[c].getAttribute("class")&&h++;var m=this.maps.selectedLegendElementId.indexOf(r.actualIndex);-1===m?(this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=a):h<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&(this.maps.layers[n].selectionSettings.enableMultiSelect?h<=1&&"ShapeselectionMapStyle"===e.getAttribute("class")&&this.maps.selectedLegendElementId.splice(m,1):this.maps.selectedLegendElementId.splice(m,1))}return this.removeShapeHighlightCollection(),null}var u=l[r.actualIndex].text,g=void 0,y=void 0;"Default"===this.maps.legendSettings.mode?void 0!==r.currentIndex&&(g=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+r.actualIndex).textContent,y=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r.actualIndex)):(g=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex+"_Text").textContent,y=document.getElementById(this.maps.element.id+"_Legend_Index_"+r.actualIndex)),this.oldShapeElement=s.LegendEle;var f=this.maps.legendSelectionCollection.length;if(u===g){var b=!0;if(this.maps.legendSelectionCollection)for(c=0;c<this.maps.legendSelectionCollection.length;c++)if(this.maps.legendSelectionCollection[c].legendElement===s.LegendEle){b=!1;break}if("highlight"===o&&b){(void 0===(v=this.isTargetSelected(s,this.shapeHighlightCollection))||v&&!v.IsSelected)&&this.pushCollection(y,this.shapeHighlightCollection,l[r.actualIndex],this.maps.layers[n].shapeSettings);for(x=0;x<this.shapeHighlightCollection.length;x++)s.LegendEle.id===this.shapeHighlightCollection[x].legendElement.id&&(this.shapeHighlightCollection[x].legendElement=s.LegendEle);if(f>0)for(x=0;x<f;x++){if(s.LegendEle===this.maps.legendSelectionCollection[x].legendElement){this.maps.legendSelectionCollection[x].legendElement=s.LegendEle,this.removeShapeHighlightCollection();break}x===f-1&&(this.removeShapeHighlightCollection(),this.setColor(y,t.isNullOrUndefined(a.fill)?y.getAttribute("fill"):a.fill,a.opacity.toString(),a.border.color,a.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(y,t.isNullOrUndefined(a.fill)?y.getAttribute("fill"):a.fill,a.opacity.toString(),a.border.color,a.border.width.toString(),"highlight")}else if("selection"===o){var v=this.isTargetSelected(s,this.maps.legendSelectionCollection);if(f>0)for(var x=0;x<this.maps.legendSelectionCollection.length;)if(s.LegendEle===this.maps.legendSelectionCollection[x].legendElement||a.enableMultiSelect)x++;else{var S=this.maps.legendSelectionCollection[x],O=this.maps.selectedLegendElementId.indexOf(r.actualIndex);this.maps.selectedLegendElementId.splice(O,1),this.maps.legendSelectionCollection.splice(x,1),Ce(S.legendElement),this.maps.shapeSelections=!0,x=0}if(v&&v.IsSelected&&"ShapeselectionMapStyle"===e.getAttribute("class")){var S=this.maps.legendSelectionCollection[v.SelectionIndex],_=0;if(a.enableMultiSelect)for(c=0;c<s.Elements.length;c++)e.getAttribute("class")===s.Elements[c].getAttribute("class")&&_++;_<=1&&(a.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(r.actualIndex),1),t.isNullOrUndefined(s.LegendEle)||Ce(s.LegendEle),this.maps.legendSelectionCollection.splice(v.SelectionIndex,1),this.maps.shapeSelections=!0)}else{void 0!==v&&(!v||v.IsSelected)||t.isNullOrUndefined(y)||-1===(L=this.getIndexofLegend(this.maps.legendSelectionCollection,y))&&this.pushCollection(y,this.maps.legendSelectionCollection,l[r.actualIndex],this.maps.layers[n].shapeSettings);for(var M=!0,c=0;c<this.maps.selectedLegendElementId.length;c++)r.actualIndex===this.maps.selectedLegendElementId[c]&&(M=!1);if(M&&this.maps.selectedLegendElementId.push(r.actualIndex),this.maps.legendSelectionClass=a,this.removeLegend(this.shapeHighlightCollection),!t.isNullOrUndefined(y)){this.setColor(y,t.isNullOrUndefined(a.fill)?y.getAttribute("fill"):a.fill,a.opacity.toString(),a.border.color,a.border.width.toString(),"selection");var L=this.getIndexofLegend(this.maps.legendSelectionCollection,y);this.maps.legendSelectionCollection[L].MapShapeCollection.Elements.push(e)}this.maps.shapeSelections=!1}}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),Ce(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},e.prototype.isTargetSelected=function(e,i){for(var a,o=0;o<i.length;o++)t.isNullOrUndefined(e.LegendEle.getAttribute("id"))||e.LegendEle.getAttribute("id")!==i[o].legendElement.getAttribute("id")||(a={IsSelected:!0,SelectionIndex:o});return a},e.prototype.updateLegendElement=function(){for(var e=0;e<this.maps.legendSelectionCollection.length;e++)document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id)&&(this.maps.legendSelectionCollection[e].legendElement=document.getElementById(this.maps.legendSelectionCollection[e].legendElement.id))},e.prototype.getIndexofLegend=function(e,t){return e.map(function(e){return e.legendElement}).indexOf(t)},e.prototype.removeAllSelections=function(){for(var e=0;e<this.maps.selectedElementId.length;e++)Ce(a=document.getElementById(this.maps.selectedElementId[e]));for(var i=0;i<this.maps.selectedLegendElementId.length;i++){var a=("Interactive"===this.maps.legendSettings.mode?"container_Legend_Index_":"container_Legend_Shape_Index_")+this.maps.selectedLegendElementId[i],o=document.getElementById(a);t.isNullOrUndefined(o)||Ce(document.getElementById(a))}this.maps.legendSelectionCollection=[],this.maps.selectedLegendElementId=[],this.maps.selectedElementId=[]},e.prototype.legendIndexOnShape=function(e,i){var a,o,n,l=e[this.maps.layers[i].shapeDataPath],r=this.maps.legendSettings.mode,s=this.maps.legendModule.legendCollection;"Default"!==r||t.isNullOrUndefined(this.maps.legendModule.totalPages)||(n=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection);for(var d="Default"===r?n.length:1,p=0;p<s.length;p++){for(var h=s[p].data,c=0;c<d;c++)if("Default"!==r||s[p].text===n[c].DisplayText)for(m=0;m<h.length;m++)l===h[m].name&&(a=c);for(var m=0;m<h.length;m++)l===h[m].name&&(o=p)}return{currentIndex:a,actualIndex:o}},e.prototype.shapeDataOnLegend=function(e){for(var i,a,o,n=this.maps.legendModule.legendCollection,l=this.maps.legendSettings,r=0;r<n.length;r++){for(var s=n[r].data,d=!1,p=[],h={Elements:[]},c=0;c<s.length;c++){i=s[c].shapeIndex,a=s[c].layerIndex,o=s[c].dataIndex;var m=document.getElementById(this.maps.element.id+"_LayerIndex_"+a+"_shapeIndex_"+i+"_dataIndex_"+o);e===m&&(d=!0),p.push(m)}if(d)return t.isNullOrUndefined(h.LegendEle)&&(h.LegendEle="Default"===l.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+r):document.getElementById(this.maps.element.id+"_Legend_Index_"+r)),h.Elements=p,h}return null},e.prototype.shapesOfLegend=function(e){for(var i,a,o,n=parseFloat(e.id.charAt(e.id.length-1)),l=this.maps.legendModule.legendCollection[n].data,r=[],s=0;s<l.length;s++){i=l[s].shapeIndex,a=l[s].layerIndex,o=l[s].dataIndex;var d=document.getElementById(this.maps.element.id+"_LayerIndex_"+a+"_shapeIndex_"+i+"_dataIndex_"+o);t.isNullOrUndefined(d)||r.push(d.id)}return r},e.prototype.legendToggle=function(){var e=this.maps,i=e.legendSettings;if(this.maps.selectedLegendElementId)for(s=0;s<this.maps.selectedLegendElementId.length;s++){var a="Interactive"===i.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",o=e.svgObject.querySelector("#"+a+this.maps.selectedLegendElementId[s]);if(!t.isNullOrUndefined(o)){var n=t.isNullOrUndefined(this.maps.legendSelectionClass.fill)?o.getAttribute("fill"):this.maps.legendSelectionClass.fill;this.setColor(o,n,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection");for(var l=0;l<this.maps.legendSelectionCollection.length;l++)this.maps.legendSelectionCollection[l].legendElement.id===o.id&&(this.maps.legendSelectionCollection[l].legendElement=o);if(-1===this.getIndexofLegend(this.maps.legendSelectionCollection,o)){var r=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[s]].data[s].layerIndex;this.pushCollection(o,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[s]],this.maps.layers[r].shapeSettings)}}}if(this.maps.toggledLegendId)for(var s=0;s<this.maps.toggledLegendId.length;s++){var d="Interactive"===i.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[s]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[s],p=e.svgObject.querySelector(d);t.isNullOrUndefined(p)||p.setAttribute("fill","#E5E5E5");var h="Interactive"===i.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[s]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[s],c=e.svgObject.querySelector(h);t.isNullOrUndefined(c)||c.setAttribute("fill","#E5E5E5")}},e.prototype.renderLegendBorder=function(){var e=this.maps,t=e.legendSettings,i=t.title.text,a=t.titleStyle,o=re(this.legendItemRect.width+20,i,a),n=S(o,a);this.legendBorderRect=new mt(this.legendItemRect.x-10,this.legendItemRect.y-10-n.height,this.legendItemRect.width+20,this.legendItemRect.height+20+n.height+("Interactive"===t.mode?0:0!==this.page?10:0));var l=new lt(e.element.id+"_Legend_Border",t.background,t.border,1,this.legendBorderRect,null,null,"","");this.legendGroup.appendChild(e.renderer.drawRectangle(l)),this.getLegendAlignment(e,this.legendBorderRect.width,this.legendBorderRect.height,t),this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )"),e.svgObject.appendChild(this.legendGroup),i&&(a.color=null!==a.color?a.color:this.maps.themeStyle.legendTextColor,O(new at(e.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-n.height/2-5,"middle",o,""),a,a.color,this.legendGroup))},e.prototype.changeNextPage=function(e){this.currentPage=e.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1,this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"}),this.drawLegendItem(this.currentPage),Se(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(Se(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},e.prototype.getLegendAlignment=function(e,i,a,o){var n,l,r,s=(r=t.extend({},e.mapAreaRect,r,!0)).x,d=r.y,p=r.height,h=r.width,c=e.availableSize.width,m=e.availableSize.height;if("Float"===o.position)this.translate=o.location;else{switch(o.position){case"Top":case"Bottom":r.height=p-a,n=c/2-i/2,l="Top"===o.position?d:d+r.height,r.y="Top"===o.position?d+a+10:d;break;case"Left":case"Right":r.width=h-i,n="Left"===o.position?s:s+r.width-10,l=m/2-a/2,r.x="Left"===o.position?s+i:s}switch(o.alignment){case"Near":"Top"===o.position||"Bottom"===o.position?n=r.x:l=r.y;break;case"Far":"Top"===o.position||"Bottom"===o.position?n=c-i-10:l=m-a}(o.height||o.width)&&"Interactive"!==o.mode?e.totalRect=r:e.mapAreaRect=r,this.translate=new et(n,l)}},e.prototype.getMarkersLegendCollections=function(e,i){var a=this;Array.prototype.forEach.call(i,function(i,o){var n,l,r=i.dataSource,s=i.legendText;Array.prototype.forEach.call(r,function(r,d){var p=null,h=!!t.isNullOrUndefined(r[a.maps.legendSettings.showLegendPath])||r[a.maps.legendSettings.showLegendPath];if(i.visible&&h&&!t.isNullOrUndefined(r.latitude)&&!t.isNullOrUndefined(r.longitude)){if(i.template){var c=(n=ye(i.template))(a.maps);p=(t.isNullOrUndefined(c.childElementCount)?c[0]:c).querySelector("img").src}var m=t.isNullOrUndefined(r[s])?"":r[s];(l=!!a.maps.legendSettings.removeDuplicateLegend&&a.removeDuplicates(a.legendCollection,m))||a.legendCollection.push({layerIndex:e,markerIndex:o,dataIndex:d,fill:i.fill,text:m,imageSrc:p})}})})},e.prototype.getRangeLegendCollection=function(e,i,a,o,n,l,r){for(var s,d=this,p=0,h=this.maps.legendSettings.fill,c=[],m=this,u=0,g=a;u<g.length;u++)!function(a){if(!t.isNullOrUndefined(a.from)&&!t.isNullOrUndefined(a.to)){s=t.isNullOrUndefined(a.label)?a.from+" - "+a.to:a.label,c=[];var u=!1;Array.prototype.forEach.call(o,function(t,o){var s=l.indexOf(".")>-1?Number(w(t,l)):parseFloat(t[l]);s>=a.from&&s<=a.to&&(u=!0,c.push(d.getLegendData(e,o,t,n,i,r,s)))}),u||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var g=t.isNullOrUndefined(h)?"[object Array]"===Object.prototype.toString.call(a.color)?t.isNullOrUndefined(a.value)?m.legendGradientColor(a,p):a.color[0]:a.color:h;p++,m.getOverallLegendItemsCollection(s,g,c,a.showLegend)}}(g[u])},e.prototype.getOverallLegendItemsCollection=function(e,t,i,a){var o=[],n=this.maps.legendSettings;if(i.length>0&&a){for(var l=0;l<i.length;l++){var r=i[l];if(r.length>0)for(var s=0;s<r.length;s++)o.push(r[s]);else o.push(i[l]);o._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,e)||this.legendCollection.push({text:e,fill:t,data:o,opacity:n.opacity,borderColor:n.shapeBorder.color,borderWidth:n.shapeBorder.width})}},e.prototype.removeDuplicates=function(e,t){for(var i=!1,a=0;a<e.length;a++)if(e[a].text===t){i=!0;break}return i},e.prototype.getEqualLegendCollection=function(e,i,a,o,n,l,r){for(var s,d=this,p=this.maps.legendSettings.fill,h=[],c=[],m=[],u=[],g=this,y=0,f=a;y<f.length;y++)!function(y){if(t.isNullOrUndefined(y.value)){if(t.isNullOrUndefined(y.minOpacity)&&t.isNullOrUndefined(y.maxOpacity)&&t.isNullOrUndefined(y.value)&&t.isNullOrUndefined(y.from)&&t.isNullOrUndefined(y.to)&&!t.isNullOrUndefined(y.color)){if(Array.prototype.forEach.call(o,function(t,a){for(var o=l.indexOf(".")>-1?w(t,l):t[l],s=0;s<m.length;s++)o===m[s]&&u.push(d.getLegendData(e,a,t,n,i,r,o))}),0===m.length){var f=!1;Array.prototype.forEach.call(o,function(o,s){f=!1;for(var p=o[l],h=0;h<a.length;h++)t.isNullOrUndefined(p)||isNaN(p)?f||(f=!1):p>=a[h].from&&p<=a[h].to&&(f=!0);f||u.push(d.getLegendData(e,s,o,n,i,r,p))})}s=t.isNullOrUndefined(y.label)?"Others":y.label;var b="[object Array]"===Object.prototype.toString.call(y.color)?y.color[0]:y.color;g.getOverallLegendItemsCollection(s,b,u,y.showLegend)}}else{s=t.isNullOrUndefined(y.label)?y.value:y.label,c=[];var v=!1;Array.prototype.forEach.call(o,function(t,a){var o=l.indexOf(".")>-1?w(t,l):t[l];o===y.value?(v=!0,-1===h.indexOf(o)&&h.push(o),c.push(d.getLegendData(e,a,t,n,i,r,o))):-1===m.indexOf(o)&&m.push(o)});for(var x=0;x<h.length;x++)for(var S=0;S<m.length;S++)if(h[x]===m[S]){var O=m.indexOf(h[x]);m.splice(O,1)}v||c.push({layerIndex:e,shapeIndex:null,dataIndex:null,name:null,value:null});var _=t.isNullOrUndefined(p)?"[object Array]"===Object.prototype.toString.call(y.color)?y.color[0]:y.color:p;g.getOverallLegendItemsCollection(s,_,c,y.showLegend)}}(f[y])},e.prototype.getDataLegendCollection=function(e,i,a,o,n,l,r){var s,d=this,p=this.maps.legendSettings.fill,h=this.maps.legendSettings.valuePath;t.isNullOrUndefined(l)||t.isNullOrUndefined(o)||Array.prototype.forEach.call(o,function(o,c){var m=!!t.isNullOrUndefined(d.maps.legendSettings.showLegendPath)||!t.isNullOrUndefined(o[d.maps.legendSettings.showLegendPath])&&o[d.maps.legendSettings.showLegendPath],u=l.indexOf(".")>-1?w(o,l):o[l],g=[],y=t.isNullOrUndefined(p)?u:p;t.isNullOrUndefined(u)||0!==a.length||(s=t.isNullOrUndefined(o[h])?n.indexOf(".")>-1?w(o,n):o[n]:h.indexOf(".")>-1?w(o,h):o[h],g.push(d.getLegendData(e,c,o,n,i,r,u))),d.getOverallLegendItemsCollection(s,y,g,m)})},e.prototype.interactiveHandler=function(e){var i=e.target,a=this.maps.legendSettings,o=this.maps.element.id+"_Interactive_Legend",n="Layers"===a.type?"_shapeIndex_":"Markers"===a.type?"_MarkerIndex_":"_BubbleIndex_";if(i.id.indexOf(n)>1){var l=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),r=parseFloat(i.id.split(/_dataIndex_/i)[1].split("_")[0]),s=void 0,d=void 0,p=void 0;t.isNullOrUndefined(Se(o,this.maps.element.id))||t.remove(Se(o,this.maps.element.id));var h=this.maps.layersCollection[l],c="Layers"===a.type?h.visible:"Markers"===a.type?h.markerSettings[parseFloat(i.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[l]);if(a.visible&&this.legendRenderingCollections.length>0&&"Interactive"===a.mode&&c)for(var m=this.maps.svgObject.getBoundingClientRect(),u=0;u<this.legendCollection.length;u++){var g=this.legendCollection[u],y=Se(this.maps.element.id+"_Legend_Index_"+u,this.maps.element.id),f=y.getBoundingClientRect(),b=new mt(Math.abs(f.left-m.left),Math.abs(f.top-m.top),f.width,f.height);if(s=y.getAttribute("fill"),d=a.shapeBorder.color,p=a.shapeBorder.width,!t.isNullOrUndefined(g.data))for(var v=g.data,x=0;x<v.length;x++)if(r===v[x].dataIndex&&l===v[x].layerIndex){this.renderInteractivePointer(a,s,d,o,p,b);break}}}else t.isNullOrUndefined(Se(o,this.maps.element.id))||t.remove(Se(o,this.maps.element.id))},e.prototype.renderInteractivePointer=function(e,t,i,a,o,n){var l,r,s,d;l="Horizontal"===("None"===e.orientation?"Top"===e.position||"Bottom"===e.position?"Horizontal":"Vertical":e.orientation)?e.invertedPointer?" M "+(s=n.x+n.width/2)+" "+(d=n.y+n.height)+" L "+(s-10)+" "+(d+10)+" L "+(s+10)+" "+(d+10)+" Z ":" M "+(s=n.x+n.width/2)+" "+(d=n.y)+" L "+(s-10)+" "+(d-10)+" L "+(s+10)+" "+(d-10)+" Z ":e.invertedPointer?" M "+(s=n.x)+" "+(d=n.y+n.height/2)+" L "+(s-10)+" "+(d-10)+" L "+(s-10)+" "+(d+10)+" z ":" M "+(s=n.x+n.width)+" "+(d=n.y+n.height/2)+" L "+(s+10)+" "+(d-10)+" L "+(s+10)+" "+(d+10)+" z ",r=new ot(a,t,o,i,1,"",l),this.maps.svgObject.appendChild(this.maps.renderer.drawPath(r))},e.prototype.wireEvents=function(e){t.EventHandler.add(e,t.Browser.touchStartEvent,this.changeNextPage,this)},e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(t.Browser.touchEndEvent,this.interactiveHandler,this),this.maps.on("click",this.legendClick,this))},e.prototype.legendClick=function(e){var i=this.maps.legendSettings.toggleLegendSettings.fill,a=this.maps.legendSettings.toggleLegendSettings.opacity,o=this.maps.legendSettings.toggleLegendSettings.border.color,n=this.maps.legendSettings.toggleLegendSettings.border.width;if(e.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")>-1){var l=void 0,r=parseFloat(e.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),s=(u=this.legendCollection[r].data)._isVisible,d=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&"Bubbles"===this.maps.legendSettings.type)for(b=0;b<this.maps.layers.length;b++)for(g=0;g<this.maps.layers[b].bubbleSettings.length;g++){for(v=0;v<u.length;v++)d=this.legendCollection[r].data[v],l=Se(this.maps.element.id+"_LayerIndex_"+d.layerIndex+"_BubbleIndex_"+g+"_dataIndex_"+d.dataIndex,this.maps.element.id),s&&null!==l?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(l.setAttribute("fill",this.maps.layers[b].shapeSettings.fill),l.setAttribute("stroke",this.maps.layers[b].shapeSettings.border.color),l.setAttribute("opacity",this.maps.layers[b].shapeSettings.opacity.toString()),l.setAttribute("stroke-width",this.maps.layers[b].shapeSettings.border.width.toString())):(l.setAttribute("fill",i),l.setAttribute("opacity",a.toString()),l.setAttribute("stroke",o),l.setAttribute("stroke-width",n.toString())),null!==e&&(Se(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Se(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(l.setAttribute("fill",this.legendCollection[r].fill),l.setAttribute("stroke",this.maps.layers[b].bubbleSettings[g].border.color),l.setAttribute("opacity",this.maps.layers[b].bubbleSettings[g].opacity.toString()),l.setAttribute("stroke-width",this.maps.layers[b].bubbleSettings[g].border.width.toString()),null!==e&&(Se(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),Se(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575")));u._isVisible=!s}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var p=void 0;this.removeCollections(e,r);var h=this.maps.toggledLegendId.indexOf(r);-1!==h&&(s=!1);for(g=0;g<this.maps.layers.length;g++)for(v=0;v<u.length;v++)if(d=this.legendCollection[r].data[v],null!==(p=Se(this.maps.element.id+"_LayerIndex_"+d.layerIndex+"_shapeIndex_"+d.shapeIndex+"_dataIndex_"+d.dataIndex,this.maps.element.id))){x=this.maps.toggledShapeElementId.indexOf(p.id);s?(0===v&&this.maps.toggledLegendId.push(r),-1===x&&this.maps.toggledShapeElementId.push(p.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(p.setAttribute("fill",this.maps.layers[g].shapeSettings.fill),p.setAttribute("opacity",this.maps.layers[g].shapeSettings.opacity.toString()),p.setAttribute("stroke",this.maps.layers[g].shapeSettings.border.color),p.setAttribute("stroke-width",this.maps.layers[g].shapeSettings.border.width.toString())):(p.setAttribute("fill",i),p.setAttribute("opacity",a.toString()),p.setAttribute("stroke",o),p.setAttribute("stroke-width",n.toString())),null!==e&&(Se(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Se(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==h&&0===v&&this.maps.toggledLegendId.splice(h,1),-1!==x&&this.maps.toggledShapeElementId.splice(x,1),p.setAttribute("fill",this.legendCollection[r].fill),p.setAttribute("opacity",this.maps.layers[g].shapeSettings.opacity.toString()),p.setAttribute("stroke",this.maps.layers[g].shapeSettings.border.color),p.setAttribute("stroke-width",this.maps.layers[g].shapeSettings.border.width.toString()),null!==e&&(Se(this.maps.element.id+"_Legend_Text_Index_"+r,this.maps.element.id).setAttribute("fill","#757575"),Se(this.maps.element.id+"_Legend_Shape_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}u._isVisible=!s}}else if(!t.isNullOrUndefined(e.id)&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===e.id.indexOf("_Text")){var c=void 0,r=parseFloat(e.id.substr((this.maps.element.id+"_Legend_Index_").length)),m=void 0,u=this.legendCollection[r].data,s=u._isVisible;if("Bubbles"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable)for(b=0;b<this.maps.layers.length;b++)for(var g=0;g<this.maps.layers[b].bubbleSettings.length;g++){for(v=0;v<u.length;v++)m=this.legendCollection[r].data[v],c=Se(this.maps.element.id+"_LayerIndex_"+m.layerIndex+"_BubbleIndex_"+g+"_dataIndex_"+m.dataIndex,this.maps.element.id),s&&null!==c?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(c.setAttribute("fill",this.maps.layers[b].shapeSettings.fill),c.setAttribute("stroke",this.maps.layers[b].shapeSettings.border.color),c.setAttribute("stroke-width",this.maps.layers[b].shapeSettings.border.width.toString()),c.setAttribute("opacity",this.maps.layers[b].shapeSettings.opacity.toString())):(c.setAttribute("fill",i),c.setAttribute("opacity",a.toString()),c.setAttribute("stroke",o),c.setAttribute("stroke-width",n.toString())),null!==e&&(Se(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"),Se(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(c.setAttribute("fill",this.legendCollection[r].fill),c.setAttribute("stroke",this.maps.layers[b].bubbleSettings[g].border.color),c.setAttribute("stroke-width",this.maps.layers[b].bubbleSettings[g].border.width.toString()),c.setAttribute("opacity",this.maps.layers[b].bubbleSettings[g].opacity.toString()),null!==e&&(Se(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill),Se(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575")));u._isVisible=!s}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){var y=void 0;this.removeCollections(e,r);var f=this.maps.toggledLegendId.indexOf(r);-1!==f&&(s=!1);for(var b=0;b<this.maps.layers.length;b++)for(var v=0;v<u.length;v++)if(m=this.legendCollection[r].data[v],null!==(y=Se(this.maps.element.id+"_LayerIndex_"+m.layerIndex+"_shapeIndex_"+m.shapeIndex+"_dataIndex_"+m.dataIndex,this.maps.element.id))){var x=this.maps.toggledShapeElementId.indexOf(y.id);s?(0===v&&this.maps.toggledLegendId.push(r),-1===x&&this.maps.toggledShapeElementId.push(y.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(y.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[b].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[b].shapeSettings.border.width.toString())):(y.setAttribute("fill",i),y.setAttribute("opacity",a.toString()),y.setAttribute("stroke",o),y.setAttribute("stroke-width",n.toString())),null!==e&&(Se(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill","#E5E5E5"),Se(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==f&&0===v&&this.maps.toggledLegendId.splice(f,1),-1!==x&&this.maps.toggledShapeElementId.splice(x,1),y.setAttribute("fill",this.legendCollection[r].fill),y.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),y.setAttribute("opacity",this.maps.layers[b].shapeSettings.opacity.toString()),y.setAttribute("stroke-width",this.maps.layers[b].shapeSettings.border.width.toString()),null!==e&&(Se(this.maps.element.id+"_Legend_Index_"+r+"_Text",this.maps.element.id).setAttribute("fill","#757575"),Se(this.maps.element.id+"_Legend_Index_"+r,this.maps.element.id).setAttribute("fill",this.legendCollection[r].fill)))}u._isVisible=!s}}},e.prototype.removeCollections=function(e,t){this.removeLegendSelectionCollection(e);var i=this.getIndexofLegend(this.maps.legendSelectionCollection,e);-1!==i&&this.maps.legendSelectionCollection.splice(i,1),-1!==this.getIndexofLegend(this.legendHighlightCollection,e)&&this.legendHighlightCollection.splice(i,1);var a=this.getIndexofLegend(this.shapeHighlightCollection,e);-1!==a&&this.shapeHighlightCollection.splice(a,1);var o=this.maps.selectedLegendElementId.indexOf(t);-1!==o&&this.maps.selectedLegendElementId.splice(o,1)},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(t.Browser.touchEndEvent,this.interactiveHandler),this.maps.off("click",this.legendClick))},e.prototype.getLegendData=function(e,i,a,o,n,l,r){var s=[];if("[object Array]"===Object.prototype.toString.call(n))for(var d=0;d<n.length;d++){var p=n[d],h=o.indexOf(".")>-1?w(a,o):a[o],c=ie(a[o],l,p.properties),m=t.isNullOrUndefined(h)?h:h.toLowerCase();(!t.isNullOrUndefined(p.properties[c])&&isNaN(p.properties[c])?p.properties[c].toLowerCase():p.properties[c])===m&&s.push({layerIndex:e,shapeIndex:d,dataIndex:i,name:a[o],value:r})}return s},e.prototype.legendGradientColor=function(e,i){var a,o="http://www.w3.org/2000/svg";if(!t.isNullOrUndefined(e.color)&&"object"==typeof e.color){var n=document.createElementNS(o,"linearGradient"),l=this.maps.legendSettings.position,r=void 0,s=void 0;r="Top"===l||"Bottom"===l?"100":"0",s="Top"===l||"Bottom"===l?"0":"100",n.setAttribute("id","linear_"+i+"_"+this.maps.element.id),n.setAttribute("x1","0%"),n.setAttribute("y1","0%"),n.setAttribute("x2",r+"%"),n.setAttribute("y2",s+"%");for(var d=0;d<e.color.length;d++){var p=100/(e.color.length-1),h=document.createElementNS(o,"stop");h.setAttribute("offset",d*p+"%"),h.setAttribute("stop-color",e.color[d]),h.setAttribute("stop-opacity",1..toString()),n.appendChild(h)}this.legendLinearGradient=n;var c="url(#linear_"+i+"_"+this.maps.element.id+")";this.defsElement.appendChild(n),a=c}return a},e.prototype.getModuleName=function(){return"Legend"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Oi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},_i=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(t.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(t.Browser.touchStartEvent,this.mouseMove,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(t.Browser.touchMoveEvent,this.mouseMove),this.maps.off(t.Browser.touchStartEvent,this.mouseMove))},e.prototype.addHighlight=function(e,t,i){var a=Oe(e,t,i,this.maps);i?this.mapHighlight(a,null,null):Ce(a)},e.prototype.mouseMove=function(e){var i,a=e.target,o="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1;if((-1!==a.id.indexOf("LayerIndex")||a.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==a.getAttribute("class")&&!o&&"MarkerselectionMapStyle"!==a.getAttribute("class")&&"BubbleselectionMapStyle"!==a.getAttribute("class")&&"navigationlineselectionMapStyle"!==a.getAttribute("class")){i=parseInt(a.id.split("_LayerIndex_")[1].split("_")[0],10);var n=void 0,l=void 0,r=void 0,s=void 0;if(a.id.indexOf("shapeIndex")>-1)r=parseInt(a.id.split("_shapeIndex_")[1].split("_")[0],10),n=this.maps.layers[i].shapeData.features?this.maps.layers[i].shapeData.features[r].properties:null,s=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),l=t.isNullOrUndefined(s)?null:this.maps.layers[i].dataSource[s],this.highlightSettings=this.maps.layers[i].highlightSettings;else if(a.id.indexOf("BubbleIndex")>-1){var d=parseInt(a.id.split("_BubbleIndex_")[1].split("_")[0],10);s=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),l=this.maps.layers[i].bubbleSettings[d].dataSource[s],this.highlightSettings=this.maps.layers[i].bubbleSettings[d].highlightSettings}else if(a.id.indexOf("MarkerIndex")>-1){var p=parseInt(a.id.split("_MarkerIndex_")[1].split("_")[0],10);s=parseInt(a.id.split("_dataIndex_")[1].split("_")[0],10),l=this.maps.layers[i].markerSettings[p].dataSource[s],this.highlightSettings=this.maps.layers[i].markerSettings[p].highlightSettings}else{c=parseInt(a.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(a.id.split("_LayerIndex_")[1].split("_")[0],10),n=null,l={latitude:this.maps.layers[i].navigationLineSettings[c].latitude,longitude:this.maps.layers[i].navigationLineSettings[c].longitude},this.highlightSettings=this.maps.layers[i].navigationLineSettings[c].highlightSettings}if(this.highlightSettings.enable)this.maps.legendSettings.visible&&-1===a.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(a,l,this.highlightSettings,"highlight",i),(!(a.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.mapHighlight(a,n,l);else{var h=document.getElementsByClassName("highlightMapStyle")[0];if(!t.isNullOrUndefined(h)&&(Ce(h),h.id.indexOf("NavigationIndex")>-1)){var c=parseInt(h.id.split("_NavigationIndex_")[1].split("_")[0],10),m=parseInt(h.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);h.setAttribute("stroke-width",this.maps.layers[m].navigationLineSettings[c].width.toString()),h.setAttribute("stroke",this.maps.layers[m].navigationLineSettings[c].color)}}}else if(xe("highlightMapStyle").length>0){if((a=xe("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1){c=parseInt(a.id.split("_NavigationIndex_")[1].split("_")[0],10);i=parseInt(a.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),a.setAttribute("stroke-width",this.maps.layers[i].navigationLineSettings[c].width.toString()),a.setAttribute("stroke",this.maps.layers[i].navigationLineSettings[c].color)}Ce(a),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()}else-1===a.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===a.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==a.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(a,"highlight")},e.prototype.mapHighlight=function(e,i,a){var o=this,n=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),l=!1;if(e.id.indexOf("MarkerIndex")>-1){var r=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);l=this.maps.layers[n].markerSettings[r].highlightSettings.enable}var s={color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(l?1:this.maps.scale)},d={opacity:this.highlightSettings.opacity,fill:-1===e.id.indexOf("NavigationIndex")?t.isNullOrUndefined(this.highlightSettings.fill)?e.getAttribute("fill"):this.highlightSettings.fill:"none",border:s,name:"itemHighlight",target:e.id,cancel:!1,shapeData:i,data:a,maps:this.maps};if(this.maps.isBlazor){d.shapeData,d.maps;var p=Oi(d,["shapeData","maps"]);d=p}this.maps.trigger("itemHighlight",d,function(){o.highlightMap(e,d)})},e.prototype.highlightMap=function(e,t){if("highlightMapStyle"!==e.getAttribute("class")){if(xe("highlightMapStyle").length>0){var i=xe("highlightMapStyle")[0];if(Ce(i),i.id.indexOf("NavigationIndex")>-1){var a=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),o=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);i.setAttribute("stroke-width",this.maps.layers[o].navigationLineSettings[a].width.toString()),i.setAttribute("stroke",this.maps.layers[o].navigationLineSettings[a].color)}}fe("highlightMap")?Me("highlightMap","highlightMapStyle",t):document.body.appendChild(_e("highlightMap","highlightMapStyle",t)),e.setAttribute("class","highlightMapStyle")}},e.prototype.getModuleName=function(){return"Highlight"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Mi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},Li=function(){function e(e){this.maps=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(t.Browser.touchEndEvent,this.mouseClick,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(t.Browser.touchEndEvent,this.mouseClick))},e.prototype.mouseClick=function(e){if(!t.isNullOrUndefined(e.type)&&-1!==e.type.indexOf("touch")&&t.isNullOrUndefined(e.id)&&(e=e.target),!t.isNullOrUndefined(e.id)&&(e.id.indexOf("LayerIndex")>-1||e.id.indexOf("NavigationIndex")>-1)){var i=void 0,a=void 0,o=void 0,n=void 0,l=void 0;if(i=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),e.id.indexOf("shapeIndex")>-1)n=parseInt(e.id.split("_shapeIndex_")[1].split("_")[0],10),a=this.maps.layers[i].shapeData.features.length>n?this.maps.layers[i].shapeData.features[n].properties:null,l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=t.isNullOrUndefined(l)?null:this.maps.layers[i].dataSource[l],this.selectionsettings=this.maps.layers[i].selectionSettings,this.selectionType="Shape";else if(e.id.indexOf("BubbleIndex")>-1){var r=parseInt(e.id.split("_BubbleIndex_")[1].split("_")[0],10);l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[i].bubbleSettings[r].dataSource[l],this.selectionsettings=this.maps.layers[i].bubbleSettings[r].selectionSettings,this.selectionType="Bubble"}else if(e.id.indexOf("MarkerIndex")>-1){var s=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10);l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[i].markerSettings[s].dataSource[l],this.selectionsettings=this.maps.layers[i].markerSettings[s].selectionSettings,this.selectionType="Marker"}else{var d=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10);a=null,o={latitude:this.maps.layers[i].navigationLineSettings[d].latitude,longitude:this.maps.layers[i].navigationLineSettings[d].longitude},this.selectionsettings=this.maps.layers[i].navigationLineSettings[d].selectionSettings,this.selectionType="navigationline"}this.selectionsettings.enable&&(this.maps.mapSelect=!!e,this.maps.legendSettings.visible&&-1===e.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(e,o,this.selectionsettings,"selection",i),(!(e.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.selectMap(e,a,o))}else this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&!t.isNullOrUndefined(e.id)&&-1===e.id.indexOf("_Text")&&(e.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==e.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(e,"selection")},e.prototype.addSelection=function(e,t,i){var a=Oe(e,t,i,this.maps);i?this.selectMap(a,null,null):Ce(a)},e.prototype.selectMap=function(e,t,i){var a=this,o=(this.selectionsettings,{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)}),n={opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:o,name:ri,target:e.id,cancel:!1,shapeData:t,data:i,maps:this.maps};if(this.maps.isBlazor){n.shapeData,n.maps;var l=Mi(n,["shapeData","maps"]);n=l}this.maps.trigger("itemSelection",n,function(t){if(!n.cancel)if(e.getAttribute("class")===a.selectionType+"selectionMapStyle"){Ce(e),a.removedSelectionList(e);for(var i=0;i<a.maps.shapeSelectionItem.length;i++)if(a.maps.shapeSelectionItem[i]===n.shapeData){a.maps.shapeSelectionItem.splice(i,1);break}if(e.id.indexOf("NavigationIndex")>-1){var o=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),l=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);e.setAttribute("stroke-width",a.maps.layers[l].navigationLineSettings[o].width.toString()),e.setAttribute("stroke",a.maps.layers[l].navigationLineSettings[o].color)}}else{var r=ue(a.maps.element.id+"_Layer_Collections");if(!a.selectionsettings.enableMultiSelect&&r.getElementsByClassName(a.selectionType+"selectionMapStyle").length>0){for(var s=r.getElementsByClassName(a.selectionType+"selectionMapStyle").length,d=void 0,p=0;p<s;p++)Ce(d=r.getElementsByClassName(a.selectionType+"selectionMapStyle")[0]),a.removedSelectionList(d);if("Shape"===a.selectionType){a.maps.shapeSelectionItem=[];for(var h=a.maps.selectedElementId.length,c=0;c<h;c++){Ce(d=r.getElementsByClassName(a.selectionType+"selectionMapStyle")[0]);var m=a.maps.selectedElementId.indexOf(d.getAttribute("id"));a.maps.selectedElementId.splice(m,1)}}if(d.id.indexOf("NavigationIndex")>-1){var o=parseInt(e.id.split("_NavigationIndex_")[1].split("_")[0],10),l=parseInt(e.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10);d.setAttribute("stroke-width",a.maps.layers[l].navigationLineSettings[o].width.toString()),d.setAttribute("stroke",a.maps.layers[l].navigationLineSettings[o].color)}}fe(a.selectionType+"selectionMap")?Me(a.selectionType+"selectionMap",a.selectionType+"selectionMapStyle",n):document.body.appendChild(_e(a.selectionType+"selectionMap",a.selectionType+"selectionMapStyle",n)),e.setAttribute("class",a.selectionType+"selectionMapStyle"),"ShapeselectionMapStyle"===e.getAttribute("class")&&(a.maps.shapeSelectionClass=fe(a.selectionType+"selectionMap"),a.maps.selectedElementId.push(e.getAttribute("id")),a.maps.shapeSelectionItem.push(n.shapeData)),"MarkerselectionMapStyle"===e.getAttribute("class")&&(a.maps.markerSelectionClass=fe(a.selectionType+"selectionMap"),a.maps.selectedMarkerElementId.push(e.getAttribute("id"))),"BubbleselectionMapStyle"===e.getAttribute("class")&&(a.maps.bubbleSelectionClass=fe(a.selectionType+"selectionMap"),a.maps.selectedBubbleElementId.push(e.getAttribute("id"))),"navigationlineselectionMapStyle"===e.getAttribute("class")&&(a.maps.navigationSelectionClass=fe(a.selectionType+"selectionMap"),a.maps.selectedNavigationElementId.push(e.getAttribute("id")))}})},e.prototype.removedSelectionList=function(e){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(e.getAttribute("id")),1),"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1),"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(e.getAttribute("id")),1),"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(e.getAttribute("id")),1)},e.prototype.getModuleName=function(){return"Selection"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Ci=function(){function e(e){this.maps=e,this.tooltipId=this.maps.element.id+"_mapsTooltip",this.addEventListener()}return e.prototype.renderTooltip=function(e){var a,o,n,l,r,d=this;-1!==e.type.indexOf("touch")?(this.isTouch=!0,a=(l=e).changedTouches[0].pageX,o=l.changedTouches[0].pageY,n=l.target):(this.isTouch="touch"===e.pointerType,a=e.pageX,o=e.pageY,n=e.target);var p,h,c,m="",u=n.id,g=[],y=u.indexOf("_LayerIndex_")>-1&&parseFloat(u.split("_LayerIndex_")[1].split("_")[0]),f=this.maps.layersCollection[y],b=[];if(c=s(a,o,this.maps.svgObject),this.tooltipTargetID=u,u.indexOf("_shapeIndex_")>-1||u.indexOf("_MarkerIndex_")>-1||u.indexOf("_BubbleIndex_")>-1){if(u.indexOf("_shapeIndex_")>-1){(p=f.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||p.textStyle.fontFamily,p.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||p.textStyle.opacity;var v=parseInt(u.split("_shapeIndex_")[1].split("_")[0],10);if(t.isNullOrUndefined(f.layerData)||t.isNullOrUndefined(f.layerData[v]))return;var x=f.layerData[v].property,S=!1,O="[object Array]"===Object.prototype.toString.call(f.shapePropertyPath)?f.shapePropertyPath:[f.shapePropertyPath];if(!t.isNullOrUndefined(O)){for(var _=0;_<O.length;_++)for(var L=0;L<f.dataSource.length;L++){var C=f.dataSource[L],P=f.shapeDataPath.indexOf(".")>-1?w(C,f.shapeDataPath):C[f.shapeDataPath];if((!t.isNullOrUndefined(P)&&isNaN(C[f.shapeDataPath])?P.toLowerCase():P)===(!t.isNullOrUndefined(x[O[_]])&&isNaN(x[O[_]])?x[O[_]].toLowerCase():x[O[_]])){S=!0,y=L,_=O.length;break}}y=S?y:null,g=f.dataSource[y]}if(p.visible&&(!t.isNullOrUndefined(y)&&!isNaN(y)||!t.isNullOrUndefined(x)))if(f.tooltipSettings.format)m=this.formatter(f.tooltipSettings.format,f.dataSource[y]);else{var I=ie(f.shapeDataPath,f.shapePropertyPath,x);m=t.isNullOrUndefined(f.dataSource)||t.isNullOrUndefined(y)?x[I]:M(p.valuePath.indexOf(".")>-1?w(f.dataSource[y],p.valuePath):f.dataSource[y][p.valuePath],this.maps),t.isNullOrUndefined(m)&&(m=p.valuePath.indexOf(".")>-1?w(x,p.valuePath):x[p.valuePath])}}else if(u.indexOf("_MarkerIndex_")>-1){var T=parseInt(u.split("_MarkerIndex_")[1].split("_")[0],10),k=parseInt(u.split("_MarkerIndex_")[1].split("_")[2],10),N=f.markerSettings[T];p=N.tooltipSettings,g=N.dataSource[k],p.visible&&!isNaN(T)&&(m=N.tooltipSettings.format?this.formatter(N.tooltipSettings.format,N.dataSource[k]):N.template&&!N.tooltipSettings.valuePath?N.template.split(">")[1].split("<")[0]:M(N.tooltipSettings.valuePath.indexOf(".")>-1?w(N.dataSource[k],N.tooltipSettings.valuePath):N.dataSource[k][N.tooltipSettings.valuePath],this.maps))}else if(u.indexOf("_BubbleIndex_")>-1){var E=parseInt(u.split("_BubbleIndex_")[1].split("_")[0],10),k=parseInt(u.split("_BubbleIndex_")[1].split("_")[2],10),z=f.bubbleSettings[E];p=z.tooltipSettings,g=z.dataSource[k],p.visible&&!isNaN(k)&&(m=z.tooltipSettings.format?this.formatter(z.tooltipSettings.format,z.dataSource[k]):M(z.tooltipSettings.valuePath.indexOf(".")>-1?w(z.dataSource[k],z.tooltipSettings.valuePath):z.dataSource[k][z.tooltipSettings.valuePath],this.maps))}document.getElementById(this.tooltipId)?h=document.getElementById(this.tooltipId):(h=t.createElement("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(h)),null!==p.template&&1===Object.keys("object"==typeof p.template?p.template:{}).length&&(p.template=p.template[Object.keys(p.template)[0]]);var j={location:c,text:b,data:g=this.setTooltipContent(p,g),textStyle:p.textStyle,template:p.template};if(r={cancel:!1,name:"tooltipRender",options:j,fill:p.fill,maps:this.maps,element:n,eventArgs:e},this.maps.isBlazor){var A={location:c},B={name:"tooltipRender",cancel:!1,options:A,data:g,textStyle:r.options.textStyle,fill:r.fill,element:n,eventArgs:e};this.maps.trigger("tooltipRender",B,function(e){B.cancel||!p.visible||t.isNullOrUndefined(m)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_")?d.removeTooltip():(u.indexOf("MarkerIndex")>0||u.indexOf("BubbleIndex"),d.maps.isProtectedOnChange=!0,d.svgTooltip=B.cancel?new i.Tooltip({enable:!0,header:"",content:[m.toString()],shapes:[],location:A.location,palette:[void 0],areaBounds:d.maps.mapAreaRect,textStyle:r.options.textStyle,availableSize:d.maps.availableSize,fill:r.fill}):new i.Tooltip({enable:!0,header:"",content:[m.toString()],shapes:[],location:A.location,palette:[void 0],areaBounds:d.maps.mapAreaRect,textStyle:B.textStyle,availableSize:d.maps.availableSize,fill:B.fill}),d.svgTooltip.opacity=d.maps.themeStyle.tooltipFillOpacity||d.svgTooltip.opacity,d.svgTooltip.appendTo(h))})}else this.maps.trigger("tooltipRender",r,function(e){r.cancel||!p.visible||t.isNullOrUndefined(m)||-1!==u.indexOf("_cluster_")||-1!==u.indexOf("_dataLabel_")?d.removeTooltip():(d.maps.isProtectedOnChange=!0,r.options.textStyle.color=d.maps.themeStyle.tooltipFontColor||r.options.textStyle.color,r.cancel?d.svgTooltip=new i.Tooltip({enable:!0,header:"",data:p.data,template:p.template,content:[m.toString()],shapes:[],location:p.location,palette:[void 0],areaBounds:d.maps.mapAreaRect,textStyle:p.textStyle,availableSize:d.maps.availableSize,fill:p.fill||d.maps.themeStyle.tooltipFillColor}):d.svgTooltip=new i.Tooltip({enable:!0,header:"",data:r.options.data,template:r.options.template,content:[m.toString()],shapes:[],location:r.options.location,palette:[void 0],areaBounds:d.maps.mapAreaRect,textStyle:r.options.textStyle,availableSize:d.maps.availableSize,fill:r.fill||d.maps.themeStyle.tooltipFillColor}),d.svgTooltip.opacity=d.maps.themeStyle.tooltipFillOpacity||d.svgTooltip.opacity,d.svgTooltip.appendTo(h))});this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:j,element:this.svgTooltip.element}),this.svgTooltip?this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:j,element:this.svgTooltip.element}):this.removeTooltip()}else this.removeTooltip()},e.prototype.setTooltipContent=function(e,i){var a=t.extend({},i,null,!0);return this.maps.format&&!isNaN(Number(a[e.valuePath]))?a[e.valuePath]=ge(this.maps,Number(a[e.valuePath])):a=Object.keys(a).length?a:void 0,a},e.prototype.formatter=function(e,t){void 0===t&&(t={});for(var i=0,a=Object.keys(t);i<a.length;i++){var o=a[i];e="object"==typeof t[o]?L("",e,t,this.maps):e.split("${"+o+"}").join(M(t[o],this.maps))}return e},e.prototype.mouseUpHandler=function(e){this.renderTooltip(e),"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3))},e.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&t.remove(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},e.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this):this.maps.on(t.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.element.addEventListener("contextmenu",this.removeTooltip),this.maps.on(t.Browser.touchCancelEvent,this.removeTooltip,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.removeTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler):this.maps.off(t.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(t.Browser.touchCancelEvent,this.removeTooltip))},e.prototype.getModuleName=function(){return"MapsTooltip"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Pi=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(i[a[o]]=e[a[o]]);return i},wi=function(){function e(e){this.isPanning=!1,this.mouseEnter=!1,this.isTouch=!1,this.rectZoomingStart=!1,this.pinchRect=new mt(0,0,0,0),this.browserName=t.Browser.info.name,this.isPointer=t.Browser.isPointer,this.handled=!1,this.pinchFactor=1,this.startTouches=[],this.shapeZoomLocation=[],this.intersect=[],this.mouseDownLatLong={x:0,y:0},this.mouseMoveLatLong={x:0,y:0},this.isSingleClick=!1,this.maps=e,this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel",this.cancelEvent=this.isPointer?"pointerleave":"mouseleave",this.selectionColor=this.maps.zoomSettings.selectionColor,this.fillColor=this.maps.zoomSettings.color,this.addEventListener(),this.groupElements=[]}return e.prototype.performZooming=function(e,t,i){var a=this,o=this.maps;o.previousProjection=o.projectionType,o.defaultState=!1,o.initialCheck=!1,o.markerZoomedState=!1,o.zoomPersistence=o.enablePersistence;var n=o.tileZoomLevel,l=o.previousScale=o.scale,r=o.zoomSettings.maxZoom,s=o.zoomSettings.minZoom;t=s>t&&"ZoomIn"===i?s+1:t;var d=o.tileTranslatePoint;if(!o.isTileMap&&("ZoomIn"===i?t>=s&&t<=r:t>=s)){var p=o.mapAreaRect,h=o.baseMapRectBounds.min,c=o.baseMapRectBounds.max,m=Math.abs(h.x-c.x),u=Math.abs(h.y-c.y),g=o.translatePoint,y=g.x-(p.width/l-p.width/t)/(p.width/e.x),f=g.y-(p.height/l-p.height/t)/(p.height/e.y),b=Math.abs(o.baseMapRectBounds.max.y-o.baseMapRectBounds.min.y)*t;y=b<o.mapAreaRect.height?p.x+(-h.x+(p.width/2-m/2)):y,f=b<o.mapAreaRect.height?p.y+(-h.y+(p.height/2-u/2)):f,o.translatePoint=new et(y,f),o.scale=t,this.triggerZoomEvent(d,n,i),this.applyTransform()}else if(o.isTileMap&&t>=s&&t<=r){this.getTileTranslatePosition(n,t,e,i),o.tileZoomLevel=t,o.scale=Math.pow(2,t-1),"ZoomOut"===i&&o.zoomSettings.resetToInitial&&o.applyZoomReset&&t<=o.initialZoomLevel&&(o.initialCheck=!0,o.zoomPersistence=!1,o.tileTranslatePoint.x=o.initialTileTranslate.x,o.tileTranslatePoint.y=o.initialTileTranslate.y,t=o.tileZoomLevel=o.mapScaleValue=o.initialZoomLevel,o.scale=Math.pow(2,t-1)),o.translatePoint.y=(o.tileTranslatePoint.y-.01*o.scale)/o.scale,o.translatePoint.x=(o.tileTranslatePoint.x-.01*o.scale)/o.scale,this.triggerZoomEvent(d,n,i),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),o.mapLayerPanel.generateTiles(t,o.tileTranslatePoint,i+"wheel",null,e);document.getElementById(this.maps.element.id+"_tiles");setTimeout(function(){a.applyTransform(),document.getElementById(a.maps.element.id+"_LayerIndex_1")&&(document.getElementById(a.maps.element.id+"_LayerIndex_1").style.display="block")},250)}this.maps.zoomNotApplied=!1},e.prototype.triggerZoomEvent=function(e,t,i){var a,o=this.maps;a=o.isTileMap?{cancel:!1,name:"zoom",type:i,maps:o.isBlazor?null:o,tileTranslatePoint:{previous:e,current:o.tileTranslatePoint},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{previous:t,current:o.tileZoomLevel},scale:{previous:o.previousScale,current:o.scale}}:{cancel:!1,name:"zoom",type:i,maps:o.isBlazor?null:o,tileTranslatePoint:{},translatePoint:{previous:o.previousPoint,current:o.translatePoint},tileZoomLevel:{},scale:{previous:o.previousScale,current:o.scale}},o.trigger("zoom",a)},e.prototype.getTileTranslatePosition=function(e,t,i,a){var o=this.maps,n="ZoomOut"===a?10:"Reset"===a&&t>1?0:10,l=o.availableSize,r=256*Math.pow(2,e),s=256*Math.pow(2,t),d=(i.x-o.tileTranslatePoint.x)/r*100,p=(i.y-o.tileTranslatePoint.y)/r*100;o.tileTranslatePoint.x=1===t?l.width/2-256:i.x-d*s/100,o.tileTranslatePoint.y=1===t?l.height/2-256+2*n:i.y-p*s/100},e.prototype.performRectZooming=function(){this.isDragZoom=!0;var e=this.maps,t=e.availableSize;e.previousProjection=e.projectionType;var i=e.tileZoomLevel,a=e.tileTranslatePoint,o=this.zoomingRect,n=e.zoomSettings.maxZoom,l=e.zoomSettings.minZoom;if(o.height>0&&o.width>0){var r=this.zoomingRect.x+this.zoomingRect.width/2,s=this.zoomingRect.y+this.zoomingRect.height/2,d=void 0;if(e.isTileMap)d=(d=i+Math.round(i+(t.width/o.width+t.height/o.height)/2))>=l&&d<=n?d:n,this.getTileTranslatePosition(i,d,{x:r,y:s}),e.tileZoomLevel=d,e.translatePoint.x=(e.tileTranslatePoint.x-.5*Math.pow(2,d))/Math.pow(2,d),e.translatePoint.y=(e.tileTranslatePoint.y-.5*Math.pow(2,d))/Math.pow(2,d),e.scale=Math.pow(2,d),this.triggerZoomEvent(a,i,""),e.mapLayerPanel.generateTiles(d,e.tileTranslatePoint);else{var p=e.previousScale=e.scale;d=p+Math.round((t.width/o.width+t.height/o.height)/2);var h=e.previousPoint=e.translatePoint,c=h.x-(t.width/p-t.width/d)/(t.width/r),m=h.y-(t.height/p-t.height/d)/(t.height/s);e.translatePoint=new et(c,m),e.scale=d,this.triggerZoomEvent(a,i,"")}e.mapScaleValue=d,this.applyTransform(!0),this.maps.zoomNotApplied=!1,this.zoomingRect=null}},e.prototype.setInteraction=function(e){this.lastScale=1,this.interaction=e},e.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},e.prototype.performPinchZooming=function(e){var t=this.maps,i=t.tileZoomLevel,a=t.mapAreaRect;t.previousScale=t.scale,t.previousPoint=t.translatePoint;var o=t.tileTranslatePoint,n=Fe(this.touchStartList,this.touchMoveList),l=Ze(Ue(this.touchMoveList,this.maps)),r=n/this.lastScale;this.lastScale=n,this.pinchFactor*=r,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom));var s=this.pinchFactor;if(t.isTileMap){var d=s;this.getTileTranslatePosition(i,d,{x:l.x,y:l.y}),t.tileZoomLevel=d,t.translatePoint.x=(t.tileTranslatePoint.x-.5*Math.pow(2,d))/Math.pow(2,d),t.translatePoint.y=(t.tileTranslatePoint.y-.5*Math.pow(2,d))/Math.pow(2,d),t.scale=Math.pow(2,d),this.triggerZoomEvent(o,i,""),t.mapLayerPanel.generateTiles(d,t.tileTranslatePoint)}else{var p=t.baseMapRectBounds.min,h=t.baseMapRectBounds.max,c=Math.abs(p.x-h.x),m=Math.abs(p.y-h.y),u=t.translatePoint,g=Math.abs(t.baseMapRectBounds.max.y-t.baseMapRectBounds.min.y)*s,y=u.x-(a.width/t.scale-a.width/s)/(a.width/l.x),f=u.y-(a.height/t.scale-a.height/s)/(a.height/l.y);y=g<t.mapAreaRect.height?a.x+(-p.x+(a.width/2-c/2)):y,f=g<t.mapAreaRect.height?a.y+(-p.y+(a.height/2-m/2)):f,t.translatePoint=new et(y,f),t.scale=s,this.triggerZoomEvent(o,i,"")}this.applyTransform()},e.prototype.drawZoomRectangle=function(){var e,t,i,a,o=this.maps,n=this.mouseDownPoints,l=this.mouseMovePoints,r={width:1,color:"#009900"};i=Math.abs(l.x-n.x),a=Math.abs(l.y-n.y),e=l.x>n.x?n.x:n.x-i,t=l.y>n.y?n.y:n.y-a;ue(o.element.id).getBoundingClientRect();if(e>o.mapAreaRect.x&&e<o.mapAreaRect.x+o.mapAreaRect.width&&t>o.mapAreaRect.y&&t<o.mapAreaRect.y+o.mapAreaRect.height){this.zoomingRect=new mt(e,t,i,a);var s=o.renderer.createSvg({id:o.element.id+"_Selection_Rect_Zooming",width:o.availableSize.width,height:o.availableSize.height}),d=new lt(o.element.id+"_ZoomRect","#d3d3d3",r,.5,this.zoomingRect,0,0,"","3");s.appendChild(o.renderer.drawRectangle(d)),ue(o.element.id+"_Secondary_Element").appendChild(s)}},e.prototype.animateTransform=function(e,t,i,a,o){var n=this.currentLayer.animationDuration;if(!t||0===n)return void e.setAttribute("transform","scale("+o+") translate( "+i+" "+a+" )");Ve(e,0,n,new ct(i,a),o,this.maps.mapAreaRect,this.maps)},e.prototype.applyTransform=function(e){var i;this.templateCount=0;var a,o=this.maps.scale,n=this.maps.translatePoint.x,l=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&de(this.maps.element.id+"_mapsTooltip"),this.layerCollectionEle){for(var r=0;r<this.layerCollectionEle.childElementCount;r++){var s=this.layerCollectionEle.childNodes[r];if("g"===s.tagName){this.templateCount++,this.index=s.id.indexOf("_LayerIndex_")>-1&&parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index];for(var d=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),p=0;p<s.childElementCount;p++){var h=s.childNodes[p];if(h.id.indexOf("_Markers_Group")>-1||h.id.indexOf("_bubble_Group")>-1||h.id.indexOf("_dataLableIndex_Group")>-1){if(h.id.indexOf("_Markers_Group")>-1){if(this.isPanning||this.markerTranslates(h.childNodes[0],d,n,l,o,"Marker",s,e),h=s.childNodes[p],!t.isNullOrUndefined(h)){for(O=0;O<h.childElementCount;O++){this.markerTranslate(h.childNodes[O],d,n,l,o,"Marker",e);parseInt(h.childNodes[O].id.split("_LayerIndex_")[1].split("_")[0],10);for(var c=parseInt(h.childNodes[O].id.split("_dataIndex_")[1].split("_")[0],10),m=parseInt(h.childNodes[O].id.split("_MarkerIndex_")[1].split("_")[0],10),u=this.currentLayer.markerSettings[m].dataSource[c],g=0;g<this.currentLayer.markerSettings[m].initialMarkerSelection.length;g++)this.currentLayer.markerSettings[m].initialMarkerSelection[g].latitude!==u.latitude&&this.currentLayer.markerSettings[m].initialMarkerSelection[g].longitude!==u.longitude||this.maps.markerSelection(this.currentLayer.markerSettings[m].selectionSettings,this.maps,h.children[O],this.currentLayer.markerSettings[m].dataSource[c]);!this.maps.isTileMap&&this.currentLayer.animationDuration>0&&(a="visibility:hidden",h.setAttribute("style",a))}if(this.isPanning&&this.maps.markerModule.sameMarkerData.length>0?E(this.maps.markerModule.sameMarkerData,this.maps,h,!0):this.maps.markerModule.sameMarkerData.length>0&&(this.maps.markerModule.sameMarkerData=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&de(this.maps.element.id+"_mapsTooltip")),document.getElementById(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&!this.isPanning){var y=this.maps.mapsTooltipModule,f=h.querySelector("#"+y.tooltipTargetID);if(!t.isNullOrUndefined(f))if("hidden"===f.style.visibility)de(this.maps.element.id+"_mapsTooltip");else{var b=parseFloat(f.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),v=parseFloat(f.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]);this.maps.isTileMap&&(b+=+fe(this.maps.element.id+"_tile_parent").style.left.split("px")[0],v+=+fe(this.maps.element.id+"_tile_parent").style.top.split("px")[0]),y.svgTooltip.location.x=b,y.svgTooltip.location.y=v,y.svgTooltip.enableAnimation=!1}}}}else if(h.id.indexOf("_bubble_Group")>-1)for(var x=void 0,O=0;O<h.childElementCount;O++){(x=h.childNodes[O]).getAttribute("transform");i=parseFloat(x.id.split("_LayerIndex_")[1].split("_")[0]);for(var _=parseFloat(x.id.split("_BubbleIndex_")[1].split("_")[0]),c=parseFloat(x.id.split("_BubbleIndex_")[1].split("_")[2]),M=0;M<this.maps.bubbleModule.bubbleCollection.length;M++){var L=this.maps.bubbleModule.bubbleCollection[M];if(L.LayerIndex===i&&L.BubbleIndex===_&&L.DataIndex===c){var C=(L.center.x+n)*o,P=(L.center.y+l)*o,w=this.currentLayer.animationDuration;e&&0!==w?Ge(x,0,w,new ct(C,P)):x.setAttribute("transform","translate( "+C+" "+P+" )");break}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1){this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections;for(O=0;O<h.childElementCount;O++)if(h.childNodes[O].id.indexOf("_LabelIndex_")>-1){var I=parseFloat(h.childNodes[O].id.split("_LabelIndex_")[1].split("_")[0]);this.zoomshapewidth=this.shapeZoomLocation[I].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(h.childNodes[O],d,n,l,o,"DataLabel",e);var T=this.maps.layers[this.index].dataLabelSettings.border;if(O>0&&T.width>1&&h.childNodes[O-1].id.indexOf("_rectIndex_")>-1){var k=(this.maps.zoomLabelPositions[I].location.x+n)*o,N=(this.maps.zoomLabelPositions[I].location.y+l)*o,z=S(h.childNodes[O].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),j=h.childNodes[O-1],A=k-z.width/2,B=N-z.height/2-5;j.setAttribute("x",A),j.setAttribute("y",B)}}}}else this.maps.isTileMap&&h.id.indexOf("_line_Group")>-1?(h.remove(),s.children.length>0&&s.children[0]?s.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),s.children[0]):s.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(je(h,this.index,o,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(h,e,n,l,o),this.shapeZoomLocation=h.childNodes)}}this.maps.arrangeTemplate();this.maps.isBlazor&&this.maps.blazorTemplates()}t.isNullOrUndefined(this.currentLayer)||e&&0!==this.currentLayer.animationDuration||this.processTemplate(n,l,o,this.maps)}},e.prototype.markerTranslates=function(e,i,a,o,n,l,r,s){var d=this;void 0===s&&(s=!1);var p,m=0,u=0,g=0,y=parseInt((e||r).id.split("_LayerIndex_")[1].split("_")[0],10);p=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group",class:"GroupElement",style:"pointer-events: auto;"}),document.getElementById(p.id)&&de(p.id);var f=this.maps.mapAreaRect,b=t.createElement("div",{id:this.maps.element.id+"_LayerIndex_"+y+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+f.y+"px;left:"+f.x+"px;height:"+f.height+"px;width:"+f.width+"px;"});document.getElementById(b.id)&&de(b.id);var v=this.maps.layersCollection[y];v.markerSettings.map(function(e,s){var f=e.dataSource;Array.prototype.forEach.call(f,function(x,S){d.maps.markerNullCount=s>=0&&0===S?0:d.maps.markerNullCount;var O={template:e.template,data:x,maps:d.maps,marker:e,cancel:!1,name:ei,fill:e.fill,colorValuePath:e.colorValuePath,shapeValuePath:e.shapeValuePath,height:e.height,width:e.width,imageUrl:e.imageUrl,shape:e.shape,border:e.border};if(O=T(O,x),O=I(O,x),d.maps.isBlazor){O.maps,O.marker;var _=Pi(O,["maps","marker"]);O=_;e.longitudeValuePath=t.isNullOrUndefined(e.longitudeValuePath)?t.isNullOrUndefined(x.Longitude)?t.isNullOrUndefined(x.longitude)?null:"longitude":"Longitude":e.longitudeValuePath,e.latitudeValuePath=t.isNullOrUndefined(e.latitudeValuePath)?t.isNullOrUndefined(x.Latitude)?t.isNullOrUndefined(x.latitude)?null:"latitude":"Latitude":e.latitudeValuePath}d.maps.trigger("markerRendering",O,function(_){e.shapeValuePath!==O.shapeValuePath&&(O=T(O,x)),e.colorValuePath!==O.colorValuePath&&(O=I(O,x));var M=t.isNullOrUndefined(e.latitudeValuePath)?t.isNullOrUndefined(x.latitude)?t.isNullOrUndefined(x.Latitude)?0:x.Latitude:parseFloat(x.latitude):Number(w(x,e.latitudeValuePath)),L=t.isNullOrUndefined(e.longitudeValuePath)?t.isNullOrUndefined(x.longitude)?t.isNullOrUndefined(x.Longitude)?0:x.Longitude:parseFloat(x.longitude):Number(w(x,e.longitudeValuePath));if(d.maps.isBlazor){for(var C={},P=0,N=[],E=0;E<Object.keys(x).length;E++)"text"!==Object.keys(x)[E].toLowerCase()&&"latitude"!==Object.keys(x)[E].toLowerCase()&&"blazortemplateid"!==Object.keys(x)[E].toLowerCase()&&"longitude"!==Object.keys(x)[E].toLowerCase()&&"name"!==Object.keys(x)[E].toLowerCase()&&(C.text=N,N[P]=x[Object.keys(x)[E].toLowerCase()],P++);x.text=C.text}var A=e.offset;if(!O.cancel&&e.visible&&!t.isNullOrUndefined(L)&&!t.isNullOrUndefined(M)){var B=d.maps.element.id+"_LayerIndex_"+y+"_MarkerIndex_"+s+"_dataIndex_"+S,F=d.maps.isTileMap?c(new ct(L,M),d.maps.tileZoomLevel,d.maps.tileTranslatePoint,!0):h(M,L,i,v,d.maps),R=(0!==v.animationDuration||t.isNullOrUndefined(d.maps.zoomModule),{x:a,y:o});!O.template||isNaN(F.x)||isNaN(F.y)?O.template||isNaN(F.x)||isNaN(F.y)||(u++,z(O,e,f,S,F,R,B,A,n,d.maps,p)):(g++,j(O,void 0,B,x,s,b,F,n,A,d.maps))}m+=isNaN(M)||isNaN(L)?1:0,g+=O.cancel?1:0,u+=O.cancel?1:0,d.maps.markerNullCount=t.isNullOrUndefined(M)&&t.isNullOrUndefined(L)?d.maps.markerNullCount+1:d.maps.markerNullCount;f.length,d.maps.markerNullCount;p.childElementCount===f.length-g-m&&"Template"!==l&&(r.appendChild(p),v.markerClusterSettings.allowClustering&&(d.maps.svgObject.appendChild(p),d.maps.element.appendChild(d.maps.svgObject),k(v,p,d.maps,y,p,r,!0,!0))),b.childElementCount===f.length-u-m&&ue(d.maps.element.id+"_Secondary_Element")&&(ue(d.maps.element.id+"_Secondary_Element").appendChild(b),v.markerClusterSettings.allowClustering&&k(v,b,d.maps,y,p,r,!1,!0))})})})},e.prototype.processTemplate=function(e,i,a,o){for(var n=0;n<this.templateCount;n++){this.currentLayer=o.layersCollection[n];var l=o.mapLayerPanel.calculateFactor(this.currentLayer),r=ue(o.element.id+"_LayerIndex_"+n+"_Markers_Template_Group"),s=ue(o.element.id+"_LayerIndex_"+n+"_Label_Template_Group");if(!t.isNullOrUndefined(r)&&r.childElementCount>0)for(d=0;d<r.childElementCount;d++)this.markerTranslate(r.childNodes[d],l,e,i,a,"Template");if(!t.isNullOrUndefined(s)&&s.childElementCount>0)for(var d=0;d<s.childElementCount;d++)this.dataLabelTranslate(s.childNodes[d],l,e,i,a,"Template")}},e.prototype.dataLabelTranslate=function(e,i,a,o,n,l,r){void 0===r&&(r=!1);var s,d,p,h,c,m=this.maps.dataLabelModule.dataLabelCollections,u=(e.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),g=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0])),y=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);e.id.indexOf("_LabelIndex_")>-1&&(c=parseFloat(e.id.split("_LabelIndex_")[1].split("_")[0]));for(var f=this.currentLayer.animationDuration,b=0;b<m.length;b++){var v=m[b];if(v.layerIndex===g&&v.shapeIndex===y&&v.labelIndex===c){var x=v.location.x,O=v.location.y;if("Template"===l){var _=ue(this.maps.element.id+"_Layer_Collections");x=Math.abs(this.maps.baseMapRectBounds.min.x-x)*n,O=Math.abs(this.maps.baseMapRectBounds.min.y-O)*n;var M=e.getBoundingClientRect(),L=_.getBoundingClientRect(),C=e.parentElement.getBoundingClientRect(),P=x+(L.left-C.left)-M.width/2,w=O+(L.top-C.top)-M.height/2;e.style.left=P+"px",e.style.top=w+"px"}else{x=(x+a)*n;var I=(O=(O+o)*n)-(h=S(p=v.dataLabelText,u)).height/4,T=O+h.height/4,k={rightWidth:x+h.width/2,leftWidth:x-h.width/2,heightTop:I,heightBottom:T};if(r&&0!==f||e.setAttribute("transform","translate( "+x+" "+O+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(n>1?(s=this.zoomshapewidth.width>=h.width?p:"",e.innerHTML=s):(s=this.maps.dataLabelShape[b]>=h.width?p:"",e.innerHTML=s)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(n>1?(s=re(this.zoomshapewidth.width,p,u),e.innerHTML=s):(s=re(this.maps.dataLabelShape[b],p,u),e.innerHTML=s)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var N=0;N<this.intersect.length;N++)if(!t.isNullOrUndefined(this.intersect[N])){if(!(k.leftWidth>this.intersect[N].rightWidth||k.rightWidth<this.intersect[N].leftWidth||k.heightTop>this.intersect[N].heightBottom||k.heightBottom<this.intersect[N].heightTop)){s="",e.innerHTML=s;break}s=t.isNullOrUndefined(s)?p:s,e.innerHTML=s}this.intersect.push(k)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(var E=0;E<this.intersect.length;E++)if(!t.isNullOrUndefined(this.intersect[E]))if(k.rightWidth<this.intersect[E].leftWidth||k.leftWidth>this.intersect[E].rightWidth||k.heightBottom<this.intersect[E].heightTop||k.heightTop>this.intersect[E].heightBottom)d=t.isNullOrUndefined(s)?p:s,n>1&&(d=re(this.zoomshapewidth.width,d,u)),e.innerHTML=d;else{if(k.leftWidth>this.intersect[E].leftWidth){d=re(j=(z=this.intersect[E].rightWidth-k.leftWidth)-(k.rightWidth-k.leftWidth),s=t.isNullOrUndefined(s)?p:s,u),e.innerHTML=d;break}if(k.leftWidth<this.intersect[E].leftWidth){var z=k.rightWidth-this.intersect[E].leftWidth,j=Math.abs(z-(k.rightWidth-k.leftWidth));d=re(j,s=t.isNullOrUndefined(s)?p:s,u),e.innerHTML=d;break}}this.intersect.push(k),t.isNullOrUndefined(d)&&(d=re(this.zoomshapewidth.width,p,u),e.innerHTML=d)}else Ge(e,0,f,new ct(x,O))}}}},e.prototype.markerTranslate=function(e,i,a,o,n,l,r){void 0===r&&(r=!1);var s=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),d=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),p=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),m=this.maps.layersCollection[s],u=m.markerSettings[d];if(!t.isNullOrUndefined(u)&&!t.isNullOrUndefined(u.dataSource)&&!t.isNullOrUndefined(u.dataSource[p])){if(this.maps.isBlazor){u.longitudeValuePath=t.isNullOrUndefined(u.longitudeValuePath)?t.isNullOrUndefined(u.dataSource[p].Longitude)?t.isNullOrUndefined(u.dataSource[p].longitude)?null:"longitude":"Longitude":u.longitudeValuePath,u.latitudeValuePath=t.isNullOrUndefined(u.latitudeValuePath)?t.isNullOrUndefined(u.dataSource[p].Latitude)?t.isNullOrUndefined(u.dataSource[p].latitude)?null:"latitude":"Latitude":u.latitudeValuePath;for(var g={},y=0,f=[],b=0;b<Object.keys(u.dataSource[p]).length;b++)"text"!==Object.keys(u.dataSource[p])[b].toLowerCase()&&"longitude"!==Object.keys(u.dataSource[p])[b].toLowerCase()&&"latitude"!==Object.keys(u.dataSource[p])[b].toLowerCase()&&"blazortemplateid"!==Object.keys(u.dataSource[p])[b].toLowerCase()&&"name"!==Object.keys(u.dataSource[p])[b].toLowerCase()&&(g.text=f,f[y]=u.dataSource[p][Object.keys(u.dataSource[p])[b].toLowerCase()],y++);u.dataSource[p].text=g.text}var v=t.isNullOrUndefined(u.longitudeValuePath)?t.isNullOrUndefined(u.dataSource[p].longitude)?t.isNullOrUndefined(u.dataSource[p].Latitude)?0:parseFloat(u.dataSource[p].Latitude):parseFloat(u.dataSource[p].longitude):Number(w(u.dataSource[p],u.longitudeValuePath)),x=t.isNullOrUndefined(u.latitudeValuePath)?t.isNullOrUndefined(u.dataSource[p].latitude)?t.isNullOrUndefined(u.dataSource[p].Latitude)?0:parseFloat(u.dataSource[p].Latitude):parseFloat(u.dataSource[p].latitude):Number(w(u.dataSource[p],u.latitudeValuePath)),S=this.currentLayer.animationDuration,O=this.maps.isTileMap?c(new et(v,x),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):h(x,v,i,m,this.maps);if(this.maps.isTileMap)if("Template"===l){var _=e.getBoundingClientRect();if(e.style.left=O.x-_.width/2+u.offset.x+"px",e.style.top=O.y-_.height/2+u.offset.y+"px","GoogleStaticMap"===this.maps.layers[this.maps.baseLayerIndex].layerType){var M=ue(this.maps.element.id+"_StaticGoogleMap").getBoundingClientRect();"none"!==e.style.display&&((M.x>_.x||M.x+640<_.x+_.width)&&(M.y>_.y||M.y+M.height<_.y+_.height)?e.style.display="none":(M.x>_.x||M.x+640<_.x+_.width)&&(e.style.display="none"))}}else O.x+=u.offset.x,O.y+=u.offset.y,e.setAttribute("transform","translate( "+O.x+" "+O.y+" )");else if("Template"===l){O.x=Math.abs(this.maps.baseMapRectBounds.min.x-O.x)*n,O.y=Math.abs(this.maps.baseMapRectBounds.min.y-O.y)*n;var L=ue(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),C=e.parentElement.getBoundingClientRect();e.style.left=O.x+(L.left-C.left)+u.offset.x+"px",e.style.top=O.y+(L.top-C.top)+u.offset.y+"px",e.style.transform="translate(-50%, -50%)"}else O.x=(O.x+a)*n+u.offset.x,O.y=(O.y+o)*n+u.offset.y,r&&0!==S?Ge(e,0,S,O):e.setAttribute("transform","translate( "+O.x+" "+O.y+" )")}},e.prototype.panning=function(e,i,a,o){var n,l=this.maps,r=this.mouseDownPoints,s=this.mouseMovePoints,d=l.scale;l.markerZoomedState=!1,l.zoomPersistence=l.enablePersistence,l.defaultState=!1,l.initialCheck=!1;var p,h,c=l.translatePoint,m=l.tileTranslatePoint;if(i=t.isNullOrUndefined(i)?r.x-s.x:i,a=t.isNullOrUndefined(a)?r.y-s.y:a,l.isTileMap){if(this.maps.tileZoomLevel>1){p=l.tileTranslatePoint.x-i,h=l.tileTranslatePoint.y-a,this.distanceX=p-l.tileTranslatePoint.x,this.distanceY=h-l.tileTranslatePoint.y,l.tileTranslatePoint.x=p,l.tileTranslatePoint.y=h,(l.tileTranslatePoint.y>-10&&a<0||l.tileTranslatePoint.y<-256*(Math.pow(2,this.maps.tileZoomLevel)-2)&&a>0)&&(l.tileTranslatePoint.x=p+i,l.tileTranslatePoint.y=h+a),l.translatePoint.x=(l.tileTranslatePoint.x-i)/l.scale,l.translatePoint.y=(l.tileTranslatePoint.y-a)/l.scale;var u=this.maps.getTileGeoLocation(o);n={cancel:!1,name:"pan",maps:l.isBlazor?null:l,tileTranslatePoint:{previous:m,current:l.tileTranslatePoint},translatePoint:{previous:c,current:l.translatePoint},scale:l.scale,tileZoomLevel:l.tileZoomLevel,latitude:u.latitude,longitude:u.longitude},l.trigger("pan",n),l.mapLayerPanel.generateTiles(l.tileZoomLevel,l.tileTranslatePoint,"Pan"),this.applyTransform()}}else{p=c.x-i/d,h=c.y-a/d;var g=ue(l.element.id+"_Layer_Collections").getBoundingClientRect(),y=ue(l.element.id+"_svg").getBoundingClientRect(),f=i<0?g.left<=y.left+l.mapAreaRect.x:g.left+g.width>=y.left+y.width+l.mapAreaRect.x+l.margin.left,b=a<0?g.top<=y.top+l.mapAreaRect.y:g.top+g.height+l.margin.top>=y.top+y.height,v=this.maps.getGeoLocation(this.maps.layersCollection.length-1,o);n={cancel:!1,name:"pan",maps:l.isBlazor?null:l,tileTranslatePoint:{},translatePoint:{previous:c,current:new et(p,h)},scale:l.scale,tileZoomLevel:l.tileZoomLevel,latitude:v.latitude,longitude:v.longitude},l.trigger("pan",n),n.cancel||(f&&b?(l.translatePoint=new et(p,h),this.applyTransform()):f?(l.translatePoint=new et(p,l.translatePoint.y),this.applyTransform()):b&&(l.translatePoint=new et(l.translatePoint.x,h),this.applyTransform())),this.maps.zoomNotApplied=!1}l.zoomTranslatePoint=l.translatePoint,this.mouseDownPoints=this.mouseMovePoints,this.maps.zoomNotApplied=!1,this.isSingleClick=!1},e.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=t.isNullOrUndefined(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale,this.maps.translatePoint.y=t.isNullOrUndefined(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale,this.applyTransform(!1)},e.prototype.toolBarZooming=function(e,t){var i=this,a=this.maps;a.initialCheck=!1,a.defaultState="Reset"===t&&1===e&&!(a.zoomSettings.resetToInitial&&a.applyZoomReset)||"ZoomOut"===t&&1===e;var o=a.tileZoomLevel,n=a.previousScale=a.scale;a.markerZoomedState=!1,a.zoomPersistence=a.enablePersistence,a.mapScaleValue=e;var l=a.zoomSettings.maxZoom,r=a.zoomSettings.minZoom,s=a.mapAreaRect,d=a.previousPoint=a.translatePoint,p=a.tileTranslatePoint;if(a.previousProjection=a.projectionType,e="ZoomOut"===t&&1===Math.round(e)?1:e,e="Reset"===t?1:0===Math.round(e)?1:e,e=r>e&&"ZoomIn"===t?r+1:e,!a.isTileMap&&("ZoomIn"===t?e>=r&&e<=l:e>=r||a.isReset)){var h=a.baseMapRectBounds.min,c=a.baseMapRectBounds.max,m=Math.abs(c.x-h.x),u=Math.abs(h.y-c.y),g=d.x-(s.width/n-s.width/e)/2,y=d.y-(s.height/n-s.height/e)/2,f=Math.abs(a.baseMapRectBounds.max.y-a.baseMapRectBounds.min.y)*e;g=f<a.mapAreaRect.height?s.x+(-h.x+(s.width/2-m/2)):g,y=f<a.mapAreaRect.height?s.y+(-h.y+(s.height/2-u/2)):y,a.translatePoint=new et(g,y),a.zoomTranslatePoint=a.translatePoint,a.scale=e,this.triggerZoomEvent(p,o,t),this.applyTransform(!0)}else if(a.isTileMap&&(e>=r&&e<=l||a.isReset)){var b=o<r&&!a.isReset?r:e;a.scale=Math.pow(2,b-1),a.tileZoomLevel=b;var v={x:a.availableSize.width/2,y:a.availableSize.height/2};this.getTileTranslatePosition(o,b,v,t),(a.zoomSettings.resetToInitial&&a.applyZoomReset&&"Reset"===t||"ZoomOut"===t&&a.zoomSettings.resetToInitial&&a.applyZoomReset&&b<=a.initialZoomLevel)&&(a.initialCheck=!0,a.zoomPersistence=!1,a.tileTranslatePoint.x=a.initialTileTranslate.x,a.tileTranslatePoint.y=a.initialTileTranslate.y,b=a.tileZoomLevel=a.mapScaleValue=a.initialZoomLevel),this.triggerZoomEvent(p,o,t),a.translatePoint.y=(a.tileTranslatePoint.y-.01*a.scale)/a.scale,a.translatePoint.x=(a.tileTranslatePoint.x-.01*a.scale)/a.scale,document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),a.mapLayerPanel.generateTiles(b,a.tileTranslatePoint,t);document.getElementById(this.maps.element.id+"_tiles");setTimeout(function(){i.applyTransform(!0),document.getElementById(i.maps.element.id+"_LayerIndex_1")&&(document.getElementById(i.maps.element.id+"_LayerIndex_1").style.display="block")},250)}this.maps.zoomNotApplied=!1},e.prototype.createZoomingToolbars=function(){var e=this.maps;this.toolBarGroup=e.renderer.createGroup({id:e.element.id+"_Zooming_KitCollection",opacity:.3});var t=15,i=15,a=e.zoomSettings.toolBarOrientation,o=e.zoomSettings.toolbars,n='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/>';n+='<feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/>',n+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var l=e.zoomSettings.toolbars.length,r="Horizontal"===e.zoomSettings.toolBarOrientation?16*l+20*l:32,s="Horizontal"===e.zoomSettings.toolBarOrientation?32:16*l+20*l;this.toolBarGroup.appendChild(e.renderer.drawRectangle(new lt(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new mt(0,0,r,s),0,0)));var d=e.renderer.createDefs();d.innerHTML=n,this.toolBarGroup.appendChild(d);var p=e.renderer.drawRectangle(new lt(e.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new mt(0,0,r,s),0,0));p.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(p);for(var h=0;h<o.length;h++){var c=o[h];this.currentToolbarEle=e.renderer.createGroup({id:e.element.id+"_Zooming_ToolBar_"+c+"_Group",transform:"translate( "+t+" "+i+" ) "}),this.currentToolbarEle.setAttribute("class","e-maps-toolbar");var m="transparent",u="";switch(c.toLowerCase()){case"zoom":var g=void 0,y=void 0;u="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,",u+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571",u+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,",this.maps.zoomSettings.enablePanning&&!this.maps.zoomSettings.enableSelectionZooming?(g=m,y=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning&&this.maps.zoomSettings.enableSelectionZooming?(g=m,y=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming?(g=this.selectionColor,y=this.selectionColor):(g=m,y=this.maps.themeStyle.zoomFillColor),this.currentToolbarEle.appendChild(e.renderer.drawPath(new ot(e.element.id+"_Zooming_ToolBar_"+c,g,1,y,1,null,u+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))),this.zoomElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":u="M 8, 0 L 8, 16 M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new ot(e.element.id+"_Zooming_ToolBar_"+c+"_Path",m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomInElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":u="M 0, 8 L 16, 8",this.currentToolbarEle.appendChild(e.renderer.drawPath(new ot(e.element.id+"_Zooming_ToolBar_"+c,m,3,this.maps.themeStyle.zoomFillColor,1,null,u))),this.zoomOutElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":var f=void 0;u="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,",u+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z",this.maps.zoomSettings.enablePanning&&this.maps.zoomModule.isDragZoom?f="#737373":this.maps.zoomSettings.enablePanning?f=this.selectionColor:(f="#737373",this.currentToolbarEle.setAttribute("class","")),this.currentToolbarEle.appendChild(e.renderer.drawPath(new ot(e.element.id+"_Zooming_ToolBar_"+c,f,1,f,1,null,u))),this.panColor=f,this.panElements=this.currentToolbarEle,this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":u="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,",u+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,",u+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,",this.currentToolbarEle.appendChild(e.renderer.drawPath(new ot(e.element.id+"_Zooming_ToolBar_"+c,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,u+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"))),this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(e.renderer.drawCircle(new rt(e.element.id+"_Zooming_ToolBar_"+c+"_Rect",m,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,""))),t="Horizontal"===a?t+36:t,i="Horizontal"===a?i:i+36,this.toolBarGroup.appendChild(this.currentToolbarEle)}},e.prototype.performToolBarAction=function(e){var t=e.target;e.stopImmediatePropagation();var i="touch"===e.pointerType||"2"===e.pointerType||e.type.indexOf("touch")>-1,a=t.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(a)):"mousedown"!==e.type&&"pointerdown"!==e.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(a))},e.prototype.performZoomingByToolBar=function(e){var t=this.maps;switch(t.isReset=!1,e.toLowerCase()){case"zoom":this.panColor=this.fillColor,this.zoomColor=this.selectionColor,this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.fillColor);break;case"pan":this.maps.zoomSettings.enablePanning?this.panColor=this.selectionColor:this.panColor="#737373",this.zoomColor=this.fillColor,this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.panColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor));break;case"zoomin":t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":t.staticMapZoom=t.tileZoomLevel,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0,t.markerCenterLatitude=null,t.markerCenterLongitude=null,this.toolBarZooming(1,"Reset"),this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,"#737373"))}this.panningStyle(e.toLowerCase())},e.prototype.panningStyle=function(e){var t=ue(this.maps.element.id+"_svg");"pan"===e||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},e.prototype.applySelection=function(e,t){if(e)for(var i,a=0;a<e.childElementCount;a++)"circle"!==(i=e.childNodes[a]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},e.prototype.showTooltip=function(e){var t=e.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||ke("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),e.pageY+10,e.pageX+10,"10px")},e.prototype.removeTooltip=function(){ue("EJ2_Map_Toolbar_Tip")&&t.remove(ue("EJ2_Map_Toolbar_Tip"))},e.prototype.alignToolBar=function(){var e=this.maps,i=t.createElement("div",{id:e.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),a=e.renderer.createSvg({id:e.element.id+"_Zooming_ToolBar",width:10,height:10});a.appendChild(this.toolBarGroup),i.appendChild(a),ue(e.element.id+"_Secondary_Element")&&ue(e.element.id+"_Secondary_Element").appendChild(i);var o=this.toolBarGroup.getBoundingClientRect();a.setAttribute("height",(o.height+5).toString()),a.setAttribute("width",(o.width+5).toString());var n=t.isNullOrUndefined(e.totalRect)?e.mapAreaRect:e.totalRect,l=0,r=0;switch(e.zoomSettings.verticalAlignment){case"Near":r=n.y;break;case"Center":r=n.height/2-o.height/2;break;case"Far":r=n.height-o.height-10}switch(e.zoomSettings.horizontalAlignment){case"Near":l=n.x;break;case"Center":l=n.width/2-o.width/2;break;case"Far":l=n.width-o.width-10}i.style.left=l+"px",i.style.top=r+"px";var s=this.maps.zoomSettings.highlightColor,d=" .e-maps-toolbar:hover > circle { stroke:"+s+"; } .e-maps-toolbar:hover > path { fill: "+s+" ;  stroke: "+s+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",p=document.createElement("style");p.appendChild(document.createTextNode(d)),i.appendChild(p)},e.prototype.wireEvents=function(e,i){t.EventHandler.add(e,t.Browser.touchStartEvent,i,this),t.EventHandler.add(e,"mouseover",this.showTooltip,this),t.EventHandler.add(e,"mouseout",this.removeTooltip,this)},e.prototype.mapMouseWheel=function(e){if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){var t=this.maps;t.availableSize;t.markerZoomedState=!1,t.zoomPersistence=t.enablePersistence;var i=this.getMousePosition(e.pageX,e.pageY),a=t.tileZoomLevel,o=t.scale,n=t.isTileMap?a:o;if(i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height){e.preventDefault();var l="mozilla"!==this.browserName||this.isPointer?e.wheelDelta/120>0?"ZoomIn":"ZoomOut":-e.detail/3>0?"ZoomIn":"ZoomOut";"ZoomIn"===l?(t.mapScaleValue=n+1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.performZooming(i,n+1,l)):(t.mapScaleValue=n-1,t.staticMapZoom=t.tileZoomLevel,1===t.mapScaleValue&&(t.markerCenterLatitude=null,t.markerCenterLongitude=null),t.staticMapZoom>1&&t.staticMapZoom<22&&(t.staticMapZoom-=1),this.performZooming(i,n-1,l))}}},e.prototype.doubleClick=function(e){var t=e.pageX,i=e.pageY;e.target;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(e.target.id.indexOf("_Zooming_")>-1)){var a=this.getMousePosition(t,i),o=this.maps,n=(o.availableSize,o.tileZoomLevel),l=o.scale;o.mapScaleValue=o.mapScaleValue+1;var r=o.isTileMap?n:l;a.x>o.mapAreaRect.x&&a.x<o.mapAreaRect.x+o.mapAreaRect.width&&a.y>o.mapAreaRect.y&&a.y<o.mapAreaRect.y+o.mapAreaRect.height&&this.performZooming(a,r+1,"ZoomIn")}},e.prototype.mouseDownHandler=function(e){var t,i,a=null;e.target;"touchstart"===e.type?(this.isTouch=!0,a=e.touches,e.target,t=a[0].clientX,i=a[0].clientY):(t=e.pageX,i=e.pageY,e.target),this.maps.zoomSettings.enablePanning?this.isPanning=this.panColor===this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor!==this.selectionColor:this.isPanning=this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor,this.mouseDownLatLong={x:t,y:i},this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable,this.mouseDownPoints=this.getMousePosition(t,i),this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=a.length),this.isSingleClick=!0},e.prototype.mouseMoveHandler=function(e){var i,a,o,n=this.maps,l=null,r=this.maps.zoomSettings;"touchmove"===e.type?(this.isTouch=!0,o=e.target,i=(l=e.touches)[0].clientX,a=l[0].clientY):(i=e.pageX,a=e.pageY,o=e.target),ue(n.element.id+"_Zooming_KitCollection")&&(o.id.indexOf("_Zooming_")>-1?(ue(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(this.maps.zoomSettings.enablePanning||(o.id.indexOf("_Zooming_ToolBar")>-1||o.id.indexOf("_Zooming_Rect")>-1)&&(ue(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","0.3"),ue(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","0.3")))):(ue(n.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"),!this.maps.zoomSettings.enablePanning&&document.getElementById(n.element.id+"_Zooming_ToolBar_Pan_Group")&&(ue(n.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","1"),ue(n.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","1")))),this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===l.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=Be(e)):2===this.touchStartList.length&&2===l.length&&(this.touchMoveList=Be(e),e.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(e)),this.firstMove=!1),this.mouseMovePoints=this.getMousePosition(i,a);e.target.id,e.target;r.enable&&this.isPanning&&(t.Browser.isDevice&&l.length>1||!t.Browser.isDevice)&&(e.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:i,y:a},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null,e),this.mouseDownLatLong.x=i,this.mouseDownLatLong.y=a)),(this.isTouch?1===l.length&&this.rectZoomingStart:this.rectZoomingStart)&&(e.preventDefault(),this.maps.zoomSettings.enableSelectionZooming&&this.drawZoomRectangle())},e.prototype.mouseUpHandler=function(e){this.maps;this.rectZoomingStart=!1,this.isPanning=!1,this.isSingleClick=!!this.isSingleClick,this.isTouch=!1,this.touchStartList=[],this.touchMoveList=[],this.lastScale=1,this.maps.element.style.cursor="auto",t.isNullOrUndefined(this.distanceX)&&t.isNullOrUndefined(this.distanceY)||t.isNullOrUndefined(this.currentLayer)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var i=ue(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.enableSelectionZooming&&(t.remove(i),this.performRectZooming()),this.mouseMoveLatLong={x:0,y:0},this.mouseDownLatLong={x:0,y:0}},e.prototype.mouseCancelHandler=function(e){this.isPanning=!1,this.isTouch=!1,this.rectZoomingStart=!1;var i=ue(this.maps.element.id+"_Selection_Rect_Zooming");i&&this.maps.zoomSettings.enable&&(t.remove(i),this.performRectZooming())},e.prototype.click=function(e){var t=this.maps;if(t.markerModule&&t.markerModule.sameMarkerData.length>0||e.target.id.indexOf("MarkerIndex")>-1&&-1==e.target.id.indexOf("cluster"))return null;if(this.isSingleClick&&t.zoomSettings.zoomOnClick&&!(e.target.id.indexOf("_Zooming_")>-1)&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var i=e.pageX,a=e.pageY,o=this.getMousePosition(i,a),n=t.tileZoomLevel,l=t.scale;t.mapScaleValue=t.mapScaleValue+1;var r=t.isTileMap?n:l;o.x>t.mapAreaRect.x&&o.x<t.mapAreaRect.x+t.mapAreaRect.width&&o.y>t.mapAreaRect.y&&o.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(o,r+1,"ZoomIn")}},e.prototype.getMousePosition=function(e,t){var i=this.maps,a=i.element.getBoundingClientRect(),o=i.element.ownerDocument.defaultView.pageXOffset,n=i.element.ownerDocument.defaultView.pageYOffset,l=i.element.ownerDocument.documentElement.clientTop,r=i.element.ownerDocument.documentElement.clientLeft,s=a.left+o-r,d=a.top+n-l;return new et(Math.abs(e-s),Math.abs(t-d))},e.prototype.addEventListener=function(){this.maps.isDestroyed||(t.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),t.EventHandler.add(this.maps.element,"click",this.click,this),t.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(t.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(t.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(t.Browser.touchEndEvent,this.mouseUpHandler,this),t.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},e.prototype.removeEventListener=function(){this.maps.isDestroyed||(t.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),t.EventHandler.remove(this.maps.element,"click",this.click),t.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(t.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(t.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(t.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},e.prototype.getModuleName=function(){return"Zoom"},e.prototype.destroy=function(e){this.removeEventListener()},e}(),Ii=function(){function e(e){this.control=e}return e.prototype.print=function(e){var i=this;this.printWindow=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight);var a={cancel:!1,htmlContent:this.getHTMLContent(e),name:"beforePrint"};this.control.trigger("beforePrint",a,function(e){a.cancel||t.print(a.htmlContent,i.printWindow)})},e.prototype.getHTMLContent=function(e){var i=t.createElement("div");return e?e instanceof Array?Array.prototype.forEach.call(e,function(e){i.appendChild(fe(e).cloneNode(!0))}):e instanceof Element?i.appendChild(e.cloneNode(!0)):i.appendChild(fe(e).cloneNode(!0)):i.appendChild(this.control.element.cloneNode(!0)),i},e.prototype.getModuleName=function(){return"Print"},e.prototype.destroy=function(e){},e}(),Ti=function(){function e(e){this.control=e}return e.prototype.export=function(e,i,a){var o=this;return new Promise(function(n,l){var r,s=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:o.control.availableSize.width.toString(),height:o.control.availableSize.height.toString()}}),d=!(t.Browser.userAgent.toString().indexOf("HeadlessChrome")>-1),p=(document.getElementById(o.control.element.id+"_ToolBar"),document.getElementById(o.control.element.id+"_Tile_SVG_Parent"));if(o.control.isTileMap){var h=document.getElementById(o.control.element.id+"_Tile_SVG");r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+o.control.svgObject.outerHTML+h.outerHTML+"</svg>"}else r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+o.control.svgObject.outerHTML+"</svg>";var c=window.URL.createObjectURL(new Blob("SVG"===e?[r]:[(new XMLSerializer).serializeToString(o.control.svgObject)],{type:"image/svg+xml"}));if("SVG"===e)a?x(i,e,c,d):n(null);else{var m=new Image,u=s.getContext("2d");if(o.control.isTileMap)for(var g=new XMLHttpRequest,y=o.control.mapLayerPanel.tiles.length,f=0;f<=y+1;f++)!function(t){var l=document.getElementById("tile_"+(t-1)),r=new Image;r.crossOrigin="Anonymous",u.fillStyle=o.control.background?o.control.background:"#FFFFFF",u.fillRect(0,0,o.control.availableSize.width,o.control.availableSize.height),u.font=o.control.titleSettings.textStyle.size+" Arial",u.fillStyle=document.getElementById(o.control.element.id+"_Map_title").getAttribute("fill"),u.fillText(o.control.titleSettings.text,parseFloat(document.getElementById(o.control.element.id+"_Map_title").getAttribute("x")),parseFloat(document.getElementById(o.control.element.id+"_Map_title").getAttribute("y"))),r.onload=function(){if(0===t||t===y+1?0===t?(u.setTransform(1,0,0,1,0,0),u.rect(0,parseFloat(p.style.top),parseFloat(p.style.width),parseFloat(p.style.height)),u.clip()):u.setTransform(1,0,0,1,parseFloat(p.style.left),parseFloat(p.style.top)):u.setTransform(1,0,0,1,parseFloat(l.style.left)+10,parseFloat(l.style.top)+parseFloat(document.getElementById(o.control.element.id+"_tile_parent").style.top)),u.drawImage(r,0,0),t===y+1){localStorage.setItem("local-canvasImage",s.toDataURL("image/png"));var h=localStorage.getItem("local-canvasImage");a?(x(i,e,h,d),localStorage.removeItem("local-canvasImage")):"PNG"===e?n(h):"JPEG"===e&&n(s.toDataURL("image/jpeg"))}},0===t||t===y+1?0===t?r.src=c:setTimeout(function(){r.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(document.getElementById(o.control.element.id+"_Tile_SVG"))],{type:"image/svg+xml"}))},300):(g.open("GET",l.children[0].getAttribute("src"),!0),g.send(),r.src=l.children[0].getAttribute("src"))}(f);else m.onload=function(){u.drawImage(m,0,0),window.URL.revokeObjectURL(c),a?x(i,e,s.toDataURL("image/png").replace("image/png","image/octet-stream"),d):"PNG"===e?n(s.toDataURL("image/png")):"JPEG"===e&&n(s.toDataURL("image/jpeg"))},m.src=c}})},e.prototype.getModuleName=function(){return"ImageExport"},e.prototype.destroy=function(e){},e}(),ki=function(){function e(e){this.control=e}return e.prototype.export=function(e,i,a,n){var l=this;return new Promise(function(r,s){var d=t.createElement("canvas",{id:"ej2-canvas",attrs:{width:l.control.availableSize.width.toString(),height:l.control.availableSize.height.toString()}});n=t.isNullOrUndefined(n)?o.PdfPageOrientation.Landscape:n;var p=document.getElementById(l.control.element.id+"_Tile_SVG_Parent"),h=window.URL.createObjectURL(new Blob("SVG"===e?[void 0]:[(new XMLSerializer).serializeToString(l.control.svgObject)],{type:"image/svg+xml"})),c=new o.PdfDocument,m=new Image,u=d.getContext("2d");if(l.control.isTileMap)for(var g=new XMLHttpRequest,y=l.control.mapLayerPanel.tiles.length,f=0;f<=y+1;f++)!function(t){var s=document.getElementById("tile_"+(t-1)),m=new Image;m.crossOrigin="Anonymous",u.fillStyle=l.control.background?l.control.background:"#FFFFFF",u.fillRect(0,0,l.control.availableSize.width,l.control.availableSize.height),u.font=l.control.titleSettings.textStyle.size+" Arial",u.fillStyle=document.getElementById(l.control.element.id+"_Map_title").getAttribute("fill"),u.fillText(l.control.titleSettings.text,parseFloat(document.getElementById(l.control.element.id+"_Map_title").getAttribute("x")),parseFloat(document.getElementById(l.control.element.id+"_Map_title").getAttribute("y"))),m.onload=function(){if(0===t||t===y+1?0===t?(u.setTransform(1,0,0,1,0,0),u.rect(0,parseFloat(p.style.top),parseFloat(p.style.width),parseFloat(p.style.height)),u.clip()):u.setTransform(1,0,0,1,parseFloat(p.style.left),parseFloat(p.style.top)):u.setTransform(1,0,0,1,parseFloat(s.style.left)+10,parseFloat(s.style.top)+parseFloat(document.getElementById(l.control.element.id+"_tile_parent").style.top)),u.drawImage(m,0,0),t===y+1&&"PDF"===e){localStorage.setItem("saved-image-example",d.toDataURL("image/jpeg"));var h=localStorage.getItem("saved-image-example");c.pageSettings.orientation=n,h=h.slice(h.indexOf(",")+1),c.pages.add().graphics.drawImage(new o.PdfBitmap(h),0,0,l.control.availableSize.width-60,l.control.availableSize.height),a?(c.save(i+".pdf"),c.destroy()):r(null)}},0===t||t===y+1?0===t?m.src=h:setTimeout(function(){m.src=window.URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(document.getElementById(l.control.element.id+"_Tile_SVG"))],{type:"image/svg+xml"}))},300):(g.open("GET",s.children[0].getAttribute("src"),!0),g.send(),m.src=s.children[0].getAttribute("src"))}(f);else m.onload=function(){if(u.drawImage(m,0,0),window.URL.revokeObjectURL(h),"PDF"===e){var t=d.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");c.pageSettings.orientation=n,t=t.slice(t.indexOf(",")+1),c.pages.add().graphics.drawImage(new o.PdfBitmap(t),0,0,l.control.availableSize.width-60,l.control.availableSize.height),a?(c.save(i+".pdf"),c.destroy()):r(null)}},m.src=h})},e.prototype.getModuleName=function(){return"PdfExport"},e.prototype.destroy=function(e){},e}();return gi.Inject(fi,Si,$t,_i,Li,Ci,wi,vi,xi,ci,Ii,ki,Ti),e.Maps=gi,e.load="load",e.loaded="loaded",e.click="click",e.rightClick="rightClick",e.doubleClick="doubleClick",e.resize="resize",e.tooltipRender="tooltipRender",e.shapeSelected="shapeSelected",e.shapeHighlight="shapeHighlight",e.mousemove="mousemove",e.mouseup="mouseup",e.mousedown="mousedown",e.layerRendering="layerRendering",e.shapeRendering="shapeRendering",e.markerRendering=ei,e.markerClusterRendering=ti,e.markerClick=ii,e.markerClusterClick=ai,e.markerMouseMove=oi,e.markerClusterMouseMove=ni,e.dataLabelRendering="dataLabelRendering",e.bubbleRendering="bubbleRendering",e.bubbleClick="bubbleClick",e.bubbleMouseMove="bubbleMouseMove",e.animationComplete=li,e.legendRendering="legendRendering",e.annotationRendering="annotationRendering",e.itemSelection=ri,e.itemHighlight="itemHighlight",e.beforePrint="beforePrint",e.zoomIn="zoomIn",e.zoomOut="zoomOut",e.pan="pan",e.Annotation=Ot,e.Arrow=_t,e.Font=Mt,e.Border=Lt,e.CenterPosition=Ct,e.TooltipSettings=Pt,e.Margin=wt,e.ConnectorLineSettings=It,e.MarkerClusterSettings=Tt,e.MarkerClusterData=kt,e.ColorMappingSettings=Nt,e.InitialMarkerSelectionSettings=Et,e.InitialShapeSelectionSettings=zt,e.SelectionSettings=jt,e.HighlightSettings=At,e.NavigationLineSettings=Bt,e.BubbleSettings=Ft,e.CommonTitleSettings=Rt,e.SubTitleSettings=Ut,e.TitleSettings=Zt,e.ZoomSettings=Dt,e.ToggleLegendSettings=Vt,e.LegendSettings=Ht,e.DataLabelSettings=Gt,e.ShapeSettings=Wt,e.MarkerBase=qt,e.MarkerSettings=Xt,e.LayerSettings=Yt,e.Tile=Jt,e.MapsAreaSettings=Qt,e.Size=$e,e.stringToNumber=n,e.calculateSize=l,e.createSvg=r,e.getMousePosition=s,e.degreesToRadians=d,e.radiansToDegrees=p,e.convertGeoToPoint=h,e.convertTileLatLongToPoint=c,e.xToCoordinate=m,e.yToCoordinate=u,e.aitoff=g,e.roundTo=y,e.sinci=f,e.acos=b,e.calculateBound=v,e.triggerDownload=x,e.Point=et,e.MinMax=tt,e.GeoLocation=it,e.measureText=S,e.TextOption=at,e.PathOption=ot,e.ColorValue=nt,e.RectOption=lt,e.CircleOption=rt,e.PolygonOption=st,e.PolylineOption=dt,e.LineOption=pt,e.Line=ht,e.MapLocation=ct,e.Rect=mt,e.PatternOptions=ut,e.renderTextElement=O,e.convertElement=_,e.formatValue=M,e.convertStringToValue=L,e.convertElementFromLabel=C,e.drawSymbols=P,e.getValueFromObject=w,e.markerColorChoose=I,e.markerShapeChoose=T,e.clusterTemplate=k,e.mergeSeparateCluster=N,e.clusterSeparate=E,e.marker=z,e.markerTemplate=j,e.maintainSelection=A,e.maintainStyleClass=B,e.appendShape=F,e.drawCircle=R,e.drawRectangle=U,e.drawPath=Z,e.drawPolygon=D,e.drawPolyline=V,e.drawLine=H,e.calculateShapes=G,e.drawDiamond=W,e.drawTriangle=q,e.drawCross=X,e.drawHorizontalLine=Y,e.drawVerticalLine=J,e.drawStar=Q,e.drawBalloon=K,e.drawPattern=$,e.getFieldData=ee,e.checkShapeDataFields=te,e.checkPropertyPath=ie,e.filter=ae,e.getRatioOfBubble=oe,e.findMidPointOfPolygon=ne,e.isCustomPath=le,e.textTrim=re,e.findPosition=se,e.removeElement=de,e.calculateCenterFromPixel=pe,e.getTranslate=he,e.getZoomTranslate=ce,e.fixInitialScaleForTile=me,e.getElementByID=ue,e.Internalize=ge,e.getTemplateFunction=ye,e.getElement=fe,e.getShapeData=be,e.triggerShapeEvent=ve,e.getElementsByClassName=xe,e.querySelector=Se,e.getTargetElement=Oe,e.createStyle=_e,e.customizeStyle=Me,e.triggerItemSelectionEvent=Le,e.removeClass=Ce,e.elementAnimate=Pe,e.timeout=we,e.showTooltip=Ie,e.wordWrap=Te,e.createTooltip=ke,e.drawSymbol=Ne,e.renderLegendShape=Ee,e.getElementOffset=ze,e.changeBorderWidth=je,e.changeNavaigationLineWidth=Ae,e.targetTouches=Be,e.calculateScale=Fe,e.getDistance=Re,e.getTouches=Ue,e.getTouchCenter=Ze,e.sum=De,e.zoomAnimate=Ve,e.animate=He,e.MapAjax=gt,e.smoothTranslate=Ge,e.compareZoomFactor=We,e.calculateZoomLevel=qe,e.processResult=Xe,e.LayerPanel=hi,e.Bubble=fi,e.BingMap=si,e.Marker=$t,e.ColorMapping=di,e.DataLabel=vi,e.NavigationLine=xi,e.Legend=Si,e.Highlight=_i,e.Selection=Li,e.MapsTooltip=Ci,e.Zoom=wi,e.Annotations=ci,e.Print=Ii,e.ImageExport=Ti,e.PdfExport=ki,e}({},ej.base,ej.svgbase,ej.data,ej.pdfexport),this.ejs=ej;
//# sourceMappingURL=ej2-maps.min.js.map
